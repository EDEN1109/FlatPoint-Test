window.__require=function t(e,i,a){function s(r,c){if(!i[r]){if(!e[r]){var o=r.split("/");if(o=o[o.length-1],!e[o]){var h="function"==typeof __require&&__require;if(!c&&h)return h(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+r+"'")}}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){return s(e[r][1][t]||t)},u,u.exports,t,e,i,a)}return i[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<a.length;r++)s(a[r]);return s}({AccMergeSlotObj:[function(t,e,i){"use strict";cc._RF.push(e,"bc55czhqD1HLailpOFR5qkg","AccMergeSlotObj");var a=t("AccessoryMgr"),s=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{blackMask:cc.Node,checkArrow:cc.Node,accSprite:cc.Sprite,gradeSprite:cc.Sprite,accStatSprite:cc.Sprite,accStatLabel:cc.Label,_accData:null,_accGrade:"",_accIdx:0,_accType:"",_idx:-1,_selectedBool:!1,_accessoryMgr:null,_popupAccMerge:null},initAccSlot:function(t,e,i){this._accessoryMgr=a.instance,this._popupAccMerge=e,this._idx=t,this._accData=i,this.unSelected(),this.initData(),this.node.on(cc.Node.EventType.TOUCH_START,this.myAccTouch,this)},initAccSelectedSlot:function(t,e,i){this._accessoryMgr=a.instance,this._popupAccMerge=e,this._idx=t,this._accData=i,this.initData(),this.node.on(cc.Node.EventType.TOUCH_START,this.selectedAccTouch,this)},initData:function(){if(null!=this._accData){this._accType=this._accData.getAccType();var t=this._accData.getIdx(),e=this._accData.getAccGrade();this._accGrade=e;var i=this._accData.getStatType(),a=this._accData.getStat();this.accSprite.spriteFrame=this._accessoryMgr.getAccSprite(this._accType,t),this.gradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(e),this.accStatSprite.spriteFrame=this._accessoryMgr.getAccStatSprite(i),this.accStatLabel.string=a,this.node.getComponent("cc.Sprite").spriteFrame=s.instance.getSpriteToUI("popup_care1")}else this.accSprite.spriteFrame=null,this.gradeSprite.spriteFrame=null,this.accStatSprite.spriteFrame=null,this.accStatLabel.string="",this.node.getComponent("cc.Sprite").spriteFrame=s.instance.getSpriteToUI("popup_care2")},myAccTouch:function(t){var e=this._popupAccMerge.getSelectedCount();0==e&&this._popupAccMerge.selectGrade(this._accGrade),this._selectedBool?e>0&&(this._popupAccMerge.unselectAcc(this._idx),this.unSelected()):e<this._popupAccMerge._MAX_SELECT_SLOT&&(this._popupAccMerge.selectAcc(this._idx),this.selected())},selectedAccTouch:function(t){var e=this._accData.getPK();this._popupAccMerge.unselectAccPk(e)},selected:function(){this.blackMask.active=!0,this.checkArrow.active=!0,this._selectedBool=!0},unSelected:function(){this.blackMask.active=!1,this.checkArrow.active=!1,this._selectedBool=!1}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",PlaySceneMgr:"PlaySceneMgr"}],AccSlotObj:[function(t,e,i){"use strict";cc._RF.push(e,"cc90c6vOQtBFph3w/GiAlph","AccSlotObj");var a=t("AccessoryMgr");cc.Class({extends:cc.Component,properties:{accSprite:cc.Sprite,gradeSprite:cc.Sprite,_accData:null,_accGrade:null,_accIdx:0,_accType:"",_accessoryMgr:null,_popupDressRoom:null,_btnLockFlag:!0},initUserAcc:function(t,e){if(this._accessoryMgr=a.instance,null!=e&&(this._popupDressRoom=e,this._btnLockFlag=!1),this._accData=t,null!=t){this._accType=t.getAccType();var i=t.getIdx(),s=t.getAccGrade();this.accSprite.spriteFrame=this._accessoryMgr.getAccSprite(this._accType,i),this.gradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(s)}else this.accSprite.spriteFrame=null,this.gradeSprite.spriteFrame=null;this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartHandler,this)},touchStartHandler:function(t){this._popupDressRoom.openPopupAccEquip(this._accData,this._accType)}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr"}],AccStatObj:[function(t,e,i){"use strict";cc._RF.push(e,"964433uUYhMX4V4yievxDiB","AccStatObj"),cc.Class({extends:cc.Component,properties:{statSprite:cc.Sprite,statLabel:cc.Label},initAccStat:function(t,e){this.statSprite.spriteFrame=t,this.statLabel.string="+"+Math.round(100*e)+"%"},initAccBuff:function(t,e,i){this.statSprite.spriteFrame=t,this.statLabel.string="A"==i||"S"==i?"+"+e:"+"+Math.round(100*e)+"%"}}),cc._RF.pop()},{}],AccessoryData:[function(t,e,i){"use strict";cc._RF.push(e,"ce506Gy109D/47NPSljbPBc","AccessoryData"),cc.Class({extends:cc.Component,properties:{_accIdx:0,_nameTextKey:0,_explainTextKey:0,_accType:"",_accGrade:"",_baseProb:0,_cashProb:0,_galleryType:0},initAccData:function(t,e,i,a,s,n,r,c){this._accIdx=t,this._nameTextKey=e,this._explainTextKey=i,this._accType=a,this._accGrade=s,this._baseProb=n,this._cashProb=r,this._galleryType=c},getIdx:function(){return this._accIdx},getNameTextKey:function(){return this._nameTextKey},getExplainTextKey:function(){return this._explainTextKey},getAccType:function(){return this._accType},getAccGrade:function(){return this._accGrade},getBaseProb:function(){return this._baseProb},getCashProb:function(){return this._cashProb},getGalleryType:function(){return this._galleryType}}),cc._RF.pop()},{}],AccessoryMgr:[function(t,e,i){"use strict";cc._RF.push(e,"9f1e1wAFrpFgJk8JoRI3BDG","AccessoryMgr");var a=t("Global"),s=t("AccessoryData"),n=t("AccessoryOptionData"),r=(t("DataMgr"),cc.Class({extends:cc.Component,properties:{_accessoryDic:null,_accStatArr:null,_accBuffArr:null,_dataMgr:null,atlasItem:cc.SpriteAtlas,atlasUI:cc.SpriteAtlas},statics:{instance:null},onLoad:function(){r.instance=this,cc.game.addPersistRootNode(this.node)},setDataMgr:function(t){this._dataMgr=t},initAccData:function(t){this._accessoryDic={};for(var e=0,i=0,n=0;n<t.getRecordNum();n++){var r=this._dataMgr.getGalleyType(t.getRecordValue(n,"Gallery_Type")),c=new s;e+=t.getRecordValue(n,"Get_Acc_Rare_Probability")/1e4,i+=t.getRecordValue(n,"Get_Acc_Cash_Probability")/1e4;var o=parseInt(t.getRecordValue(n,"Acc_Index"));c.initAccData(parseInt(t.getRecordValue(n,"Acc_Index")),parseInt(t.getRecordValue(n,"Name_TextKey")),parseInt(t.getRecordValue(n,"Explain_Text_Key")),t.getRecordValue(n,"Acc_Type"),t.getRecordValue(n,"Acc_Grade"),e,i,r),this._accessoryDic[o]=c}a.setAccMax(t.getRecordNum())},initAccOptionData:function(t){this._accStatArr=[],this._accBuffArr=[];for(var e=0;e<t.getRecordNum();e++){var i=new n,a=t.getRecordValue(e,"Acc_Op_Type"),s=t.getRecordValue(e,"Acc_Grade"),r=t.getRecordValue(e,"Op_Min"),c=t.getRecordValue(e,"Op_Max");"BUFF"==a&&"A"==s&&(r/=1e4,c/=1e4),i.initAccOptionData(s,r,c),"STAT"==a?this._accStatArr.push(i):this._accBuffArr.push(i)}},getOptionStat:function(t){for(var e=0;e<this._accStatArr.length;e++)if(this._accStatArr[e].getAccGrade()==t)return this._accStatArr[e]},getOptionBuff:function(t){for(var e=0;e<this._accBuffArr.length;e++)if(this._accBuffArr[e].getAccGrade()==t)return this._accBuffArr[e]},getAccDic:function(){return this._accessoryDic},getStatType:function(){switch(Math.floor(3*Math.random())){case 0:return"Health";case 1:return"Charm";case 2:return"Int"}},getAccSprite:function(t,e){return this.atlasItem.getSpriteFrame(t+"_"+e)},getAccStatSprite:function(t){return this.atlasUI.getSpriteFrame("icon_"+t)},getAccBuffSprite:function(t){return"Coin"==t?this.atlasUI.getSpriteFrame("icon_coin_plus_s"):this.atlasUI.getSpriteFrame("icon_can_plus_s")},getAccGradeSprite:function(t){return this.atlasUI.getSpriteFrame("icon_acc_"+t)}}));cc._RF.pop()},{AccessoryData:"AccessoryData",AccessoryOptionData:"AccessoryOptionData",DataMgr:"DataMgr",Global:"Global"}],AccessoryOptionData:[function(t,e,i){"use strict";cc._RF.push(e,"7bda8OprqJKIJjvSEfXhpVR","AccessoryOptionData"),cc.Class({extends:cc.Component,properties:{_accGrade:"",_opMin:0,_opMax:0},initAccOptionData:function(t,e,i){this._accGrade=t,this._opMin=e,this._opMax=i},getAccGrade:function(){return this._accGrade},getOpMin:function(){return this._opMin},getOpMax:function(){return this._opMax}}),cc._RF.pop()},{}],AccessoryUserData:[function(t,e,i){"use strict";cc._RF.push(e,"b8dfdtM49RMk5wqHnXAIjfa","AccessoryUserData"),cc.Class({extends:cc.Component,properties:{_PK:0,_statType:null,_stat:null,_buffType:"",_buffEffect:"",_equipBool:!1,_accInfoData:null},initUserAccData:function(t,e,i,a,s,n){this._accInfoData=t,this._PK=e,this._statType=i,this._stat=a,this._buffType=s,this._buffEffect=n},setEquip:function(t){this._equipBool=t},getEquip:function(){return this._equipBool},getIdx:function(){return this._accInfoData._accIdx},getNameTextKey:function(){return this._accInfoData._nameTextKey},getAccType:function(){return this._accInfoData._accType},getAccGrade:function(){return this._accInfoData._accGrade},getPK:function(){return this._PK},getStatType:function(){return this._statType},getStat:function(){return this._stat},getBuffType:function(){return this._buffType},getbuffEffect:function(){return this._buffEffect},getSaveObj:function(){return{accInfoData:this._accInfoData,PK:this._PK,statType:this._statType,stat:this._stat,buffType:this._buffType,buffEffect:this._buffEffect,equipBool:this._equipBool}},setSaveObj:function(t){this._accInfoData=t.accInfoData,this._PK=t.PK,this._statType=t.statType,this._stat=t.stat,this._buffType=t.buffType,this._buffEffect=t.buffEffect,this._equipBool=t.equipBool}}),cc._RF.pop()},{}],AdsCat:[function(t,e,i){"use strict";cc._RF.push(e,"d31dcr1PFZJKJxZsKuXGfVI","AdsCat");var a=t("SoundMgr"),s=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{catSkeleton:sp.Skeleton,_outBool:!1,_playSceneMgr:null},start:function(){},inCat:function(t){if(this._playSceneMgr=s.instance,t)var e=620;else{e=10*(Math.floor(50*Math.random())+35);this.scheduleOnce(this.outCat,60)}this.node.x=110,this.node.y=e,this.node.active=!0,this._outBool=!1,this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(-150,0)).easing(cc.easeCircleActionOut()),cc.callFunc(this.startAni,this))),this._playSceneMgr.getGameState()==this._playSceneMgr.GAME_STATE_PLAY&&(a.playSound(a.audioAdsCat),this.scheduleOnce(this.outCat,60))},startAni:function(){this.catSkeleton.setAnimation(0,"ads",!0)},outCat:function(){this._outBool||(this.unschedule(this.outCat),this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(150,0)).easing(cc.easeCircleActionOut()),cc.callFunc(this.deleteCat,this))),this._outBool=!0)},deleteCat:function(){this._playSceneMgr.startAdsCat(),this.node.active=!1},OnCatBtn:function(){this.outCat()}}),cc._RF.pop()},{PlaySceneMgr:"PlaySceneMgr",SoundMgr:"SoundMgr"}],Blind:[function(t,e,i){"use strict";cc._RF.push(e,"4dcf22pp6xL5ZN1PK6KSFuI","Blind");var a=cc.Class({extends:cc.Component,properties:{maskNode:cc.Node,_firstFlag:!0},statics:{instance:null},onLoad:function(){a.instance=this},start:function(){},fadeIn:function(t){this.maskNode.opacity=0,this.node.active=!0,this.maskNode.runAction(cc.sequence(cc.fadeIn(t),cc.callFunc(null,this)))},fadeOut:function(t){this.maskNode.opacity=255,this.node.active=!0,this.maskNode.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(this.endOut,this)))},fadeInOut:function(){},endOut:function(){this.node.active=!1}});cc._RF.pop()},{}],CareData:[function(t,e,i){"use strict";cc._RF.push(e,"41656Tx3vpA4YGISlClEQvD","CareData");cc.Class({extends:cc.Component,properties:{_careIndex:0,_careType:0,_currencyType:0,_nameTextKey:0,_explainTextKey:0,_price:0,_priceType:0,_expNormal:0,_expDifferent:0,_expRight:0},initData:function(t,e,i,a,s,n,r,c,o,h){this._careIndex=t,this._careType=e,this._currencyType=i,this._nameTextKey=a,this._explainTextKey=s,this._price=n,this._priceType=r,this._expNormal=c,this._expDifferent=o,this._expRight=h},getIdx:function(){return this._careIndex},getCareType:function(){return this._careType},getCurrencyType:function(){return this._currencyType},getNameTextKey:function(){return this._nameTextKey},getExplainTextKey:function(){return this._explainTextKey},getEnableCatNum:function(){return this._enableCatNum},getPrice:function(){return this._price},getPriceType:function(){return this._priceType},getExpNormal:function(){return this._expNormal},getExpDifferent:function(){return this._expDifferent},getExpRight:function(){return this._expRight}});cc._RF.pop()},{}],CareItemUserData:[function(t,e,i){"use strict";cc._RF.push(e,"6d9a6dV51tMf6i8XS4wn5La","CareItemUserData"),cc.Class({extends:cc.Component,properties:{_hungry1:0,_dirty1:0,_sick1:0,_bored1:0,_hungry2:0,_dirty2:0,_sick2:0,_bored2:0},init:function(){this._hungry1=0,this._dirty1=0,this._sick1=0,this._bored1=0,this._hungry2=0,this._dirty2=0,this._sick2=0,this._bored2=0},setItemCount:function(t,e){switch(t){case 1:this._hungry1=e;break;case 2:this._dirty1=e;break;case 3:this._sick1=e;break;case 4:this._bored1=e;break;case 11:this._hungry2=e;break;case 12:this._dirty2=e;break;case 13:this._sick2=e;break;case 14:this._bored2=e}},getItemCount:function(t){switch(t){case 1:return this._hungry1;case 2:return this._dirty1;case 3:return this._sick1;case 4:return this._bored1;case 11:return this._hungry2;case 12:return this._dirty2;case 13:return this._sick2;case 14:return this._bored2}},getSaveObj:function(){return{hungry1:this._hungry1,dirty1:this._dirty1,sick1:this._sick1,bored1:this._bored1,hungry2:this._hungry2,dirty2:this._dirty2,sick2:this._sick2,bored2:this._bored2}},setSaveObj:function(t){this._hungry1=t.hungry1,this._dirty1=t.dirty1,this._sick1=t.sick1,this._bored1=t.bored1,this._hungry2=t.hungry2,this._dirty2=t.dirty2,this._sick2=t.sick2,this._bored2=t.bored2}}),cc._RF.pop()},{}],CashShopData:[function(t,e,i){"use strict";cc._RF.push(e,"d283dRyk0NKoJzyccxxZrl7","CashShopData");var a=t("Global");cc.Class({extends:cc.Component,properties:{_itemIndex:0,_itemTextKey:0,_ProductId:"",_bgCate:0,_cate:0,_buyLimit:0,_weekType:0,_dailyReset:0,_chain:0,_priceType:0,_price:0,_priceE:0,_bonusRate:0,_type1:0,_type2:0,_type3:0,_type4:0,_type5:0,_type6:0,_value1:0,_value2:0,_value3:0,_value4:0,_value5:0,_value6:0,_adPass:0,_eventType:0,_newProduct:0,_best:0},initData:function(t,e,i,a,s,n,r,c,o,h,u,l,_,p,d,g,S,T,A,C,f,m,b,M,y,P,R,N,L){this._itemIndex=t,this._itemTextKey=e,this._ProductId=i,this._bgCate=a,this._cate=s,this._buyLimit=n,this._weekType=r,this._dailyReset=c,this._chain=o,this._priceType=h,this._price=u,this._priceE=l,this._bonusRate=_,this._type1=p,this._value1=d,this._type2=g,this._value2=S,this._type3=T,this._value3=A,this._type4=C,this._value4=f,this._type5=m,this._value5=b,this._type6=M,this._value6=y,this._adPass=P,this._eventType=R,this._newProduct=N,this._best=L},getIdx:function(){return this._itemIndex},getTextKey:function(){return this._itemTextKey},getProductId:function(){return this._ProductId},getBgCate:function(){return this._bgCate},getCate:function(){return this._cate},getbuyLimit:function(){return this._buyLimit},getWeekType:function(){return this._weekType},getDailyReset:function(){return this._dailyReset},getChain:function(){return this._chain},getPriceType:function(){return this._priceType},getPrice:function(){return this._price},getBonusRate:function(){return this._bonusRate},getRewardType:function(t){switch(t){case 0:return this._type1;case 1:return this._type2;case 2:return this._type3;case 3:return this._type4;case 4:return this._type5;case 5:return this._type6;default:return a.PAYMENT_NONE}},getRewardValue:function(t){switch(t){case 0:return this._value1;case 1:return this._value2;case 2:return this._value3;case 3:return this._value4;case 4:return this._value5;case 5:return this._value6;default:return 0}},getAdPass:function(){return this._adPass},getEventType:function(){return this._eventType},getNewProduct:function(){return this._newProduct},getBest:function(){return this._best}}),cc._RF.pop()},{Global:"Global"}],CashShopObj:[function(t,e,i){"use strict";cc._RF.push(e,"92b315w2JVH7rOvv+N89nAg","CashShopObj");var a=t("DataMgr"),s=(t("PopupMgr"),t("Global")),n=t("PlaySceneMgr"),r=(t("SoundMgr"),t("LocaleMgr"));cc.Class({extends:cc.Component,properties:{remainTimeNode:cc.Node,bestNode:cc.Node,productCountNode:cc.Node,newNode:cc.Node,bonusNode:cc.Node,productBgSprite:cc.Sprite,productSprite:cc.Sprite,productCountSprite:cc.Sprite,itemNode:[cc.Node],itemSprite:[cc.Sprite],itemLabel:[cc.Label],productNameLabel:cc.Label,bonusLabel:cc.Label,remainTimeLabel:cc.Label,priceLabel:cc.Label,_idx:0,_limitItemCount:0,_buyLimit:0,_nameTextKey:0,_rewardArr:null,_popupCashShop:null,_playSceneMgr:null,_ITEM_COUNT_MAX:6},init:function(t,e){this._playSceneMgr=n.instance,this._popupCashShop=e,this._rewardArr=[];var i=t.getCate();switch(this.bonusNode.active=2==i,this._idx=t.getIdx(),this._limitItemCount=a.getShopLimitItemData(this._idx),t.getEventType()){case 0:this.remainTimeNode.active=!1}this._nameTextKey=t.getTextKey();var c=t.getWeekType();switch(this._buyLimit=t.getbuyLimit(),this._buyLimit>0&&this.chkBuyCount(),this._buyLimit){case 1:this.productCountNode.active=!0,this.productCountSprite.spriteFrame=1==c?this._playSceneMgr.getSpriteToUI("shop_daily1"):this._playSceneMgr.getSpriteToUI("shop_only1"),this.productNameLabel.string=r.getString(this._nameTextKey)+" ("+this._limitItemCount+"/"+this._buyLimit+")";break;case 3:this.productCountNode.active=!0,this.productCountSprite.spriteFrame=1==c?this._playSceneMgr.getSpriteToUI("shop_daily3"):this._playSceneMgr.getSpriteToUI("shop_only3"),this.productNameLabel.string=r.getString(this._nameTextKey)+" ("+this._limitItemCount+"/"+this._buyLimit+")";break;default:this.productCountNode.active=!1,this.productNameLabel.string=r.getString(this._nameTextKey)}var o=t.getBest();this.bestNode.active=1==o;var h=t.getNewProduct();this.newNode.active=1==h;var u=t.getBgCate();this.productBgSprite.spriteFrame=this._playSceneMgr.getCashProductBgSprite(u);var l=t.getProductId();this.productSprite.spriteFrame=this._playSceneMgr.getCashProductSprite(l);for(var _=0;_<this._ITEM_COUNT_MAX;_++){var p=t.getRewardType(_),d=t.getRewardValue(_);if(p==s.PAYMENT_NONE)this.itemNode[_].active=!1;else{this.itemNode[_].active=!0;var g={};g.type=p,g.count=d,this._rewardArr.push(g)}this.itemSprite[_].spriteFrame=this._playSceneMgr.getCurrencySprite(p),this.itemLabel[_].string=s.getNumToType(d)}var S=t.getBonusRate();this.bonusLabel.string=S+"%";var T=t.getPrice();this.priceLabel.string="\\"+T},initBuyCount:function(){switch(this._limitItemCount=a.getShopLimitItemData(this._idx),this._buyLimit){case 1:case 3:this.productNameLabel.string=r.getString(this._nameTextKey)+" ("+this._limitItemCount+"/"+this._buyLimit+")"}},chkBuyCount:function(){this._limitItemCount>=this._buyLimit&&(this.node.active=!1)},OnbuyBtn:function(){this._buyLimit>0?this._limitItemCount<this._buyLimit&&(this._limitItemCount++,a.setShopLimitItemData(this._idx,this._limitItemCount),this.successHandler(),this.initBuyCount(),this.chkBuyCount()):this.successHandler()},successHandler:function(){this._popupCashShop.buyProduct(this._rewardArr)},failHandler:function(){}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],CatContest:[function(t,e,i){"use strict";cc._RF.push(e,"b4074NRVHVFo46VcF6rNt33","CatContest");var a=t("Global"),s=t("DataMgr"),n=t("PopupMgr"),r=(t("LocaleMgr"),t("PlaySceneMgr")),c=t("RareCatMgr"),o=(t("AccessoryMgr"),t("SoundMgr"));cc.Class({extends:cc.Component,properties:{rareCatSkeleton:sp.Skeleton,judgementSkeleton:sp.Skeleton,judgeSkeleton:sp.Skeleton,doubleSkeleton:sp.Skeleton,contestNode:[cc.Node],stateNode:cc.Node,emoticonBalloon:cc.Node,emoticonSprite:cc.Sprite,scoreLabel:[cc.Label],_contestScore:null,_emoticonPosXArr:null,_emoticonIdx:null,_contestKind:0,_catAniCount:0,_judgementCount:0,_scoreCount:0,_rollingCount:0,_health:0,_charm:0,_int:0,_catGrade:0,_RareCat:null,_aniName:null,_accSlotHat:null,_accSlotNeck:null,_playSceneMgr:null,_ROLLING_TIME:.01},start:function(){var t=this;this.judgementSkeleton.setCompleteListener(function(e){t.judgementSkeleton.node.active=!1}),this.judgeSkeleton.setEventListener(function(t,e){"sound"==e.data.name&&o.playSound(o.audioContestJudgement)}),this.judgeSkeleton.setCompleteListener(function(e){t.scheduleOnce(t.fadeIn),t.scheduleOnce(t.startStep3,1),t.scheduleOnce(t.fadeOut,1),t.scheduleOnce(t.scoreJudgement,2)}),this.rareCatSkeleton.setEventListener(function(e,i){"endAni"==i.data.name&&t.rareCatSkeleton.setAnimation(0,"idle",!0)}),this._emoticonPosXArr=[-240,-100,40]},startContest:function(t){this._playSceneMgr=r.instance,this._RareCatMgr=c.instance,this._catGrade=t,this._catAniCount=0,this._judgementCount=0,this._scoreCount=0,this._contestScore=[],this._emoticonIdx=[],this._contestKind=this._playSceneMgr.getContestKind(),o.playMusic(o.audioBgmFever,!0),this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.initContest,1),this.scheduleOnce(this.fadeOut,1.1),this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_CONTEST)},fadeIn:function(){this._playSceneMgr.fadeIn()},fadeOut:function(){this._playSceneMgr.fadeOut()},initContest:function(){o.playSound(o.audioContestClap),this.node.active=!0,this.contestNode[0].active=!0,this.contestNode[1].active=!1,this.contestNode[2].active=!1,this.stateNode.scale=1,this.stateNode.y=-300,this.initCat();var t=cc.spawn(cc.scaleTo(2,1),cc.moveTo(1,cc.v2(2,-200)));this.stateNode.runAction(cc.sequence(t,cc.callFunc(this.startStep1,this)))},initCat:function(){this._RareCat=this._RareCatMgr.getRareCatDataGrade(this._catGrade);var t=s.getRareCatData(this._catGrade),e=t.getAccHatPK(),i=t.getAccNeckPK(),a=s.getUserHatAccData(e),n=s.getUserNeckAccData(i);if(this.rareCatSkeleton.skeletonData=this._RareCat.getSpineData(),this.rareCatSkeleton.setSkin(this._RareCat.getSpineSkin()),this._aniName=this._RareCat.getSpineAni(),this._accSlotHat=this._RareCat.getSpineAccSlotHat(),null!=n?this._accSlotNeck=this._RareCat.getSpineAccSlotNeck(n.getIdx()):(this.rareCatSkeleton.setAttachment("neck_front","none"),this.rareCatSkeleton.setAttachment("neck_back","none")),null==a)this.rareCatSkeleton.setAttachment(this._accSlotHat,"none");else{var r=a.getAccType()+"_"+a.getIdx();this.rareCatSkeleton.setAttachment(this._accSlotHat,r)}if(null==n);else{r=n.getAccType()+"_"+n.getIdx();this.rareCatSkeleton.setAttachment(this._accSlotNeck,r)}this.actAni(this._aniName[0],!0);var c=t.getStatHealth(),o=t.getStatCharm(),h=t.getStatInt(),u=0,l=0,_=0;if(null!=a){var p=a.getStatType(),d=a.getStat();switch(p){case"Health":u+=d;break;case"Charm":l+=d;break;case"Int":_+=d}}if(null!=n){var g=n.getStatType(),S=n.getStat();switch(g){case"Health":u+=S;break;case"Charm":l+=S;break;case"Int":_+=S}}this._health=Math.ceil(c*(1+u)),this._charm=Math.ceil(o*(1+l)),this._int=Math.ceil(h*(1+_))},actAni:function(t,e){e?this.rareCatSkeleton.setAnimation(0,"idle",!0):this.rareCatSkeleton.setAnimation(0,t,!1)},startStep1:function(){this.catAction(),this.schedule(this.catAction,2.5,1),this.judgeAction(),this.schedule(this.judgeAction,2.5,1),this.scheduleOnce(this.fadeIn,8),this.scheduleOnce(this.startStep2,9),this.scheduleOnce(this.fadeOut,9)},startStep2:function(){o.stopMusic(),this.scheduleOnce(this.tempResultSound,3.4),this.contestNode[0].active=!1,this.contestNode[1].active=!0,this.judgeSkeleton.setAnimation(0,"cut_in_contest",!1)},tempResultSound:function(){o.playSound(o.audioResult)},startStep3:function(){this.contestNode[1].active=!1,this.contestNode[2].active=!0},catAction:function(){this.actAni(this._aniName[this._catAniCount],!1),this._catAniCount++},judgeAction:function(){var t=s.getTrophy(),e=Math.floor(t/a.CONTEST_LV_STANDARD),i=s.getContestLvData(e),n=0,r="";switch(this._judgementCount){case 0:n=i.getJudgement(this._health);break;case 1:n=i.getJudgement(this._charm);break;case 2:n=i.getJudgement(this._int)}var c=s.getContestScoreData(n),h=c.min,u=c.max,l=Math.floor(Math.random()*(u-h+1))+h;switch(this._contestScore.push(l),n){case a.CONTEST_PERFECT:r="eff_result_perfect",this._emoticonIdx[this._judgementCount]=a.CAT_EMOTICON_LIKE,o.playSound(o.audioContestGood);break;case a.CONTEST_GREAT:r="eff_result_great",this._emoticonIdx[this._judgementCount]=a.CAT_EMOTICON_BORING,o.playSound(o.audioContestGood);break;case a.CONTEST_GOOD:r="eff_result_good",this._emoticonIdx[this._judgementCount]=a.CAT_EMOTICON_SICK,o.playSound(o.audioBtn2);break;case a.CONTEST_BAD:r="eff_result_bad",this._emoticonIdx[this._judgementCount]=a.CAT_EMOTICON_ANGRY,o.playSound(o.audioCareFail)}this.judgementSkeleton.node.active=!0,this.judgementSkeleton.setAnimation(0,r,!1),this._judgementCount++},scoreJudgement:function(){this.scoreSelect(),this.schedule(this.scoreSelect,1.5,1)},scoreSelect:function(){this.scoreLabel[this._scoreCount].node.active=!0,this._rollingCount=0,this.schedule(this.scoreRolling,this._ROLLING_TIME,50)},scoreRolling:function(){var t=Math.floor(10*Math.random())+1;if(this.scoreLabel[this._scoreCount].string=t,this._rollingCount++,this._rollingCount>50){switch(this.scoreLabel[this._scoreCount].string=this._contestScore[this._scoreCount],this.emoticonBalloon.x=this._emoticonPosXArr[this._scoreCount],this.emoticonBalloon.active=!0,this.emoticonSprite.spriteFrame=this._playSceneMgr.getEmoticon(this._emoticonIdx[this._scoreCount]),this.scheduleOnce(this.emoticonEnd,1),this._emoticonIdx[this._scoreCount]){case a.CAT_EMOTICON_LIKE:case a.CAT_EMOTICON_BORING:o.playSound(o.audioContestGood);break;case a.CAT_EMOTICON_SICK:o.playSound(o.audioBtn2);break;case a.CAT_EMOTICON_ANGRY:o.playSound(o.audioCareFail)}this._scoreCount++,3==this._scoreCount&&this.scheduleOnce(this.showDouble,1.5)}},emoticonEnd:function(){this.emoticonBalloon.active=!1},showDouble:function(){var t="";switch(this._contestKind){case a.CONTEST_KIND_HEALTH:t="card1";break;case a.CONTEST_KIND_CHARM:t="card2";break;case a.CONTEST_KIND_INT:t="card3"}this.doubleSkeleton.node.active=!0,this.doubleSkeleton.setSkin(t),this.doubleSkeleton.setAnimation(0,"eff",!1),this.scoreLabel[this._contestKind].node.runAction(cc.sequence(cc.delayTime(1.2),cc.callFunc(this.bonusSound,this),cc.scaleTo(.25,1.5).easing(cc.easeBackOut()),cc.callFunc(this.endDouble,this)))},bonusSound:function(){o.playSound(o.audioContestBonus)},endDouble:function(){this._contestScore[this._contestKind]=2*this._contestScore[this._contestKind],this.scoreLabel[this._contestKind].string=this._contestScore[this._contestKind],this.scoreLabel[this._contestKind].node.color=cc.color(66,211,179),this.scoreLabel[this._contestKind].node.runAction(cc.sequence(cc.scaleTo(.25,1).easing(cc.easeBackOut()),cc.delayTime(.5),cc.callFunc(this.endContest,this)))},endContest:function(){this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.fadeOut,1),this.scheduleOnce(this.destroyContest,1)},destroyContest:function(){for(var t=0;t<this.scoreLabel.length;t++)this.scoreLabel[t].node.active=!1;this.scoreLabel[this._contestKind].node.color=cc.color(255,255,255);var e=0;for(t=0;t<this._contestScore.length;t++)e+=this._contestScore[t];this.doubleSkeleton.node.active=!1;var i={};i.catGrade=this._catGrade,i.score=e,n.instance.showPopup(n.POPUP_CONTEST_RESULT,i),this.node.active=!1,this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_PLAY),this._playSceneMgr.onMusic()}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr"}],CatHouseData:[function(t,e,i){"use strict";cc._RF.push(e,"9cb2c5yVoVEBJDW3UULN+15","CatHouseData");cc.Class({extends:cc.Component,properties:{_houseIndex:0,_nameTextKey:0,_explainTextKey:0,_price:0,_priceType:"",_galleryType:0},initData:function(t,e,i,a,s,n){this._houseIndex=t,this._nameTextKey=e,this._explainTextKey=i,this._price=a,this._priceType=s,this._galleryType=n},getHouseIndex:function(){return this._houseIndex},getNameTextKey:function(){return this._nameTextKey},getExplainTextKey:function(){return this._explainTextKey},getEnableCatNum:function(){return this._enableCatNum},getPrice:function(){return this._price},getPriceType:function(){return this._priceType},getGalleryType:function(){return this._galleryType}});cc._RF.pop()},{}],CatHouseObj:[function(t,e,i){"use strict";cc._RF.push(e,"10bfecqBFVFoaEXlkFj7V3G","CatHouseObj");t("DataMgr"),t("LocaleMgr");var a=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{houseSprite:cc.Sprite,houseNode:cc.Node,nameLabel:cc.Label,addSprite:cc.SpriteFrame,batchSprite:cc.SpriteFrame,_catHouseData:null,_popupCatHotel:null},init:function(t,e,i){cc.log(e),this._catHouseData=e,this._popupCatHotel=i,0==e?(this.houseSprite.spriteFrame=this.batchSprite,this.houseNode.setContentSize(50,50),this.nameLabel.string="\uc2ac\ub86f\uc774 \ube44\uc5b4 \uc788\uc5b4\uc694"):-1==e?(this.houseSprite.spriteFrame=this.addSprite,this.houseNode.setContentSize(50,50),this.nameLabel.string="\uc2ac\ub86f \uad6c\ub9e4\uac00 \ud544\uc694\ud574\uc694"):(this.houseSprite.spriteFrame=a.instance.getHouseSprite(t),this.houseNode.setContentSize(100,80),this.nameLabel.string="\ucea3 \ud558\uc6b0\uc2a4")},OnBtn:function(){if(0==this._catHouseData);else if(-1==this._catHouseData)this._popupCatHotel.showPopupSlotBuy(2);else{var t=this._catHouseData.getHouseIndex();this._popupCatHotel.deployHouse(t)}}}),cc._RF.pop()},{DataMgr:"DataMgr",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr"}],CatHouseUserData:[function(t,e,i){"use strict";cc._RF.push(e,"bb13bf6qAdA7IoeUfsQTOYV","CatHouseUserData"),cc.Class({extends:cc.Component,properties:{_collect:0,_slotIdx:-1},init:function(t,e){this._collect=t,this._slotIdx=e},setCollect:function(t){this._collect=t},getCollect:function(){return this._collect},setSlotIdx:function(t){this._slotIdx=t},getSlotIdx:function(){return this._slotIdx},getSaveObj:function(){return{collect:this._collect,slotIdx:this._slotIdx}},setSaveObj:function(t){this._collect=t.collect,this._slotIdx=t.slotIdx}}),cc._RF.pop()},{}],CoinObj:[function(t,e,i){"use strict";cc._RF.push(e,"d61f18NVytLEZSdHjw577tL","CoinObj");var a=t("Global");cc.Class({extends:cc.Component,properties:{coinLabel:cc.Label,coinSprite:cc.Sprite,_offsetY:50,_playSceneMgr:null},playAni:function(t,e,i){this._playSceneMgr=e,this.node.y+=this._offsetY,this.node.active=!0,this.node.opacity=255,void 0==i&&(i=a.PAYMENT_COIN),this.coinSprite.spriteFrame=this._playSceneMgr.getCurrencySprite(i),this.coinLabel.string=a.getNumToType(t),this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,30)).easing(cc.easeCircleActionOut()),cc.callFunc(this.hide,this))),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.fadeTo(.5,0),cc.callFunc(this.hide,this)))},hide:function(){this._playSceneMgr.pushCoinObj(this.node),this.node.stopAllActions(),this.node.active=!1}}),cc._RF.pop()},{Global:"Global"}],ContentOpenData:[function(t,e,i){"use strict";cc._RF.push(e,"85cccJcCN9I45QiQm4p8cd9","ContentOpenData"),cc.Class({extends:cc.Component,properties:{_contentIdx:0,_openType:0,_openValue:0,_nameTextKey:0,_explainTextKey:0},init:function(t,e,i,a,s){this._contentIdx=t,this._openType=e,this._openValue=i,this._nameTextKey=a,this._explainTextKey=s},getIdx:function(){return this._contentIdx},getOpenType:function(){return this._openType},getOpenValue:function(){return this._openValue},getNameTextKey:function(){return this._nameTextKey},getExplainTextKey:function(){return this._explainTextKey}}),cc._RF.pop()},{}],ContestLvData:[function(t,e,i){"use strict";cc._RF.push(e,"d05b8iGQxZLSoHZDWPcf8fx","ContestLvData");var a=t("Global");cc.Class({extends:cc.Component,properties:{_contestLv:0,_perfectStat:0,_greatStat:0,_goodStat:0},initData:function(t,e,i,a){this._contestLv=t,this._perfectStat=e,this._greatStat=i,this._goodStat=a},getJudgement:function(t){return t>=this._perfectStat?a.CONTEST_PERFECT:t>=this._greatStat?a.CONTEST_GREAT:t>=this._goodStat?a.CONTEST_GOOD:a.CONTEST_BAD}}),cc._RF.pop()},{Global:"Global"}],ContestRankObj:[function(t,e,i){"use strict";cc._RF.push(e,"e1917Prvg5FJLS18J/mFmHQ","ContestRankObj"),cc.Class({extends:cc.Component,properties:{catNameLabel:cc.Label,catScoreLabel:cc.Label,trophyLabel:cc.Label,trophySprite:cc.Sprite,trophyBgNode:cc.Node,myRankLabel:cc.Label,myRankSprite:cc.Sprite,rankSprite:[cc.SpriteFrame]},initData:function(t,e,i,a){this.catNameLabel.string=e.name,this.catScoreLabel.string=e.score,this.trophyLabel.string=i,this.trophySprite.spriteFrame=a,this.trophyBgNode.color=cc.color(255,187,107),t<4?(this.myRankSprite.node.active=!0,this.myRankLabel.node.active=!1,this.myRankSprite.spriteFrame=this.rankSprite[t-1]):(this.myRankSprite.node.active=!1,this.myRankLabel.node.active=!0,this.myRankLabel.string=t)},setmyColor:function(){this.trophyBgNode.color=cc.color(208,155,95)}}),cc._RF.pop()},{}],ContestRewardData:[function(t,e,i){"use strict";cc._RF.push(e,"fd66a0BgZNEv6geNNVNQ+Bp","ContestRewardData"),cc.Class({extends:cc.Component,properties:{_contestRank:0,_rankStandard:0,_type1:0,_value1:0,_type2:0,_value2:0,_type3:0,_value3:0,_type4:0,_value4:0,_value2Plus:0,_value3Plus:0},initData:function(t,e,i,a,s,n,r,c,o,h,u,l){this._contestRank=t,this._rankStandard=e,this._type1=i,this._value1=a,this._type2=s,this._value2=n,this._type3=r,this._value3=c,this._type4=o,this._value4=h,this._value2Plus=u,this._value3Plus=l},getRankStandard:function(){return this._rankStandard},getRewardType:function(t){switch(t){case 0:return this._type1;case 1:return this._type2;case 2:return this._type3;case 3:return this._type4;default:return Global.PAYMENT_NONE}},getRewardValue:function(t,e){switch(t){case 0:return this._value1;case 1:return this._value2+(e-1)*this._value2Plus;case 2:return this._value3+(e-1)*this._value3Plus;case 3:return this._value4;default:return 0}}}),cc._RF.pop()},{}],CouponData:[function(t,e,i){"use strict";cc._RF.push(e,"d5e31hiJl5Ps6ZpQX1abJnc","CouponData");var a=t("Global");cc.Class({properties:{_couponIdx:0,_couponCode:0,_type1:0,_value1:0,_type2:0,_value2:0,_type3:0,_value3:0,_type4:0,_value4:0,_type5:0,_value5:0,_type6:0,_value6:0,_sdate:0,_edate:0,_eventType:"",_eventValue:0},initData:function(t,e,i,a,s,n,r,c,o,h,u,l,_,p,d,g,S,T){if(this._couponIdx=t,this._couponCode=e,this._type1=i,this._value1=a,this._type2=s,this._value2=n,this._type3=r,this._value3=c,this._type4=o,this._value4=h,this._type5=u,this._value5=l,this._type6=_,this._value6=p,""!=d){var A=new Date(parseInt(d.substring(0,4)),parseInt(d.substring(4,6))-1,parseInt(d.substring(6,8)));this._sdate=Math.floor(A.getTime()/1e3)}""!=g&&(A=new Date(parseInt(g.substring(0,4)),parseInt(g.substring(4,6))-1,parseInt(g.substring(6,8))+1),this._edate=Math.floor(A.getTime()/1e3)),""!=S&&(this._eventType=S,this._eventValue=T)},getCouponIdx:function(){return this._couponIdx},getCouponCode:function(){return this._couponCode},getRewardType:function(t){switch(t){case 0:return this._type1;case 1:return this._type2;case 2:return this._type3;case 3:return this._type4;case 4:return this._type5;case 5:return this._type6;default:return a.PAYMENT_NONE}},getRewardValue:function(t){switch(t){case 0:return this._value1;case 1:return this._value2;case 2:return this._value3;case 3:return this._value4;case 4:return this._value5;case 5:return this._value6;default:return 0}},getEventType:function(){return this._eventType},getEventValue:function(){return this._eventValue},isValidDate:function(t){return 0==this._sdate||t>=this._sdate&&t<=this._edate}}),cc._RF.pop()},{Global:"Global"}],DailyAccessData:[function(t,e,i){"use strict";cc._RF.push(e,"f42549fwWhB17TrAX+MRY39","DailyAccessData"),cc.Class({properties:{_idx:0,_time:0,_reward1:0,_count1:0,_reward2:0,_count2:0},initData:function(t,e,i,a,s,n){this._idx=t,this._time=e,this._reward1=i,this._count1=a,this._reward2=s,this._count2=n},getIdx:function(){return this._idx},getTime:function(){return this._time},getReward1:function(){return this._reward1},getCount1:function(){return this._count1},getReward2:function(){return this._reward2},getCount2:function(){return this._count2}}),cc._RF.pop()},{}],DataMgr:[function(t,e,i){"use strict";cc._RF.push(e,"cc0efSPGXVLSJiNJVH9SqBh","DataMgr");var a=t("Global"),s=t("PopupMgr"),n=(t("UnitMgr"),t("RareCatMgr")),r=t("TutoMgr"),c=t("LocaleMgr"),o=t("SoundMgr"),h=t("AccessoryMgr"),u=t("RareCatUserData"),l=t("CatHouseUserData"),_=t("AccessoryUserData"),p=t("CareItemUserData"),d=(t("ContentOpenData"),t("FurnitureData"),t("FurnitureUserData"));e.exports={_playSceneMgr:null,_topUIMgr:null,_botUIMgr:null,_popupUnderMgr:null,_mergeBoardMgr:null,_shopPassiveInfoTable:null,_userExpTable:null,_rareCatExpTable:null,_userLvRewardTable:null,_newCatRewardTable:null,_catHouseTable:null,_normalCatUpgradeTable:null,_mouseRewardTable:null,_boxRewardTable:null,_dailyAccessTable:null,_dailyAccessNum:0,_attendInfoTable:null,_postInfo:null,_eventPostInfo:null,_couponInfo:null,_specialCouponInfo:null,_contestLvTabel:null,_contestScoreTable:null,_contestRewardTable:null,_galleryCatTabel:null,_galleryAccTabel:null,_galleryHouseTabel:null,_careTabel:null,_contentOpenTable:null,_cashShopInfoTable:null,_guideInfoTable:null,_questInfoTabel:null,_questRate:null,_furnitureInfoTable:null,_furnitureUpgradeTable:null,_userLv:1,_userExp:0,_userCoin:0,_userRareCoin:0,_userCashCoin:0,_userCatTicket:0,_userAccTicket:0,_userQuestResetTicket:0,_userCareItem:null,_userHealthTrophy:0,_userCharmTrophy:0,_userIntTrophy:0,_userGenerableCount:5,_userRandomBoxCount:4,_userRandomBoxAccCount:1,_tutoProcArr:null,_contentProcArr:null,_mergeSlotGradeData:null,_unitLvData:null,_nowMaxUnitGrade:1,_nowMakeUnitGrade:1,_catcollection:null,_userBuySlot:0,_userBuyTime:0,_userBuyCoinInc:0,_userBuyBuffTime:0,_userBuyCatLv2:0,_userBuyMergeLv2:0,_userBuyOffline:0,_userBuyMouseLvUp:0,_userCatBuffTime:0,_slotInfoCat:null,_slotInfoHotel:null,_slotInfoHouse:null,_userCatSlotNum:0,_userHotelSlotNum:0,_userHouseSlotNum:0,_userRareSlot:null,_userRareCat:null,_userCatHouse:null,_userFurniture:null,_userCatRoom:null,_userNeckAccessory:null,_userHatAccessory:null,_userAccPK:0,_myPostData:null,_myCouponData:null,_myGalleryData:null,_attendDate:0,_attendCnt:0,_shopLimitItemData:null,_shopDailyPackDate:0,_shopDailyOnceItemData:null,_userGuideKey:-1,_userGuideCount:0,_userGuideCompleteArr:null,_dailyQuestLv:null,_dailyQuestList:null,_dailyQuestRewardNum:0,_dailyQuestRewardDate:0,_questRefreshMaxTime:0,_questMaxPoint:0,_mouseRewardCount:0,_mouseRewardTime:0,_sysNowT:0,_randomBoxTime:0,_randomBoxAdsTime:0,_randomBoxAccTime:0,_randomBoxAccAdsTime:0,_dailyPlayTime:0,_dailyRewardLv:0,_dailyRewardDate:0,_contestTime:0,_contestCatUseTimeArr:null,_furnitureTimeArr:null,_adsQuestTime:0,_rareCatMgr:null,_accessoryMgr:null,_rewardTime:0,_pageIndex:0,CAT_MODE_NORMAL:0,CAT_MODE_RARE:1,Cat_Slot:"Cat_Slot",Cat_Hotel:"Cat_Hotel",Cat_House:"Cat_House",FURNITURE_SLOT_MAX:4,setLink:function(t,e,i,a,s){this._playSceneMgr=t,this._topUIMgr=e,this._botUIMgr=i,this._popupUnderMgr=a,this._mergeBoardMgr=s},initData:function(){this._sysNowT=0,this._userLv=1,this._userExp=0,this._userCoin=0,this._userRareCoin=0,this._userCashCoin=0,this._userCatTicket=0,this._userAccTicket=0,this._userQuestResetTicket=0,this._userCareItem=new p,this._userCareItem.init(),this._userHealthTrophy=0,this._userCharmTrophy=0,this._userIntTrophy=0,this._userGenerableCount=5,this._userRandomBoxCount=4,this._userRandomBoxAccCount=1,this._userBuySlot=0,this._userBuyTime=0,this._userBuyCoinInc=0,this._userBuyBuffTime=0,this._userBuyCatLv2=0,this._userBuyMergeLv2=0,this._userBuyOffline=0,this._userBuyMouseLvUp=0,this._attendDate=0,this._attendCnt=0,this._randomBoxTime=a.RANDOM_BOX_MAX_TIME,this._randomBoxAccTime=a.RANDOM_BOX_ACC_MAX_TIME,this._randomBoxAdsTime=0,this._randomBoxAccAdsTime=0,this._nowMaxUnitGrade=1,this._dailyPlayTime=0,this._dailyRewardLv=0,this._dailyRewardDate=0,this._userGuideKey=-1,this._userGuideCount=0,this._dailyQuestLv=null,this._dailyQuestList=null,this._dailyQuestRewardNum=0,this._dailyQuestRewardDate=0,this._questRefreshMaxTime=0,this._questPoint=0,this._questMaxPoint=0,this._mouseRewardCount=0,this._mouseRewardTime=0,this._myPostData=[],this._myCouponData=[],this._myGalleryData=[],this._userGuideCompleteArr=[],this._contestCatUseTimeArr=[];for(var t=0;t<a.RARE_CAT_NUMBER;t++)this._contestCatUseTimeArr[t]=0;this._furnitureTimeArr=[];for(t=0;t<this.FURNITURE_SLOT_MAX;t++)this._furnitureTimeArr[t]=this._furnitureUpgradeTable[t][0].getProductionTime();this._mergeSlotGradeData=[];for(t=0;t<a.MAX_MERGEOBJ_NUM;++t)this._mergeSlotGradeData[t]=0;this._unitLvData=[];for(t=0;t<a.MAX_UNIT_GRADE;++t)this._unitLvData[t]=1;this._userRareSlot=[];for(t=0;t<a.PAGE_ONE_RARE_SLOT;t++){var e={catGrade:0};e.houseIndex=t+1,this._userRareSlot[t]=e}this._userRareCat=new Array,this._rareCatMgr=n.instance;for(t=a.RARE_CAT_MIN;t<=a.UNIT_GRADEUP_MAX;t++){var i=new u,s=this._rareCatMgr.getRareCatDataGrade(t),c=s.getStatHealth(),o=s.getStatCharm(),h=s.getStatInt(),_=s.getMainStat(),g=s.getLvUpStatMain(),S=s.getLvUpStatSub();i.init(0,-1,-1,-1,c,o,h,_,g,S),this._userRareCat[t]=i}this._userNeckAccessory=new Array,this._userHatAccessory=new Array,this._userCatHouse=new Array;for(t=1;t<=7;t++){var T=new l;T.init(0,t-1),this._userCatHouse[t]=T}this._userFurniture=new Array;for(t=0;t<this._furnitureInfoTable.length;t++){var A=new d;A.initData(t),this._userFurniture.push(A)}this._catcollection=[],this._catcollection[1]=!0;for(t=2;t<=a.TOTAL_CAT_NUMBER;t++)this._catcollection[t]=!1;this._userCatSlotNum=0,this._userHotelSlotNum=0,this._userHouseSlotNum=0,this._pageIndex=this.CAT_MODE_NORMAL,this._shopLimitItemData=[],this._tutoProcArr=[],this._tutoProcArr[r.TUTO_TYPE_FIRST]=0,this._tutoProcArr[r.TUTO_TYPE_TOUCH_CAT_BUTTON]=0,this._tutoProcArr[r.TUTO_TYPE_SHOP]=0,this._tutoProcArr[r.TUTO_TYPE_GALLERY]=0,this._tutoProcArr[r.TUTO_TYPE_RANDOMBOX]=0,this._tutoProcArr[r.TUTO_TYPE_RARE_CAT_FIRST]=0,this._tutoProcArr[r.TUTO_TYPE_CONTEST]=0,this._tutoProcArr[r.TUTO_TYPE_QUEST]=0,this._contentProcArr=[]},saveOption:function(){var t={};t.sound=o.getSoundVol(),t.music=o.getMusicVol(),cc.sys.localStorage.setItem(a.APP_ID+"opData",JSON.stringify(t))},loadOption:function(){var t=JSON.parse(cc.sys.localStorage.getItem(a.APP_ID+"opData"));void 0!=t?(o.setSoundVol(t.sound),o.setMusicVol(t.music)):(o.setSoundVol(1),o.setMusicVol(1))},saveTimeData:function(){var t=Math.floor(cc.sys.now()/1e3);this._sysNowT;this._sysNowT=t;var e={};e.nowTime=this._sysNowT,e.randomBoxTime=this._randomBoxTime,e.randomBoxAdsTime=this._randomBoxAdsTime,e.randomBoxAccTime=this._randomBoxAccTime,e.randomBoxAccAdsTime=this._randomBoxAccAdsTime,e.dailyPlayTime=this._dailyPlayTime,e.dailyRewardLv=this._dailyRewardLv,e.dailyRewardDate=this._dailyRewardDate,e.contestTime=this._contestTime,e.contestCatUseTimeArr=this._contestCatUseTimeArr,e.furnitureTimeArr=this._furnitureTimeArr,e.adsQuestTime=this._adsQuestTime,cc.sys.localStorage.setItem(a.APP_ID+".userTimeData",JSON.stringify(e))},loadTimeData:function(t){if(void 0==t&&(t=JSON.parse(cc.sys.localStorage.getItem(a.APP_ID+".userTimeData"))),void 0!=t){this._sysNowT=t.nowTime;var e=Math.floor(cc.sys.now()/1e3),i=e-this._sysNowT;if(i<0&&(i=0),this._randomBoxTime=t.randomBoxTime,this._randomBoxAdsTime=t.randomBoxAdsTime,void 0==t.randomBoxAccTime?this._randomBoxAccTime=0:this._randomBoxAccTime=t.randomBoxAccTime,void 0==t.randomBoxAccAdsTime?this._randomBoxAccAdsTime=0:this._randomBoxAccAdsTime=t.randomBoxAccAdsTime,this._dailyPlayTime=t.dailyPlayTime,this._dailyRewardLv=t.dailyRewardLv,this._dailyRewardDate=t.dailyRewardDate,this._contestTime=t.contestTime,void 0==t.contestCatUseTimeArr){this._contestCatUseTimeArr=[];for(var s=0;s<a.RARE_CAT_NUMBER;s++)this._contestCatUseTimeArr[s]=0}else this._contestCatUseTimeArr=t.contestCatUseTimeArr;if(void 0==t.furnitureTimeArr){this._furnitureTimeArr=[];for(s=0;s<this.FURNITURE_SLOT_MAX;s++)this._furnitureTimeArr[s]=this._furnitureUpgradeTable[s][0].getProductionTime()}else this._furnitureTimeArr=t.furnitureTimeArr;void 0!=t.adsQuestTime?(this._adsQuestTime=t.adsQuestTime,this._adsQuestTime-=i,this._adsQuestTime<0&&(this._adsQuestTime=0)):this._adsQuestTime=0,this.settingCatGenerableCount(i),this.setOfflineReward(i),this.setUserRandomBoxCount(i),this.setUserRandomBoxAdsTime(i),this.setUserRandomBoxAccCount(i),this.setUserRandomBoxAccAdsTime(i),this.setUserContestTime(i),this.setUserContestCatTime(i),this.setUserFurnitureTime(i),this._sysNowT=e}},setOfflineReward:function(t){t>a.MIN_REWARD_TIME&&(t>a.MAX_REWARD_TIME&&(t=a.MAX_REWARD_TIME),this._rewardTime=t)},settingCatGenerableCount:function(t){var e=this.getUserBuyTime(),i=this.getNormalCatUpgradeTable(e).getSpeedTime,a=Math.floor(t/i),s=this.getGenerableMax();this._userGenerableCount+=a,this._userGenerableCount>s&&(this._userGenerableCount=s)},setUserRandomBoxCount:function(t){var e=this._userRandomBoxCount,i=this._randomBoxTime-t;if(i<0){var s=-Math.floor(i/a.RANDOM_BOX_MAX_TIME),n=i+s*a.RANDOM_BOX_MAX_TIME;this._randomBoxTime=n;var r=e+s;r>a.RANDOM_BOX_MAX_COUNT&&(r=a.RANDOM_BOX_MAX_COUNT),this._userRandomBoxCount=r}else this._randomBoxTime=i},setUserRandomBoxAdsTime:function(t){this._randomBoxAdsTime-=t,this._randomBoxAdsTime<0&&(this._randomBoxAdsTime=0)},setUserRandomBoxAccCount:function(t){var e=this._userRandomBoxAccCount,i=this._randomBoxAccTime-t;if(i<0){var s=-Math.floor(i/a.RANDOM_BOX_ACC_MAX_TIME),n=i+s*a.RANDOM_BOX_ACC_MAX_TIME;this._randomBoxAccTime=n;var r=e+s;r>a.RANDOM_BOX_ACC_MAX_COUNT&&(r=a.RANDOM_BOX_ACC_MAX_COUNT),this._userRandomBoxAccCount=r}else this._randomBoxAccTime=i},setUserRandomBoxAccAdsTime:function(t){this._randomBoxAccAdsTime-=t,this._randomBoxAccAdsTime<0&&(this._randomBoxAccAdsTime=0)},setUserContestTime:function(t){this._contestTime-=t,this._contestTime<0&&(this._contestTime=0)},setUserContestCatTime:function(t){for(var e=0;e<a.RARE_CAT_NUMBER;e++)this._contestCatUseTimeArr[e]-=t,this._contestCatUseTimeArr[e]<0&&(this._contestCatUseTimeArr[e]=0)},getUserContestCatTime:function(t){return this._contestCatUseTimeArr[t-a.RARE_CAT_MIN]},setUserFurnitureTime:function(t){for(var e=0;e<this.FURNITURE_SLOT_MAX;e++)if(this._furnitureTimeArr[e]-=t,this._furnitureTimeArr[e]<0){var i=this._userFurniture[e].getLv(),a=this._furnitureUpgradeTable[e][i],s=a.getProductionTime(),n=a.getProductionCount(),r=a.getSaveMax(),c=-Math.floor(this._furnitureTimeArr[e]/s);this._furnitureTimeArr[e]=this._furnitureTimeArr[e]+c*s;var o=this._userFurniture[e].getCurrency();(o+=n*c)>=r&&(o=r),this._userFurniture[e].setCurrency(o),this._furnitureTimeArr[e]<0&&(this._furnitureTimeArr[e]=0)}},getUserFurnitureTime:function(t){return this._furnitureTimeArr[t]},minusRandomBoxTime:function(){this._userRandomBoxCount<a.RANDOM_BOX_MAX_COUNT?(this._randomBoxTime-=1,this._randomBoxTime<=0&&(this._randomBoxTime=a.RANDOM_BOX_MAX_TIME,this._userRandomBoxCount++)):this._randomBoxTime=a.RANDOM_BOX_MAX_TIME},minusRandomBoxAdsTime:function(){this._randomBoxAdsTime>0&&(this._randomBoxAdsTime-=1)},minusRandomBoxAccTime:function(){this._userRandomBoxAccCount<a.RANDOM_BOX_ACC_MAX_COUNT?(this._randomBoxAccTime-=1,this._randomBoxAccTime<=0&&(this._randomBoxAccTime=a.RANDOM_BOX_ACC_MAX_TIME,this._userRandomBoxAccCount++)):this._randomBoxAccTime=a.RANDOM_BOX_ACC_MAX_TIME},minusRandomBoxAccAdsTime:function(){this._randomBoxAccAdsTime>0&&(this._randomBoxAccAdsTime-=1)},minusContestTime:function(){this._contestTime>0&&(this._contestTime-=1)},chkContestCat:function(t){return this._contestCatUseTimeArr[t-a.RARE_CAT_MIN]<=0},setContestCat:function(t){this._contestCatUseTimeArr[t-a.RARE_CAT_MIN]=a.CONTEST_CAT_TIME},minusContestCatTime:function(){for(var t=0;t<a.RARE_CAT_NUMBER;t++)this._contestCatUseTimeArr[t]>0&&(this._contestCatUseTimeArr[t]-=1)},setFurnitureCurrency:function(t,e){this._userFurniture[t].setCurrency(e)},getFurnitureCurrency:function(t){return this._userFurniture[t].getCurrency()},setFurnitureTime:function(t,e){var i=this._userFurniture[e].getLv(),a=this._furnitureUpgradeTable[e][i].getProductionTime();this._furnitureTimeArr[t]=a},minusFurnitureTime:function(t,e){if(this._furnitureTimeArr[t]>0)this._furnitureTimeArr[t]-=1;else{var i=this._userFurniture[e].getLv(),a=this._furnitureUpgradeTable[e][i],s=a.getProductionTime(),n=a.getProductionCount(),r=a.getSaveMax(),c=this._userFurniture[e].getCurrency();(c+=n)>=r&&(c=r),this._userFurniture[e].setCurrency(c),this._furnitureTimeArr[t]=s}},getFurnitureUpgradeData:function(t,e){return this._furnitureUpgradeTable[t][e]},incDailyPlayTime:function(){this._dailyPlayTime++;var t=new Date(cc.sys.now());t.getDate()!=this._dailyRewardDate&&(this._dailyRewardDate=t.getDate(),this._dailyPlayTime=0,this._dailyRewardLv=0)},getDailyRewardLeftTime:function(){if(this._dailyRewardLv>=this._dailyAccessNum)return-1;var t=this._dailyAccessTable[this._dailyRewardLv].getTime()-this._dailyPlayTime;return t<0&&(t=0),t},getDailyReward:function(){if(this._dailyRewardLv>=this._dailyAccessNum)return[];var t=this._dailyAccessTable[this._dailyRewardLv],e=[],i={};return i.reward=t.getReward1(),i.count=t.getCount1(),e.push(i),t.getReward2()>-1&&((i={}).reward=t.getReward2(),i.count=t.getCount2(),e.push(i)),this.saveData(),this.saveTimeData(),e},addDailyRewardLv:function(){this._dailyRewardLv++,this._dailyPlayTime=0},getDailyRewardLv:function(){return this._dailyRewardLv},isDailyReward:function(){return this._dailyRewardLv<this._dailyAccessNum&&this._dailyAccessTable[this._dailyRewardLv].getTime()-this._dailyPlayTime<=0},chkMouseRewardInit:function(){var t=this._mouseRewardTime;0==t?(this._mouseRewardCount=0,this.setMouseRewardTime()):Math.floor(new Date(cc.sys.now()).getTime()/1e3)>=t&&(this._mouseRewardCount=0,this.setMouseRewardTime())},setMouseRewardCount:function(t){this._mouseRewardCount=t},getMouseRewardCount:function(){return this._mouseRewardCount},setMouseRewardTime:function(){var t=new Date(cc.sys.now());t.setHours(0),t.setMinutes(0),t.setSeconds(0),this._mouseRewardTime=Math.floor(t.getTime()/1e3)+86400},getAttendInfo:function(t){return this._attendInfoTable[t]},chkAttend:function(){var t=new Date(cc.sys.now());if(t.setHours(0),t.setMinutes(0),t.setSeconds(0),0==this._attendDate)return[0,1];var e=Math.floor(new Date(cc.sys.now()).getTime()/1e3);return e>=this._attendDate?(e<this._attendDate+86400&&this._attendCnt<7||(this._attendCnt=0),[this._attendCnt%7,1]):[this._attendCnt,0]},getAttendReward:function(t){var e=this._attendInfoTable[this._attendCnt%7],i=[];i.push(this.setRewardData(e[1],e[2]*t,!0)),e[3]>-1&&i.push(this.setRewardData(e[3],e[4]*t,!0));var a=new Date(cc.sys.now());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),this._attendCnt=this._attendCnt+1,this._attendCnt>=8&&(this._attendCnt=0),this._attendDate=Math.floor(a.getTime()/1e3)+86400,this.saveData(),i},setRewardData:function(t,e){switch(t){case a.PAYMENT_COIN:this.addCoin(e);break;case a.PAYMENT_RARE_COIN:this.addRareCoin(e);break;case a.PAYMENT_CASH_COIN:this.addCashCoin(e);break;case a.PAYMENT_CAT_TICKET:this.addCatTicket(e);break;case a.PAYMENT_ACC_TICKET:this.addAccTicket(e);break;case a.PAYMENT_TROPHY:this.addTrophy(e);break;case a.PAYMENT_CATEXP:break;default:cc.log("\uc5c6\ub294 \uc7ac\ud654\uc785\ub2c8\ub2e4")}this._playSceneMgr.viewAllCoin();var i={};return i.type=t,i.count=e,i},saveData:function(){var t={};this._userExitDate=new Date,t.userExitDate=this._userExitDate,t.userLv=this._userLv,t.userExp=this._userExp,t.userCoin=this._userCoin,t.userRareCoin=this._userRareCoin,t.userCashCoin=this._userCashCoin,t.userCareItem=this._userCareItem.getSaveObj(),t.userCatTicket=this._userCatTicket,t.userAccTicket=this._userAccTicket,t.userQuestResetTicket=this._userQuestResetTicket,t.userHealthTrophy=this._userHealthTrophy,t.userCharmTrophy=this._userCharmTrophy,t.userIntTrophy=this._userIntTrophy,t.userAttendDate=this._attendDate,t.userAttendCnt=this._attendCnt,t.userGenerableCount=this._userGenerableCount,t.userRandomBoxCount=this._userRandomBoxCount,t.userRandomBoxAccCount=this._userRandomBoxAccCount,t.mergeSlotGradeData=this._mergeSlotGradeData,t.unitLvData=this._unitLvData,t.nowMaxUnitGrade=this._nowMaxUnitGrade,t.nowMakeUnitGrade=this._nowMakeUnitGrade,t.catcollection=this._catcollection,t.pageIndex=this._pageIndex,t.userBuySlot=this._userBuySlot,t.userBuyTime=this._userBuyTime,t.userBuyCoinInc=this._userBuyCoinInc,t.userBuyBuffTime=this._userBuyBuffTime,t.userBuyCatLv2=this._userBuyCatLv2,t.userBuyMergeLv2=this._userBuyMergeLv2,t.userBuyOffline=this._userBuyOffline,t.userBuyMouseLvUp=this._userBuyMouseLvUp,t.userCatSlotNum=this._userCatSlotNum,t.userHotelSlotNum=this._userHotelSlotNum,t.userHouseSlotNum=this._userHouseSlotNum,t.buffTimer=this._topUIMgr.getadsTime(),t.userAccPK=this._userAccPK,t.myPostData=this._myPostData,t.myCouponData=this._myCouponData,t.myGalleryData=this._myGalleryData,t.tutoProcArr=this._tutoProcArr,t.contentProcArr=this._contentProcArr,t.shopLimitItemData=this._shopLimitItemData,t.userGuideKey=this._userGuideKey,t.userGuideCount=this._userGuideCount,t.userGuideCompleteArr=this._userGuideCompleteArr,t.dailyQuestLv=this._dailyQuestLv,t.dailyQuestList=this._dailyQuestList,t.dailyQuestRewardNum=this._dailyQuestRewardNum,t.dailyQuestRewardDate=this._dailyQuestRewardDate,t.questRefreshMaxTime=this._questRefreshMaxTime,t.questPoint=this._questPoint,t.questMaxPoint=this._questMaxPoint,t.mouseRewardCount=this._mouseRewardCount,t.mouseRewardTime=this._mouseRewardTime,t.userRareSlot=[];for(var e=0;e<a.PAGE_ONE_RARE_SLOT;e++)t.userRareSlot[e]=this._userRareSlot[e];t.userRareCat=[];for(e=11;e<=36;e++)t.userRareCat[e]=this._userRareCat[e].getSaveObj();t.userCatHouse=[];for(e=1;e<=7;e++)t.userCatHouse[e]=this._userCatHouse[e].getSaveObj();t.userFurniture=[],this._userFurniture.forEach(function(e){t.userFurniture.push(e.getSaveObj())}),t.userNeckAcc=[],this._userNeckAccessory.forEach(function(e){t.userNeckAcc.push(e.getSaveObj())}),t.userHatAcc=[],this._userHatAccessory.forEach(function(e){t.userHatAcc.push(e.getSaveObj())}),cc.sys.localStorage.setItem(a.APP_ID+".userData",JSON.stringify(t))},loadData:function(t){var e=this;t=JSON.parse(cc.sys.localStorage.getItem(a.APP_ID+".userData"));if(this.initData(),void 0==t);else{void 0==t.userExitDate&&(this._userExitDate=new Date),this._userExitDate=t.userExitDate,this._userLv=t.userLv,this._userExp=t.userExp,this._userCoin=t.userCoin,this._userRareCoin=t.userRareCoin,this._userCashCoin=t.userCashCoin;var i=new p;i.setSaveObj(t.userCareItem),this._userCareItem=i,this._userCatTicket=t.userCatTicket,this._userAccTicket=t.userAccTicket,void 0==t.userQuestResetTicket?this._userQuestResetTicket=0:this._userQuestResetTicket=t.userQuestResetTicket,this._userHealthTrophy=t.userHealthTrophy,this._userCharmTrophy=t.userCharmTrophy,this._userIntTrophy=t.userIntTrophy,this._attendDate=t.userAttendDate,void 0==t.userAttendCnt?this._attendCnt=0:this._attendCnt=t.userAttendCnt,this._userGenerableCount=t.userGenerableCount,this._userRandomBoxCount=t.userRandomBoxCount,void 0==t.userRandomBoxAccCount?this._userRandomBoxAccCount=1:this._userRandomBoxAccCount=t.userRandomBoxAccCount,this._mergeSlotGradeData=t.mergeSlotGradeData,this._unitLvData=t.unitLvData,this._nowMaxUnitGrade=t.nowMaxUnitGrade,this._nowMakeUnitGrade=t.nowMakeUnitGrade,this._catcollection=t.catcollection,this._pageIndex=t.pageIndex,this._userBuySlot=t.userBuySlot,this._userBuyTime=t.userBuyTime,this._userBuyCoinInc=t.userBuyCoinInc,this._userBuyBuffTime=t.userBuyBuffTime,void 0==t.userBuyCatLv2?this._userBuyCatLv2=0:this._userBuyCatLv2=t.userBuyCatLv2,void 0==t.userBuyMergeLv2?this._userBuyMergeLv2=0:this._userBuyMergeLv2=t.userBuyMergeLv2,void 0==t.userBuyOffline?this._userBuyOffline=0:this._userBuyOffline=t.userBuyOffline,void 0==t.userBuyMouseLvUp?this._userBuyMouseLvUp=0:this._userBuyMouseLvUp=t.userBuyMouseLvUp,void 0==t.userGuideKey?this._userGuideKey=-1:this._userGuideKey=t.userGuideKey,void 0==t.userGuideCount?this._userGuideCount=0:this._userGuideCount=t.userGuideCount,void 0==t.userGuideCompleteArr?this._userGuideCompleteArr=[]:this._userGuideCompleteArr=t.userGuideCompleteArr,void 0==t.dailyQuestLv?this._dailyQuestLv=null:this._dailyQuestLv=t.dailyQuestLv,void 0==t.dailyQuestList?this._dailyQuestList=null:this._dailyQuestList=t.dailyQuestList,void 0==t.dailyQuestRewardNum?this._dailyQuestRewardNum=0:this._dailyQuestRewardNum=t.dailyQuestRewardNum,void 0==t.dailyQuestRewardDate?this._dailyQuestRewardDate=0:this._dailyQuestRewardDate=t.dailyQuestRewardDate,void 0==t.questRefreshMaxTime?this._questRefreshMaxTime=0:this._questRefreshMaxTime=t.questRefreshMaxTime,void 0==t.questPoint?this._questPoint=0:this._questPoint=t.questPoint,void 0==t.questMaxPoint?this._questMaxPoint=0:this._questMaxPoint=t.questMaxPoint,void 0==t.mouseRewardCount?this._mouseRewardCount=0:this._mouseRewardCount=t.mouseRewardCount,void 0==t.mouseRewardTime?this._mouseRewardTime=0:this._mouseRewardTime=t.mouseRewardTime,this._userCatSlotNum=t.userCatSlotNum,this._userHotelSlotNum=t.userHotelSlotNum,this._userHouseSlotNum=t.userHouseSlotNum,this._userCatBuffTime=t.buffTimer,this._userAccPK=t.userAccPK,this._myPostData=t.myPostData,this._myCouponData=t.myCouponData,this._myGalleryData=t.myGalleryData;for(var s=0;s<a.PAGE_ONE_RARE_SLOT;s++)this._userRareSlot[s]=t.userRareSlot[s];void 0==t.tutoProcArr?(this._tutoProcArr=[],this._tutoProcArr[r.TUTO_TYPE_FIRST]=-1,this._tutoProcArr[r.TUTO_TYPE_TOUCH_CAT_BUTTON]=-1,this._tutoProcArr[r.TUTO_TYPE_SHOP]=-1,this._tutoProcArr[r.TUTO_TYPE_GALLERY]=-1,this._tutoProcArr[r.TUTO_TYPE_RANDOMBOX]=-1,this._tutoProcArr[r.TUTO_TYPE_RARE_CAT_FIRST]=-1,this._tutoProcArr[r.TUTO_TYPE_CONTEST]=-1,this._tutoProcArr[r.TUTO_TYPE_QUEST]=-1):this._tutoProcArr=t.tutoProcArr,void 0==t.contentProcArr?this._contentProcArr=[]:this._contentProcArr=t.contentProcArr,void 0==t.shopLimitItemData?this._shopLimitItemData=[]:this._shopLimitItemData=t.shopLimitItemData,this._rareCatMgr=n.instance;for(s=a.RARE_CAT_MIN;s<=a.UNIT_GRADEUP_MAX;s++){var c=new u;c.setSaveObj(t.userRareCat[s]);var o=this._rareCatMgr.getRareCatDataGrade(s),h=o.getStatHealth(),g=o.getStatCharm(),S=o.getStatInt(),T=o.getMainStat(),A=o.getLvUpStatMain(),C=o.getLvUpStatSub();c.initStat(h,g,S,T,A,C),this._userRareCat[s]=c}for(s=1;s<=7;s++){var f=new l;f.setSaveObj(t.userCatHouse[s]),this._userCatHouse[s]=f}if(void 0==t.userFurniture){this._userFurniture=new Array;for(s=0;s<this._furnitureInfoTable.length;s++){var m=new d;m.initData(s),this._userFurniture.push(m)}}else this._userFurniture=new Array,t.userFurniture.forEach(function(t){var i=new d;i.setSaveObj(t),e._userFurniture.push(i)});void 0==t.userNeckAcc||null==t.userNeckAcc?this._userNeckAccessory=new Array:t.userNeckAcc.forEach(function(t){var i=new _;i.setSaveObj(t),e._userNeckAccessory.push(i)}),void 0==t.userHatAcc||null==t.userHatAcc?this._userHatAccessory=new Array:t.userHatAcc.forEach(function(t){var i=new _;i.setSaveObj(t),e._userHatAccessory.push(i)})}this.loadTimeData(),this.loadOption()},getTopUIMgr:function(){return this._topUIMgr},setRareCat:function(t,e){this._userRareCat[t]._slotIdx=e,this._userRareCat[t]._collect=1},setRareCatNeckAcc:function(t,e){this._userRareCat[t].setAccNeckPK(e)},setRareCatHatAcc:function(t,e){this._userRareCat[t].setAccHatPK(e)},getRareCatData:function(t){return this._userRareCat[t]},getRareCatSlotNum:function(){},getCatSlotInfo:function(){return this._slotInfoCat},getHotelSlotInfo:function(){return this._slotInfoHotel},getHouseSlotInfo:function(){return this._slotInfoHouse},setUserCatSlotNum:function(t){this._userCatSlotNum=t},getUserCatSlotNum:function(){return this._userCatSlotNum},setUserHotelSlotNum:function(t){this._userHotelSlotNum=t},getUserHotelSlotNum:function(){return this._userHotelSlotNum},setUserHouseSlotNum:function(t){this._userHouseSlotNum=t},getUserHouseSlotNum:function(){return this._userHouseSlotNum},getCatHouseData:function(t){return this._catHouseTable[t]},setUserCatHouseData:function(t,e){this._userCatHouse[t]._slotIdx=e,this._userCatHouse[t]._collect=1},getUserCatHouseData:function(t){return this._userCatHouse[t]},getHouseCollectBool:function(t){return 1==this._userCatHouse[t].getCollect()},getFurnitureData:function(t){return this._furnitureInfoTable[t]},getUserFurnitureData:function(t){return this._userFurniture[t]},getGenerableMax:function(){return a.ADD_CAT_COUNT_DEFAULT_NUM+this._userBuySlot},getGenerableCount:function(){return this._userGenerableCount},addGenerableCount:function(){return this._userGenerableCount+=1,!(this._userGenerableCount>=this.getGenerableMax())||(this._userGenerableCount=this.getGenerableMax(),!1)},minusGenerableCount:function(){return this._userGenerableCount>0&&(this._userGenerableCount-=1,!0)},getUserLv:function(){return this._userLv},addUserExp:function(t){this._userExp+=t,this._userExp>a.MAX_USER_EXP&&(this._userExp=a.MAX_USER_EXP),this.chkLvup(),this._topUIMgr.updateLvExp(this._userLv,this.getExpPer())},getExpPer:function(){return this._userLv>=a.MAX_USER_LV?0:(this._userExp-this._userExpTable[this._userLv-1])/(this._userExpTable[this._userLv]-this._userExpTable[this._userLv-1])},chkLvup:function(){for(;this._userExp>=this._userExpTable[this._userLv]&&this._userLv<a.MAX_USER_LV;){++this._userLv;var t=this.getLvReward(this._userLv-1),e={};e.coin=t.coin,e.cash=t.cash,e.lv=this._userLv,cc.log("Reward Coin : "+e.coin),cc.log("Reward Cash : "+e.cash),s.instance.schedulePopup(s.POPUP_LVUP,e,.8),this.addCoin(e.coin),this.addCashCoin(e.cash)}},addRareCatExp:function(t,e){var i=this._userRareCat[t].getExp();(i+=e)>a.MAX_RARE_CAT_EXP&&(i=a.MAX_RARE_CAT_EXP),this._userRareCat[t].setExp(i);var s=this.chkRareCatLvup(t,i);return i<this._rareCatExpTable[s-1]&&(i=this._rareCatExpTable[s-1],this._userRareCat[t].setExp(i)),s>=a.MAX_RARE_CAT_LV?0:(i-this._rareCatExpTable[s-1])/(this._rareCatExpTable[s]-this._rareCatExpTable[s-1])},chkRareCatLvup:function(t,e){for(var i=i=this._userRareCat[t].getFriendshipLv();e>=this._rareCatExpTable[i]&&i<a.MAX_RARE_CAT_LV;)i++,this._userRareCat[t].setFriendshipLv(i);return i},chkRareCatCareBool:function(){for(var t=a.RARE_CAT_MIN;t<a.TOTAL_CAT_NUMBER;t++){var e=this._userRareCat[t].getSlotIdx(),i=this._userRareCat[t].getCatState();if(-1!=e&&i!=a.CARE_NORMAL)return!0}return!1},setCareItemCount:function(t,e){this._userCareItem.setItemCount(t,e)},getCareItemCount:function(t){return this._userCareItem.getItemCount(t)},getCareItemData:function(t){return this._careTabel[t]},getCareItemDataToIdx:function(t){for(var e=0;e<this._careTabel.length;e++){var i=this._careTabel[e];if(i.getIdx()==t)return i}},getCurrency:function(t){switch(t){case a.PAYMENT_COIN:return this._userCoin;case a.PAYMENT_RARE_COIN:return this._userRareCoin;case a.PAYMENT_CASH_COIN:return this._userCashCoin}},minusCurrency:function(t,e){switch(t){case a.PAYMENT_COIN:this.minusCoin(e),this._playSceneMgr.viewCoin();break;case a.PAYMENT_RARE_COIN:this.minusRareCoin(e),this._playSceneMgr.viewRareCoin();break;case a.PAYMENT_CASH_COIN:this.minusCashCoin(e),this._playSceneMgr.viewCashCoin()}},getCoin:function(){return this._userCoin},addCoin:function(t){this._userCoin+=parseInt(t)},minusCoin:function(t){this._userCoin-=parseInt(t)},getRareCoin:function(){return this._userRareCoin},addRareCoin:function(t){this._userRareCoin+=parseInt(t)},minusRareCoin:function(t){this._userRareCoin-=parseInt(t)},getCashCoin:function(){return this._userCashCoin},addCashCoin:function(t){this._userCashCoin+=parseInt(t)},minusCashCoin:function(t){this._userCashCoin-=parseInt(t)},getTrophy:function(){switch(this._playSceneMgr.getContestKind()){case 0:return this._userHealthTrophy;case 1:return this._userCharmTrophy;case 2:return this._userIntTrophy}},addTrophy:function(t){switch(this._playSceneMgr.getContestKind()){case 0:this._userHealthTrophy+=t;break;case 1:this._userCharmTrophy+=t;break;case 2:this._userIntTrophy+=t}},getContestLvData:function(t){return this._contestLvTabel[t]},getContestScoreData:function(t){return this._contestScoreTable[t]},getContestRewardTable:function(){return this._contestRewardTable},getContestReward:function(t,e){for(var i=[],a=0;a<4;++a)if(t.getRewardType(a)>=0){var s=this.setRewardData(t.getRewardType(a),t.getRewardValue(a,e));i.push(s)}return i},getUserBuySlot:function(){return this._userBuySlot},addUserBuySlot:function(){this._userBuySlot+=1},getUserBuyTime:function(){return this._userBuyTime},addUserBuyTime:function(){this._userBuyTime+=1},getUserBuyCoinInc:function(){return this._userBuyCoinInc},addUserBuyCoinInc:function(){this._userBuyCoinInc+=1},getUserBuyBuffInc:function(){return this._userBuyBuffTime},addUserBuyBuffInc:function(){this._userBuyBuffTime+=1},getUserBuyCatLv2:function(){return this._userBuyCatLv2},addUserBuyCatLv2:function(){this._userBuyCatLv2+=1},getUserBuyMergeLv2:function(){return this._userBuyMergeLv2},addUserBuyMergeLv2:function(){this._userBuyMergeLv2+=1},getUserBuyOffline:function(){return this._userBuyOffline},addUserBuyOffline:function(){this._userBuyOffline+=1},getUserBuyMouseLvUp:function(){return this._userBuyMouseLvUp},addUserBuyMouseLvUp:function(){this._userBuyMouseLvUp+=1},getPageIndex:function(){return this._pageIndex},setPageIndex:function(t){this._pageIndex=t},getLvReward:function(t){return cc.log(this._userLvRewardTable[t]),this._userLvRewardTable[t]},getNewCatBool:function(t){return this._catcollection[t]},setNewCatBool:function(t){this._catcollection[t]=!0},getRareCatCount:function(){for(var t=0,e=a.RARE_CAT_MIN;e<a.TOTAL_CAT_NUMBER;e++)1==this._catcollection[e]&&t++;return t},getNewCatReward:function(t){return this._newCatRewardTable[t]},getActiveMergeSlotNum:function(){return 12},getEmptyMergeSlot:function(){for(var t=this.getActiveMergeSlotNum(),e=0;e<t;++e)if(0==this._mergeSlotGradeData[e])return e;return-1},getMergeSlotGradeData:function(t){return this._mergeSlotGradeData[t]},getRareSlotNum:function(t){return this._userRareSlot[t]},setRareSlotNum:function(t,e,i){this.setRareSlotHouse(t,e),this.setRareSlotCat(t,i)},setRareSlotHouse:function(t,e){this._userRareSlot[t].houseIndex=e,this.setUserCatHouseData(e,t)},setRareSlotCat:function(t,e){this._userRareSlot[t].catGrade=e,e>10&&this.setRareCat(e,t)},getEnabledSlot:function(){for(var t=0;t<a.PAGE_ONE_RARE_SLOT;t++)if(1==this._userCatHouse[t+1].getCollect()&&this._userRareSlot[t].catGrade<11)return[t,this._userRareSlot[t]];return[null,null]},getEnableSlotNum:function(){for(var t=0,e=0;e<a.PAGE_ONE_RARE_SLOT;e++)this._userRareSlot[e].houseIndex>1&&this._userRareSlot[e].catGrade>10&&t++;return t},getFirstCatGrade:function(){for(var t=0;t<a.PAGE_ONE_RARE_SLOT;t++)if(this._userRareSlot[t].catGrade>10)return this._userRareSlot[t].catGrade;return null},getNextCat:function(t,e){var i=this._userRareCat[t],s=parseInt(i.getSlotIdx());if(1==e){for(var n=s+1;n<a.PAGE_ONE_RARE_SLOT;n++)if(this._userRareSlot[n].catGrade>10)return this._playSceneMgr.setSelectedSlot(n),this._userRareSlot[n].catGrade;for(n=0;n<s;n++)if(this._userRareSlot[n].catGrade>10)return this._playSceneMgr.setSelectedSlot(n),this._userRareSlot[n].catGrade;return t}for(n=s-1;n>=0;n--)if(this._userRareSlot[n].catGrade>10)return this._playSceneMgr.setSelectedSlot(n),this._userRareSlot[n].catGrade;for(n=a.PAGE_ONE_RARE_SLOT-1;n>s;n--)if(this._userRareSlot[n].catGrade>10)return this._playSceneMgr.setSelectedSlot(n),this._userRareSlot[n].catGrade;return t},getShopPassiveInfoTable:function(t){return this._shopPassiveInfoTable[t-1]},getNormalCatUpgradeTable:function(t){return this._normalCatUpgradeTable[t]},setMergeSlotGradeData:function(t,e){this._nowMaxUnitGrade<e&&(this._nowMaxUnitGrade=e),this._mergeSlotGradeData[t]=e},isMergeSlotUnitDrag:function(t){return this._mergeSlotGradeData[t]>0},getShopUnitBuyData:function(t){return t<=1?[a.PAYMENT_GOLD,-1]:t<=this._nowMaxUnitGrade-5?[a.PAYMENT_GOLD,-1]:t==this._nowMaxUnitGrade-4?[a.PAYMENT_GEM,a.BUY_GEM_HERO1*t]:t==this._nowMaxUnitGrade-3?[a.PAYMENT_GEM,a.BUY_GEM_HERO2*t]:[a.PAYMENT_NONE,t+5]},getNowMaxUnitGrade:function(){return this._nowMaxUnitGrade},setNowMaxUnitGrade:function(t){this._nowMaxUnitGrade=t},getNowMakeUnitGrade:function(){return this._nowMakeUnitGrade},setNowMakeUnitGrade:function(t){this._nowMakeUnitGrade=t},setNowMakeUnitGradeToMax:function(){for(var t=this._nowMaxUnitGrade;t>=1;t--)if(this.getShopUnitBuyData(t)[0]==a.PAYMENT_GOLD){this._nowMakeUnitGrade=t;break}},getUnitLv:function(t){return this._unitLvData[t-1]},incUnitLv:function(t){this._unitLvData[t-1]+=1},getUserCoin:function(){return this._userCoin},getUserCatBuffTime:function(){return this._userCatBuffTime},getRewardTime:function(){return this._rewardTime},setRewardTime:function(t){this._rewardTime=t},getMouseRewardTable:function(){return this._mouseRewardTable},getBoxRewardTable:function(){return this._boxRewardTable},setUserNeckAccData:function(t){this._userNeckAccessory.push(t)},setEquipUserNeckAccData:function(t,e){this._userNeckAccessory.forEach(function(i){i._PK==t&&i.setEquip(e)})},getUserNeckAccData:function(t){var e=null;return this._userNeckAccessory.forEach(function(i){i._PK==t&&(e=i)}),e},getUserNeckAccDataTable:function(){return this._userNeckAccessory},setUserHatAccData:function(t){this._userHatAccessory.push(t)},setEquipUserHatAccData:function(t,e){this._userHatAccessory.forEach(function(i){i._PK==t&&i.setEquip(e)})},getUserHatAccData:function(t){var e=null;return this._userHatAccessory.forEach(function(i){i._PK==t&&(e=i)}),e},getUserHatAccDataTable:function(){return this._userHatAccessory},getAccCollectBool:function(t){var e=!1;return this._userHatAccessory.forEach(function(i){i.getIdx()==t&&(e=!0)}),this._userNeckAccessory.forEach(function(i){i.getIdx()==t&&(e=!0)}),e},deleteAcc:function(t){var e=this;this._userHatAccessory.forEach(function(i){if(i.getPK()==t){var a=e._userHatAccessory.indexOf(i);a>-1&&e._userHatAccessory.splice(a,1)}}),this._userNeckAccessory.forEach(function(i){if(i.getPK()==t){var a=e._userNeckAccessory.indexOf(i);a>-1&&e._userNeckAccessory.splice(a,1)}})},addUserAccPK:function(){this._userAccPK++},getUserAccPK:function(){return this._userAccPK},getCatTicket:function(){return this._userCatTicket},addCatTicket:function(t){this._userCatTicket+=t},useCatTicket:function(){this._userCatTicket-=1},getAccTicket:function(){return this._userAccTicket},addAccTicket:function(t){this._userAccTicket+=t},useAccTicket:function(){this._userAccTicket-=1},getQuestResetTicket:function(){return this._userQuestResetTicket},addQuestResetTicket:function(t){this._userQuestResetTicket+=t},useQuestResetTicket:function(){this._userQuestResetTicket-=1},getUserRandomBoxCount:function(){return this._userRandomBoxCount},useRandomBoxCount:function(){this._userRandomBoxCount--},getRandomBoxTime:function(){return this._randomBoxTime},getRandomBoxAdsTime:function(){return this._randomBoxAdsTime},useRandomBoxAdsTime:function(){this._randomBoxAdsTime=a.RANDOM_BOX_ADS_MAX_TIME},getUserRandomBoxAccCount:function(){return this._userRandomBoxAccCount},useRandomBoxAccCount:function(){this._userRandomBoxAccCount--},getRandomBoxAccTime:function(){return this._randomBoxAccTime},getRandomBoxAccAdsTime:function(){return this._randomBoxAccAdsTime},useRandomBoxAccAdsTime:function(){this._randomBoxAccAdsTime=a.RANDOM_BOX_ACC_ADS_MAX_TIME},getContestTime:function(){return this._contestTime},useContestTime:function(){this._contestTime=a.CONTEST_MAX_TIME},updatePostInfo:function(){Math.floor(cc.sys.now()/1e3);for(var t=0;t<this._eventPostInfo.length;++t)"TUTORIAL"==this._eventPostInfo[t].getEventType()&&-1==this._tutoProcArr[this._eventPostInfo[t].getEventValue()]&&(this._postInfo.push(this._eventPostInfo[t]),this._eventPostInfo.splice(t,1),--t);for(t=0;t<this._postInfo.length;++t)for(var e=0;e<this._myPostData.length;++e)if(this._postInfo[t].getPostIdx()==this._myPostData[e]){this._postInfo.splice(t,1),--t;break}},getPostCnt:function(){return this._postInfo.length},getPostInfo:function(t){return this._postInfo[t]},saveGetPostData:function(t){this._myPostData.push(t),this.saveData()},isValidCoupon:function(t,e){for(var i=t.toUpperCase(),a=0;a<this._couponInfo.length;++a)if(this._couponInfo[a].getCouponCode()==i){if(this.isUsedCouponCode(this._couponInfo[a].getCouponIdx())){var s=c.getString(9006);return this._playSceneMgr.showAlarm(s,!1,0,this._playSceneMgr.OVERLAY),void e()}var n=Math.floor(cc.sys.now()/1e3);if(this._couponInfo[a].isValidDate(n))this.getCouponReward(this._couponInfo[a]);else{s=c.getString(9005);this._playSceneMgr.showAlarm(s,!1,0,this._playSceneMgr.OVERLAY)}return void e()}s=c.getString(9007);this._playSceneMgr.showAlarm(s,!1,0,this._playSceneMgr.OVERLAY),e()},isUsedCouponCode:function(t){for(var e=0;e<this._myCouponData.length;++e)if(this._myCouponData[e]==t)return!0;return!1},getCouponReward:function(t){for(var e=[],i=0;i<6;++i)if(t.getRewardType(i)>=0){var a=this.setRewardData(t.getRewardType(i),t.getRewardValue(i));e.push(a)}s.instance.showPopup(s.POPUP_REWARD,e),this.saveGetCouponData(t.getCouponIdx())},saveGetCouponData:function(t){this._myCouponData.push(t),this.saveData()},getGalleryCatTabel:function(t){return this._galleryCatTabel[t]},getGalleryAccTabel:function(t){return this._galleryAccTabel[t]},getGalleryHouseTabel:function(t){return this._galleryHouseTabel[t]},saveGetGalleryData:function(t){this._myGalleryData.push(t),this.saveData()},isGotGalleryIdx:function(t){for(var e=0;e<this._myGalleryData.length;++e)if(this._myGalleryData[e]==t)return!0;return!1},getGallerySuccseeCount:function(){return this._myGalleryData.length},setContentOpen:function(t){this._contentProcArr[t]=!0},chkContentOpen:function(t){return 1==this._contentProcArr[t]},getContentTableLength:function(){return this._contentOpenTable.length},getContentData:function(t){return this._contentOpenTable[t]},getTutoProc:function(t){return this._tutoProcArr[t]},setTutoProc:function(t,e){this._tutoProcArr[t]=e},chkTutoBan:function(){(this._userCash>=999999||this._userGHeart>=999999)&&(this._banFlag=!0,this.saveData(),cc.director.loadScene("ErrorScene"))},getPaymentName:function(t){switch(t){case a.PAYMENT_COIN:return c.getString(701);case a.PAYMENT_RARE_COIN:return c.getString(702);case a.PAYMENT_CASH_COIN:return c.getString(703);case a.PAYMENT_CAT_TICKET:return c.getString(704);case a.PAYMENT_ACC_TICKET:return c.getString(705);case a.PAYMENT_TROPHY:return c.getString(706);case a.PAYMENT_CAT_FEED:return c.getString(601);case a.PAYMENT_CAT_SHAMPOO:return c.getString(602);case a.PAYMENT_CAT_TONIC:return c.getString(603);case a.PAYMENT_TOY_FISHING:return c.getString(604);case a.PAYMENT_FISH_STEAK:return c.getString(605);case a.PAYMENT_BUBBLE_BATH:return c.getString(606);case a.PAYMENT_MEDICAL_TESTING:return c.getString(607);case a.PAYMENT_MAZE_HUNT:return c.getString(608)}},getPaymentType:function(t){switch(t){case"Coin":return a.PAYMENT_COIN;case"Rare":return a.PAYMENT_RARE_COIN;case"Cash":return a.PAYMENT_CASH_COIN;case"Cat_Ticket":return a.PAYMENT_CAT_TICKET;case"Acc_Ticket":return a.PAYMENT_ACC_TICKET;case"Trophy":return a.PAYMENT_TROPHY;case"Cat_Exp":return a.PAYMENT_CATEXP;case"CAT":return a.PAYMENT_CAT;case"Cat_Feed":return a.PAYMENT_CAT_FEED;case"Cat_Shampoo":return a.PAYMENT_CAT_SHAMPOO;case"Cat_Tonic":return a.PAYMENT_CAT_TONIC;case"Toy_Fishing":return a.PAYMENT_TOY_FISHING;case"Fish_Steak":return a.PAYMENT_FISH_STEAK;case"Bubble_Bath":return a.PAYMENT_BUBBLE_BATH;case"Medical_Testing":return a.PAYMENT_MEDICAL_TESTING;case"Maze_Hunt":return a.PAYMENT_MAZE_HUNT}return-1},getGalleyType:function(t){switch(t){case"Normal_Cat_01":return a.GALLERY_NORMAL_CAT_1;case"Normal_Cat_02":return a.GALLERY_NORMAL_CAT_2;case"Normal_Cat_03":return a.GALLERY_NORMAL_CAT_3;case"Rare_Cat_01":return a.GALLERY_RARE_CAT_1;case"Rare_Cat_02":return a.GALLERY_RARE_CAT_2;case"Rare_Cat_03":return a.GALLERY_RARE_CAT_3;case"Rare_Cat_04":return a.GALLERY_RARE_CAT_4;case"Rare_Cat_05":return a.GALLERY_RARE_CAT_5;case"Rare_Cat_06":return a.GALLERY_RARE_CAT_6;case"Rare_Cat_07":return a.GALLERY_RARE_CAT_7;case"Acc_01":return a.GALLERY_ACC_1;case"Acc_02":return a.GALLERY_ACC_2;case"Acc_03":return a.GALLERY_ACC_3;case"Acc_04":return a.GALLERY_ACC_4;case"Acc_05":return a.GALLERY_ACC_5;case"Acc_06":return a.GALLERY_ACC_6;case"Acc_07":return a.GALLERY_ACC_7;case"Acc_08":return a.GALLERY_ACC_8;case"Acc_09":return a.GALLERY_ACC_9;case"Acc_10":return a.GALLERY_ACC_10;case"Acc_11":return a.GALLERY_ACC_11;case"Acc_12":return a.GALLERY_ACC_12;case"Acc_13":return a.GALLERY_ACC_13;case"House_01":return a.GALLERY_HOUSE_1;case"Furniture_01":return a.GALLERY_FURNITURE_1}return-1},getCareType:function(t){switch(t){case"Hungry":return a.CARE_HUNGRY;case"Dirty":return a.CARE_DIRTY;case"Sick":return a.CARE_SICK;case"Bored":return a.CARE_BORED}},getContentCode:function(t){switch(t){case"Pet_Shop":return a.CONTENT_PET_SHOP;case"Gallery":return a.CONTNET_GALLERY;case"Gacha":return a.CONTENT_GACHA;case"Contest":return a.CONTENT_CONTEST;case"Quest":return a.CONTENT_QUEST}},getContentType:function(t){switch(t){case"Cat_Grade":return a.CONTENT_OPEN_TYPE_CATGRADE;case"Rare_Cat_Count":return a.CONTENT_OPEN_TYPE_RARE_CAT_COUNT;case"Guide_Finsh":return a.CONTENT_OPEN_TYPE_GUIDE_FINSH}},getGuideType:function(t){switch(t){case"GUIDE_NORMAL_CAT_MARGE":return a.GUIDE_NORMAL_CAT_MARGE;case"GUIDE_NORMAL_CAT_4LV_MADE":return a.GUIDE_NORMAL_CAT_4LV_MADE;case"GUIDE_NORMAL_CAT_6LV_MADE":return a.GUIDE_NORMAL_CAT_6LV_MADE;case"GUIDE_NORMAL_CAT_8LV_MADE":return a.GUIDE_NORMAL_CAT_8LV_MADE;case"GUIDE_NORMAL_CAT_10LV_MADE":return a.GUIDE_NORMAL_CAT_10LV_MADE;case"GUIDE_MOUSE_CATCH":return a.GUIDE_MOUSE_CATCH;case"GUIDE_PLAYTIME_REWARD":return a.GUIDE_PLAYTIME_REWARD;case"GUIDE_PRODUCTION":return a.GUIDE_PRODUCTION;case"GUIDE_GALLERY":return a.GUIDE_GALLERY;case"GUIDE_RARE_CAT_MADE":return a.GUIDE_RARE_CAT_MADE;case"GUIDE_PETSHOP_NORMAL_CAT_BUY":return a.GUIDE_PETSHOP_NORMAL_CAT_BUY;case"GUIDE_BUFF_GET":return a.GUIDE_BUFF_GET;case"GUIDE_PETSHOP_CAT_PRODUCTION_UP":return a.GUIDE_PETSHOP_CAT_PRODUCTION_UP;case"GUIDE_PETSHOP_CAT_PRODUCTION_TIME":return a.GUIDE_PETSHOP_CAT_PRODUCTION_TIME;case"GUIDE_RANDOMBOX_NORMAL_CAT":return a.GUIDE_RANDOMBOX_NORMAL_CAT;case"GUIDE_RAMDOMBOX_ACC_GET":return a.GUIDE_RAMDOMBOX_ACC_GET;case"GUIDE_GOODSHOP_FEED_BUY":return a.GUIDE_GOODSHOP_FEED_BUY;case"GUIDE_RARE_CAT_DEBUFF_CARE":return a.GUIDE_RARE_CAT_DEBUFF_CARE;case"GUIDE_RARE_CAT_ACC_MOUNT":return a.GUIDE_RARE_CAT_ACC_MOUNT;case"GUIDE_CAT_CONTEST_JOIN":return a.GUIDE_CAT_CONTEST_JOIN}},getPostTutoValue:function(t){switch(t){case"TUTO_TYPE_FIRST":return r.TUTO_TYPE_FIRST;case"TUTO_TYPE_TOUCH_CAT_BUTTON":return r.TUTO_TYPE_TOUCH_CAT_BUTTON;case"TUTO_TYPE_SHOP":return r.TUTO_TYPE_SHOP;case"TUTO_TYPE_GALLERY":return r.TUTO_TYPE_GALLERY;case"TUTO_TYPE_RANDOMBOX":return r.TUTO_TYPE_RANDOMBOX;case"TUTO_TYPE_RARE_CAT_FIRST":return r.TUTO_TYPE_RARE_CAT_FIRST;case"TUTO_TYPE_CONTEST":return r.TUTO_TYPE_CONTEST;case"TUTO_TYPE_QUEST":return r.TUTO_TYPE_QUEST}},getQuestType:function(t){switch(t){case"GUIDE_PRODUCTION":return a.QUEST_PRODUCTION;case"GUIDE_NORMAL_CAT_MARGE":return a.QUEST_NORMAL_CAT_MERGE;case"GUIDE_MOUSE_CATCH":return a.QUEST_MOUSE_CATCH;case"GUIDE_BUFF_GET":return a.QUEST_BUFF_GET;case"GUIDE_RANDOMBOX_NORMAL_CAT":return a.QUEST_RANDOMBOX_NORMAL_CAT;case"GUIDE_PLAYTIME_REWARD":return a.QUEST_PLAYTIME_REWARD;case"GUIDE_RANDOMBOX_ACC_GET":return a.QUEST_RANDOMBOX_ACC_GET;case"GUIDE_CAT_CONTEST_JOIN":return a.QUEST_CAT_CONTEST_JOIN;case"GUIDE_RARE_CAT_DEBUFF_CARE":return a.QUEST_RARE_CAT_DEBUFF_CARE;case"GUIDE_RARE_CAT_FOOD_CARE":return a.QUEST_RARE_CAT_FOOD_CARE;case"GUIDE_RARE_CAT_DIRTY_CARE":return a.QUEST_RARE_CAT_DIRTY_CARE;case"GUIDE_RARE_CAT_SICK_CARE":return a.QUEST_RARE_CAT_SICK_CARE;case"GUIDE_RARE_CAT_DORED_CARE":return a.QUEST_RARE_CAT_DORED_CARE}},setUserLvDebug:function(t){this._userLv=t,this._userExp=this._userExpTable[this._userLv-1]},setAllRareCat:function(){this._rareCatMgr=n.instance;for(var t=a.RARE_CAT_MIN;t<=a.UNIT_GRADEUP_MAX;t++){var e=new u,i=this._rareCatMgr.getRareCatDataGrade(t),s=i.getStatHealth(),r=i.getStatCharm(),c=i.getStatInt(),o=i.getMainStat(),h=i.getLvUpStatMain(),l=i.getLvUpStatSub();e.init(1,-1,-1,-1,s,r,c,o,h,l),this._userRareCat[t]=e,this.setNewCatBool(t)}},setAllAcc:function(){this._accessoryMgr=h.instance;var t=h.instance.getAccDic();for(var e in t){var i,a=t[e],s=a.getAccType(),n=a.getAccGrade(),r=this._accessoryMgr.getOptionStat(n),c=this._accessoryMgr.getStatType(),o=parseInt(r.getOpMin()),u=parseInt(r.getOpMax());i=Math.floor(Math.random()*(u-o)+o);var l="",p=0;if("A"==n||"S"==n){var d=this._accessoryMgr.getOptionBuff(n),g=parseFloat(d.getOpMin()),S=parseFloat(d.getOpMax());p=Math.random()*(S-g)+g,"S"==n?(p=parseInt(p),l="Rare"):l="Coin"}var T=new _,A=this.getUserAccPK();switch(T.initUserAccData(a,A,c,i,l,p),s){case"neck":this.setUserNeckAccData(T);break;case"hat":this.setUserHatAccData(T)}this.addUserAccPK(),this.saveData()}},setAllCatHouse:function(){this._userCatHouse=new Array;for(var t=1;t<=7;t++){var e=new l;e.init(1,t-1),this._userCatHouse[t]=e}},setAllCareItem:function(){for(var t=0;t<this._careTabel.length;t++){var e=this._careTabel[t].getIdx();this._userCareItem.setItemCount(e,10)}},getCashShopData:function(t){return this._cashShopInfoTable[t]},getLimitProductData:function(){for(var t=0;t<this._cashShopInfoTable.length;t++){if(3==parseInt(this._cashShopInfoTable[t].getCate()))return this._cashShopInfoTable[t]}},getCashShopCount:function(){return this._cashShopInfoTable.length},getShopLimitItemData:function(t){var e=0;return void 0!=this._shopLimitItemData[t]&&(e=this._shopLimitItemData[t]),e},setShopLimitItemData:function(t,e){this._shopLimitItemData[t]=e},setUserGuideKey:function(t){this._userGuideKey=t},getUserGuideKey:function(){return this._userGuideKey},setUserGuideCount:function(t){this._userGuideCount=t},getUserGuideCount:function(){return this._userGuideCount},plusUserGuideCount:function(){var t=this.getGuideData(this._userGuideKey);return null!=t&&t.getGuideCount()>this._userGuideCount&&(this._userGuideCount+=1,this.saveData(),!0)},getGuideData:function(t){for(var e=0;e<this._guideInfoTable.length;e++)if(this._guideInfoTable[e].getGuideKey()==t)return this._guideInfoTable[e];return null},setNextGuideKey:function(){for(var t=0;t<this._guideInfoTable.length;t++)if(1!=this._userGuideCompleteArr[this._guideInfoTable[t].getGuideKey()])return this._userGuideKey=this._guideInfoTable[t].getGuideKey(),this.saveData(),!0;return this.chkOpenContent(),!1},setGuideComplete:function(t){this._userGuideCompleteArr[t]=!0},chkOpenContent:function(){for(var t=0;t<this.getContentTableLength();t++){if(!this.chkContentOpen(t))if(this.getContentData(t).getOpenType()==a.CONTENT_OPEN_TYPE_GUIDE_FINSH){this._playSceneMgr.setContentOpenIdx(t);break}}},chkQuestList:function(){null!=this._dailyQuestLv&&void 0!=this._dailyQuestLv||this.resetQuestLv(),void 0!=this._dailyQuestList&&null!=this._dailyQuestList?0==this._dailyQuestList.length&&this.getQuestList():this.getQuestList()},getQuestList:function(){this._dailyQuestList=[];for(var t=0;t<a.MAX_QUEST_NUM;++t){for(var e=Math.random(),i=null,s=0;s<this._questRate.length;++s)if(e<this._questRate[s]){i=this._questInfoTabel[s];break}var n=!1;for(s=0;s<this._dailyQuestList.length;++s)if(this._dailyQuestList[s][0]==i.getQuestType()){n=!0;break}if(n)--t;else{var r=i.getQuestCount()*(this._dailyQuestLv[i.getQuestType()]+1),c=i.getRewardCount();this._dailyQuestList[t]=[i.getQuestType(),0,r,i.getRewardType(),c,!1]}}this.saveData()},getQuestLv:function(t){return this._dailyQuestLv[t]},resetQuestLv:function(){this._dailyQuestLv=[];for(var t=0;t<this._questInfoTabel.length;++t)this._dailyQuestLv[t]=0;this.saveData()},getDailyQuestData:function(t){return this._dailyQuestList[t]},getQuestData:function(t){return this._questInfoTabel[t]},getQuestIcon:function(t){return this._atlasIcon.getSpriteFrame("quest_icon_"+t)},incQuestCount:function(t,e){for(var i=0;i<this._dailyQuestList.length;++i)if(this._dailyQuestList[i][0]==t&&this._dailyQuestList[i][1]<this._dailyQuestList[i][2]){this._dailyQuestList[i][1]+=e,this._dailyQuestList[i][1]>=this._dailyQuestList[i][2]&&(this._dailyQuestList[i][1]=this._dailyQuestList[i][2],this._topUIMgr.updateQuestNewMark()),s.instance.updateQuestAchivement(),this.saveData();break}},chkClearQuest:function(){if(this._dailyQuestList){if(this._dailyQuestRewardNum>=a.MAX_QUEST_REWARD)return!1;for(var t=0;t<this._dailyQuestList.length;++t)if(this._dailyQuestList[t][1]>=this._dailyQuestList[t][2]&&0==this._dailyQuestList[t][5])return!0}return!1},chkDailyQuestRewardReset:function(){var t=new Date,e=new Date(1e3*this._dailyQuestRewardDate);return t>e&&(this._dailyQuestRewardNum=0,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this._dailyQuestRewardDate=Math.floor(e.getTime()/1e3)+86400,this.resetQuestLv(),this.getQuestList(),this.saveData(),!0)},resetQuestCount:function(){this._dailyQuestRewardNum=0,this.saveData()},resetQuestAll:function(){this._dailyQuestRewardNum=0,this._dailyQuestRewardDate=0,this._questRefreshMaxTime=0,this.resetQuestLv(),this.getQuestList()},getDailyQuestRewardNum:function(){return this._dailyQuestRewardNum},incDailyQuestRewardNum:function(t){this._dailyQuestLv[t]++,this._dailyQuestRewardNum++},incQuestPoint:function(t){this._questPoint+=t,this._questMaxPoint+=t},getQuestPoint:function(){return this._questPoint},getQuestMaxPoint:function(){return this._questMaxPoint},getQuestRefreshMaxTime:function(){return this._questRefreshMaxTime},resetQuestRefreshMaxTime:function(){this._questRefreshMaxTime=Math.floor(cc.sys.now()/1e3)+a.QUEST_FREE_REFRESH_TIME},minusQuestAdsTime:function(){this._adsQuestTime>0&&--this._adsQuestTime},getAdsQuestTime:function(){return this._adsQuestTime},resetAdsQuestTime:function(){this._adsQuestTime=a.ADS_QUEST_REFRESH_TIME},getQuestRefreshTimeStr:function(t){var e=this._questRefreshMaxTime-t,i=Math.floor(e/60)%60,a=Math.floor(e/3600);return(e%=60)<10&&(e="0"+e),i<10&&(i="0"+i),"0"+a+":"+i+":"+e}},cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",AccessoryUserData:"AccessoryUserData",CareItemUserData:"CareItemUserData",CatHouseUserData:"CatHouseUserData",ContentOpenData:"ContentOpenData",FurnitureData:"FurnitureData",FurnitureUserData:"FurnitureUserData",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",RareCatUserData:"RareCatUserData",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr",UnitMgr:"UnitMgr"}],DataTable:[function(t,e,i){"use strict";var a;cc._RF.push(e,"70686Kor7pE94F4SrRLsnVk","DataTable");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t("Global");cc.Class((n(a={extends:cc.Component,properties:{_table:null},ctor:function(){this._table=null},setTable:function(t){if(null==t||void 0==t||0==t.length)return-1;for(var e=[],i=[],a=0;a<t.length;a++){e=t[a];var s=0;if(0==a)for(var n in e)i[s]=n,s++;for(var n in e){if("number"!=typeof e[n]&&"string"!=typeof e[n]&&"boolean"!=typeof e[n])return-3;if(a>0){if(i[s]!=n)return-4;s++}}}return this._table=t,0},getRecordNum:function(){return null==this._table||void 0==this._table?0:this._table.length}},"getRecordNum",function(t,e){for(var i=0,a=0;a<this._table.length;a++)this._table[a][t]==e&&i++;return i}),n(a,"getRecordTable",function(t,e){for(var i=[],a=0;a<this._table.length;a++)this._table[a][t]==e&&i.push(this._table[a]);return i}),n(a,"getRecordColNum",function(t){return!(null==this._table||void 0==this._table||t<0||t>=this._table.length)&&this._table[t].length}),n(a,"getRecordKeys",function(){return null==this._table||void 0==this._table||0==this._table.length?0:Object.keys(this._table[0])}),n(a,"getRecordValue",function(t,e){return!(null==this._table||void 0==this._table||t<0||t>=this._table.length)&&this._table[t][e]}),n(a,"setRecordValue",function(t,e,i){return!(null==this._table||void 0==this._table||t<0||t>=this._table.length)&&(s(this._table[t][e])==(void 0===i?"undefined":s(i))&&(this._table[t][e]=i,!0))}),n(a,"getRecordValueWithKey",function(t,e,i){for(var a=0;a<this._table.length;a++)if(this._table[a][t]==e)return this._table[a][i];return null}),a)),cc._RF.pop()},{Global:"Global"}],DebugMgr:[function(t,e,i){"use strict";cc._RF.push(e,"f1faaylBgJOqqDmp+TouDOU","DebugMgr");var a=t("DataMgr"),s=t("Global"),n=t("TutoMgr");cc.Class({extends:cc.Component,properties:{lvLabel:cc.Label,unitMaxLabel:cc.Label,guideLabel:cc.Label,_userLv:1,_unitMaxGrade:1,_guideLv:0},start:function(){this._userLv=a.getUserLv(),this._unitMaxGrade=a.getNowMaxUnitGrade();for(var t=0,e=0;e<a._guideInfoTable.length;e++){var i=a._guideInfoTable[e].getGuideKey();1==a._userGuideCompleteArr[i]&&t++}this._guideLv=t,this.lvLabel.string="Lv. "+this._userLv,this.unitMaxLabel.string="\uc720\ub2db \ub9e5\uc2a4 \ub808\ubca8 : "+this._unitMaxGrade,this.guideLabel.string="\uac00\uc774\ub4dc \ub2e8\uacc4 \n"+this._guideLv},OnSaveHandler:function(){a.setUserLvDebug(this._userLv),a.setNowMaxUnitGrade(this._unitMaxGrade),this.setGuideData(),a.saveData(),cc.director.loadScene("IntroScene")},OnResetHandler:function(){this._userLv=1,this._unitMaxGrade=1,this._guideLv=0,this.lvLabel.string="Lv. "+this._userLv,this.unitMaxLabel.string="\uc720\ub2db \ub9e5\uc2a4 \ub808\ubca8 : "+this._unitMaxGrade,this.guideLabel.string="\uac00\uc774\ub4dc \ub2e8\uacc4 \n"+this._guideLv,s.UNIT_CREATE_GRADE=1,a.initData(),a.saveTimeData()},setGuideData:function(){a._userGuideKey=-1,a._userGuideCount=0,a._userGuideCompleteArr=new Array;for(var t=0;t<this._guideLv;t++){var e=a._guideInfoTable[t].getGuideKey();a._userGuideCompleteArr[e]=!0}},OnLvUpBtn:function(t,e){var i=e;this._userLv+=parseInt(i),this._userLv<1?this._userLv=1:this._userLv>s.MAX_USER_LV&&(this._userLv=s.MAX_USER_LV),this.lvLabel.string="Lv. "+this._userLv},OnUnitMaxLvBtn:function(t,e){var i=e;this._unitMaxGrade+=parseInt(i),this._unitMaxGrade<1&&(this._unitMaxGrade=1),this.unitMaxLabel.string="\uc720\ub2db \ub9e5\uc2a4 \ub808\ubca8 : "+this._unitMaxGrade},OnGuideLvBtn:function(t,e){var i=e;this._guideLv+=parseInt(i),this._guideLv<0?this._guideLv=0:this._guideLv>a._guideInfoTable.length&&(this._guideLv=a._guideInfoTable.length),this.guideLabel.string="\uac00\uc774\ub4dc \ub2e8\uacc4 \n"+this._guideLv},OnCoinUpBtn:function(){a.addCoin(1e17)},OnRareCoinUpBtn:function(){a.addRareCoin(1e5)},OnCashCoinUpBtn:function(){a.addCashCoin(1e5)},OnCatTicketUpBtn:function(){a.addCatTicket(100)},OnAccTicketUpBtn:function(){a.addAccTicket(100)},OnQuestResetTicketUpBtn:function(){a.addQuestResetTicket(5)},OnCatTransTenBtn:function(){s.UNIT_CREATE_GRADE=10},OnAllRareCatBtn:function(){a.setAllRareCat()},OnAllAccBtn:function(){a.setAllAcc()},OnAllCatHouseBtn:function(){a.setAllCatHouse()},OnAllItemBtn:function(){a.setAllCareItem()},OnContestInit:function(){a._contestTime=0,a.saveTimeData()},OnContestCatInit:function(){a._contestCatUseTimeArr=[];for(var t=0;t<s.RARE_CAT_NUMBER;t++)a._contestCatUseTimeArr[t]=0;a.saveTimeData()},OnGuideInit:function(){a._userGuideKey=-1,a._userGuideCount=0},OnTutoSkip:function(){a._tutoProcArr[n.TUTO_TYPE_FIRST]=-1,a._tutoProcArr[n.TUTO_TYPE_TOUCH_CAT_BUTTON]=-1,a._tutoProcArr[n.TUTO_TYPE_SHOP]=-1,a._tutoProcArr[n.TUTO_TYPE_GALLERY]=-1,a._tutoProcArr[n.TUTO_TYPE_RANDOMBOX]=-1,a._tutoProcArr[n.TUTO_TYPE_RARE_CAT_FIRST]=-1,a._tutoProcArr[n.TUTO_TYPE_CONTEST]=-1},OnDebugBtn:function(){cc.director.loadScene("IntroScene")}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",TutoMgr:"TutoMgr"}],ExpObj:[function(t,e,i){"use strict";cc._RF.push(e,"fbd0eNN5ZRIgJ37v9Tj1QU7","ExpObj"),cc.Class({extends:cc.Component,properties:{coinLabel:cc.Label,_offsetY:50,_playSceneMgr:null},playAni:function(t,e){this._playSceneMgr=e,this.node.y+=this._offsetY,this.node.active=!0,this.node.opacity=255,this.coinLabel.string=t,this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,30)).easing(cc.easeCircleActionOut()),cc.callFunc(this.hide,this))),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.fadeTo(.5,0),cc.callFunc(this.hide,this)))},hide:function(){this._playSceneMgr.pushExpObj(this.node),this.node.stopAllActions(),this.node.active=!1}}),cc._RF.pop()},{}],FeverTimeEffObj:[function(t,e,i){"use strict";cc._RF.push(e,"d318135Q1BEKp0TJ/odXKKr","FeverTimeEffObj"),cc.Class({extends:cc.Component,properties:{feverSkeleton:sp.Skeleton},start:function(){var t=this;this.feverSkeleton.setCompleteListener(function(e){t.feverSkeleton.node.active=!1})},startAniFever:function(){this.feverSkeleton.node.active=!0,this.feverSkeleton.setAnimation(0,"eff_fevertime",!1)}}),cc._RF.pop()},{}],FurnitureData:[function(t,e,i){"use strict";cc._RF.push(e,"b963a3G6HtFOqAVgK8PZWrC","FurnitureData");cc.Class({extends:cc.Component,properties:{_furnitureIndex:0,_nameTextKey:0,_explainTextKey:0,_price:0,_priceType:"",_produceType:0,_galleryType:0},initData:function(t,e,i,a,s,n,r){this._furnitureIndex=t,this._nameTextKey=e,this._explainTextKey=i,this._price=s,this._priceType=a,this._produceType=n,this._galleryType=r},getFurnitureIndex:function(){return this._furnitureIndex},getNameTextKey:function(){return this._nameTextKey},getExplainTextKey:function(){return this._explainTextKey},getPrice:function(){return this._price},getPriceType:function(){return this._priceType},getProduceType:function(){return this._produceType},getGalleryType:function(){return this._galleryType}});cc._RF.pop()},{}],FurnitureMgr:[function(t,e,i){"use strict";cc._RF.push(e,"d844fBABa5PKplTSPgRdZoB","FurnitureMgr");var a=t("Global"),s=t("DataMgr");cc.Class({extends:cc.Component,properties:{equipEffSkeleton:sp.Skeleton,furnitureNode:[cc.Node],_furnitureArr:null},start:function(){this._furnitureArr=new Array,this.setFurnitureAll()},setFurniture:function(t){var e=s.getUserFurnitureData(t);e.getLv()>0?(this.furnitureNode[t].active=!0,this._furnitureArr[t]=this.furnitureNode[t].getComponent("FurnitureObj"),this._furnitureArr[t].furnitureAni(),s.setFurnitureTime(t,t),this._furnitureArr[t].initData(t,e,this)):this.furnitureNode[t].active=!1},setFurnitureAll:function(){for(var t=0;t<a.GOODS_FURNITURE_MAX;t++){var e=s.getUserFurnitureData(t);e.getLv()>0?(this.furnitureNode[t].active=!0,this._furnitureArr[t]=this.furnitureNode[t].getComponent("FurnitureObj"),this._furnitureArr[t].initData(t,e,this)):this.furnitureNode[t].active=!1}},startEquipEff:function(t){this.equipEffSkeleton.node.position=this.furnitureNode[t],this.equipEffSkeleton.setAnimation(0,"equip_eff",!1)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global"}],FurnitureObj:[function(t,e,i){"use strict";cc._RF.push(e,"7600937UxxGEKkBO+HlwKLT","FurnitureObj");t("FurnitureMgr");var a=t("PlaySceneMgr"),s=t("DataMgr"),n=t("PopupMgr");cc.Class({extends:cc.Component,properties:{currencyNode:cc.Node,furnitureNode:cc.Node,currencySprite:cc.Sprite,furnitureSprite:cc.Sprite,_slotIdx:-1,_key:-1,_currencyType:-1,_userFurnitureData:null,_furnitureMgr:null},start:function(){},initData:function(t,e,i){this._slotIdx=t,this._furnitureMgr=i,this._userFurnitureData=e;var n=this._userFurnitureData.getPrimaryKey();this._key=n;var r=s.getFurnitureData(n).getProduceType();this._currencyType=r,this.furnitureSprite.spriteFrame=a.instance.getFurnitureSprite(n+1),this.currencySprite.spriteFrame=a.instance.getCurrencySprite(r),this.updateCurrency(),this.schedule(this.updateCurrency,1)},furnitureAni:function(){this.furnitureNode.y=30,this.furnitureNode.opacity=0,this.furnitureNode.active=!0;var t=cc.spawn(cc.moveBy(.5,cc.v2(0,-30)).easing(cc.easeCircleActionIn()),cc.fadeTo(.5,255));this.furnitureNode.runAction(cc.sequence(t,cc.callFunc(this.startStarAni,this),cc.moveBy(.15,cc.v2(0,10)).easing(cc.easeCircleActionIn()),cc.moveBy(.15,cc.v2(0,-10)).easing(cc.easeCircleActionIn())))},startStarAni:function(){this._furnitureMgr.startEquipEff(this._slotIdx)},updateCurrency:function(){s.minusFurnitureTime(this._slotIdx,this._key);var t=s.getFurnitureCurrency(this._key);this.currencyNode.active=0!=t},OnCurrencyBtn:function(){var t=s.getFurnitureCurrency(this._key);if(t>0){this.currencyNode.active=!1,s.setRewardData(this._currencyType,t);var e=cc.v2(this.node.x+720,this.node.y-100);a.instance.CoinAni(e,t,this._currencyType),s.setFurnitureCurrency(this._key,0),s.saveData()}},OnFurniture:function(t,e){var i=s.getFurnitureCurrency(this._key);if(i>0){this.currencyNode.active=!1,s.setRewardData(this._currencyType,i);var r=cc.v2(this.node.x+720,this.node.y-100);a.instance.CoinAni(r,i,this._currencyType),s.setFurnitureCurrency(this._key,0),s.saveData()}else n.instance.showPopup(n.POPUP_FURNITURE_UP,e)}}),cc._RF.pop()},{DataMgr:"DataMgr",FurnitureMgr:"FurnitureMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],FurnitureUpgradeData:[function(t,e,i){"use strict";cc._RF.push(e,"f8c43CXwzRCwaBoTISngIqO","FurnitureUpgradeData"),cc.Class({extends:cc.Component,properties:{_productionCount:0,_price:0,_productionTime:0,_saveMax:0},initData:function(t,e,i,a){this._productionCount=t,this._price=e,this._productionTime=i,this._saveMax=a},getProductionCount:function(){return this._productionCount},getPrice:function(){return this._price},getProductionTime:function(){return this._productionTime},getSaveMax:function(){return this._saveMax}}),cc._RF.pop()},{}],FurnitureUserData:[function(t,e,i){"use strict";cc._RF.push(e,"6a52bePhfxG66W2Hw1Np4to","FurnitureUserData"),cc.Class({extends:cc.Component,properties:{_primaryKey:0,_Lv:0,_slotIdx:-1,_currency:0},initData:function(t){this._primaryKey=t,this._Lv=0,this._slotIdx=-1,this._currency=0},setPrimaryKey:function(t){this._primaryKey=t},getPrimaryKey:function(){return this._primaryKey},setLv:function(t){this._Lv=t},getLv:function(){return this._Lv},setSlotIdx:function(t){this._slotIdx=t},getSlotIdx:function(){return this._slotIdx},setCurrency:function(t){this._currency=t},getCurrency:function(){return this._currency},getSaveObj:function(){return{slotIdx:this._slotIdx,primaryKey:this._primaryKey,Lv:this._Lv,currency:this._currency}},setSaveObj:function(t){this._slotIdx=t.slotIdx,this._primaryKey=t.primaryKey,this._Lv=t.Lv,this._currency=t.currency}}),cc._RF.pop()},{}],GalleryAccSlotObj:[function(t,e,i){"use strict";cc._RF.push(e,"486868MYy5JjpiQVDXqJBlo","GalleryAccSlotObj");var a=t("LocaleMgr"),s=t("DataMgr"),n=t("AccessoryMgr"),r=t("PlaySceneMgr"),c=t("PopupMgr"),o=t("Global");cc.Class({extends:cc.Component,properties:{newNode:cc.Node,titleLabel:cc.Label,collectLabel:cc.Label,rewardLabel:cc.Label,getLabel:cc.Label,accSprite:[cc.Sprite],accGrade:[cc.Sprite],rewardSprite:cc.Sprite,getBtnSprite:cc.Sprite,btnBlue:cc.SpriteFrame,btnGray:cc.SpriteFrame,_playSceneMgr:null,_accessoryMgr:null,_popupGallery:null,_accIdx:null,_accInfoBool:null,_galleryIdx:0,_rewardType:0,_rewardValue:0,_accCount:0,_getAccCount:0,_newBool:!1,_ACC_MAX_COUNT:4},start:function(){this.getLabel.string=a.getString(1002)},init:function(t,e){this._playSceneMgr=r.instance,this._accessoryMgr=n.instance,this._popupGallery=e,this._galleryIdx=t.getIdx();var i=t.getGalleryType(),s=t.getNameTextKey();this._rewardType=t.getRewardType(),this._rewardValue=t.getRewardValue(),this.setGalleryAcc(i),this.titleLabel.string=a.getString(s),this.collectLabel.string=this._getAccCount+" / "+this._accCount,this.rewardLabel.string=o.getNumToType(this._rewardValue),this.rewardSprite.spriteFrame=this._playSceneMgr.getCurrencySprite(this._rewardType),this.updateBtn()},setGalleryAcc:function(t){var e=this._accessoryMgr.getAccDic();for(var i in this._accCount=0,this._getAccCount=0,this._accIdx=new Array,this._accInfoBool=new Array,e){var a=e[i],n=a.getAccType(),r=a.getIdx(),c=a.getAccGrade(),o=this._accessoryMgr.getAccSprite(n,r),h=this._accessoryMgr.getAccGradeSprite(c);a.getGalleryType()==t&&(this.accSprite[this._accCount].spriteFrame=o,this.accGrade[this._accCount].spriteFrame=h,this._accIdx.push(r),s.getAccCollectBool(r)?(this._accInfoBool.push(!0),this.accSprite[this._accCount].node.color=cc.color(255,255,255),this.accSprite[this._accCount].node.opacity=255,this._getAccCount++):(this._accInfoBool.push(!1),this.accSprite[this._accCount].node.color=cc.color(0,0,0),this.accSprite[this._accCount].node.opacity=180),this._accCount++)}for(var u=this._accCount;u<this._ACC_MAX_COUNT;u++)this.accSprite[u].node.active=!1,this.accGrade[u].node.active=!1},OnAccBtn:function(t,e){if(this._accInfoBool[e]){var i=this._accIdx[e];this._popupGallery.showAccInfo(i)}},OngetBtn:function(){var t=[],e=s.setRewardData(this._rewardType,this._rewardValue);t.push(e),c.instance.showPopup(c.POPUP_REWARD,t),this._playSceneMgr.chkGuide(o.GUIDE_GALLERY),s.saveGetGalleryData(this._galleryIdx),this.updateBtn();var i=this._playSceneMgr.getGalleryNew();i-=1,this._playSceneMgr.setGalleryNew(i),this._playSceneMgr.updateGalleryNew(),this._popupGallery.updateSlot()},updateBtn:function(){if(this._getAccCount!=this._accCount||s.isGotGalleryIdx(this._galleryIdx))this._newBool=!1,this.getBtnSprite.spriteFrame=this.btnGray,this.getBtnSprite.node.getComponent("cc.Button").interactable=!1,this.newNode.active=!1;else{this.getBtnSprite.spriteFrame=this.btnBlue,this.getBtnSprite.node.getComponent("cc.Button").interactable=!0,this.newNode.active=!0,this._newBool=!0;var t=this._playSceneMgr.getGalleryNew();t+=1,this._playSceneMgr.setGalleryNew(t)}},getNewBool:function(){return this._newBool}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],GalleryCatSlotObj:[function(t,e,i){"use strict";cc._RF.push(e,"552aeUa7qxGDrkq1lnjsur7","GalleryCatSlotObj");var a=t("LocaleMgr"),s=t("DataMgr"),n=t("UnitMgr"),r=t("RareCatMgr"),c=t("PlaySceneMgr"),o=t("PopupMgr"),h=t("Global");cc.Class({extends:cc.Component,properties:{newNode:cc.Node,titleLabel:cc.Label,collectLabel:cc.Label,rewardLabel:cc.Label,getLabel:cc.Label,catSprite:[cc.Sprite],catGradeSprite:[cc.Sprite],rewardSprite:cc.Sprite,getBtnSprite:cc.Sprite,btnBlue:cc.SpriteFrame,btnGray:cc.SpriteFrame,_playSceneMgr:null,_popupGallery:null,_catGrade:null,_catInfoBool:null,_galleryIdx:0,_rewardType:0,_rewardValue:0,_catCount:0,_getCatCount:0,_newBool:!1,_CAT_MAX_COUNT:4},start:function(){this.getLabel.string=a.getString(1002)},init:function(t,e){this._playSceneMgr=c.instance,this._popupGallery=e,this._galleryIdx=t.getIdx();var i=t.getGalleryType(),s=t.getNameTextKey();this._rewardType=t.getRewardType(),this._rewardValue=t.getRewardValue(),this.setGalleryCat(i),this.titleLabel.string=a.getString(s),this.collectLabel.string=this._getCatCount+" / "+this._catCount,this.rewardLabel.string=h.getNumToType(this._rewardValue),this.rewardSprite.spriteFrame=this._playSceneMgr.getCurrencySprite(this._rewardType),this.updateBtn()},setGalleryCat:function(t){this._catCount=0,this._getCatCount=0,this._catGrade=new Array,this._catInfoBool=new Array;for(var e=1;e<=h.TOTAL_CAT_NUMBER;e++){var i=null,a="",c=null;e<h.RARE_CAT_MIN?(i=n.instance.getUnitDataGrade(e),a="n",c=n.instance.getUnitSpriteForGrade(e)):(a=(i=r.instance.getRareCatDataGrade(e)).getRank(),c=r.instance.getUnitSpriteForGrade(e)),i.getGalleryType()==t&&(this.catSprite[this._catCount].spriteFrame=c,this.catGradeSprite[this._catCount].spriteFrame=this._playSceneMgr.getCatRankSprite(a),this._catGrade.push(i.getUnitGrade()),s.getNewCatBool(e)?(this._catInfoBool.push(!0),this.catSprite[this._catCount].node.color=cc.color(255,255,255),this.catSprite[this._catCount].node.opacity=255,this._getCatCount++):(this._catInfoBool.push(!1),this.catSprite[this._catCount].node.color=cc.color(0,0,0),this.catSprite[this._catCount].node.opacity=180),this._catCount++)}for(e=this._catCount;e<this._CAT_MAX_COUNT;e++)this.catSprite[e].node.active=!1,this.catGradeSprite[e].node.active=!1},OnCatBtn:function(t,e){if(this._catInfoBool[e]){var i=this._catGrade[e];this._popupGallery.showCatInfo(i)}},OngetBtn:function(){var t=[],e=s.setRewardData(this._rewardType,this._rewardValue);t.push(e),o.instance.showPopup(o.POPUP_REWARD,t),this._playSceneMgr.chkGuide(h.GUIDE_GALLERY),s.saveGetGalleryData(this._galleryIdx),this.updateBtn();var i=this._playSceneMgr.getGalleryNew();i-=1,this._playSceneMgr.setGalleryNew(i),this._playSceneMgr.updateGalleryNew(),this._popupGallery.updateSlot()},updateBtn:function(){if(this._getCatCount!=this._catCount||s.isGotGalleryIdx(this._galleryIdx))this._newBool=!1,this.getBtnSprite.spriteFrame=this.btnGray,this.getBtnSprite.node.getComponent("cc.Button").interactable=!1,this.newNode.active=!1;else{this.getBtnSprite.spriteFrame=this.btnBlue,this.getBtnSprite.node.getComponent("cc.Button").interactable=!0,this.newNode.active=!0,this._newBool=!0;var t=this._playSceneMgr.getGalleryNew();t+=1,this._playSceneMgr.setGalleryNew(t)}},getNewBool:function(){return this._newBool}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",UnitMgr:"UnitMgr"}],GalleryData:[function(t,e,i){"use strict";cc._RF.push(e,"47544aWTZhI1Z5XRgOQFyj0","GalleryData"),cc.Class({extends:cc.Component,properties:{_galleryIdx:0,_galleryType:0,_nameTextKey:0,_rewardType:0,_rewardValue:0},initData:function(t,e,i,a,s){this._galleryIdx=t,this._galleryType=e,this._nameTextKey=i,this._rewardType=a,this._rewardValue=s},getIdx:function(){return this._galleryIdx},getGalleryType:function(){return this._galleryType},getNameTextKey:function(){return this._nameTextKey},getRewardType:function(){return this._rewardType},getRewardValue:function(){return this._rewardValue}}),cc._RF.pop()},{}],GalleryHouseSlotObj:[function(t,e,i){"use strict";cc._RF.push(e,"b593awsgbVBmoB8qnACKU/i","GalleryHouseSlotObj");var a=t("LocaleMgr"),s=t("DataMgr"),n=(t("UnitMgr"),t("RareCatMgr"),t("PlaySceneMgr")),r=t("PopupMgr"),c=t("Global");cc.Class({extends:cc.Component,properties:{newNode:cc.Node,titleLabel:cc.Label,collectLabel:cc.Label,rewardLabel:cc.Label,getLabel:cc.Label,houseSpriteArr:[cc.Sprite],rewardSprite:cc.Sprite,getBtnSprite:cc.Sprite,btnBlue:cc.SpriteFrame,btnGray:cc.SpriteFrame,_playSceneMgr:null,_popupGallery:null,_houseIdx:null,_houseInfoBool:null,_galleryIdx:0,_rewardType:0,_rewardValue:0,_houseCount:0,_getHouseCount:0,_newBool:!1,_HOUSE_MAX_COUNT:6},start:function(){this.getLabel.string=a.getString(1002)},init:function(t,e){this._playSceneMgr=n.instance,this._popupGallery=e,this._galleryIdx=t.getIdx();var i=t.getGalleryType(),s=t.getNameTextKey();this._rewardType=t.getRewardType(),this._rewardValue=t.getRewardValue(),this.setGalleryHouse(i),this.titleLabel.string=a.getString(s),this.collectLabel.string=this._getHouseCount+" / "+this._houseCount,this.rewardLabel.string=c.getNumToType(this._rewardValue),this.rewardSprite.spriteFrame=this._playSceneMgr.getCurrencySprite(this._rewardType),this.updateBtn()},setGalleryHouse:function(t){this._houseCount=0,this._getHouseCount=0,this._houseIdx=new Array,this._houseInfoBool=new Array;for(var e=2;e<=c.PAGE_ONE_RARE_SLOT;e++){var i,a=s.getCatHouseData(e);i=this._playSceneMgr.getShopHouseSprite(e),a.getGalleryType()==t&&(this.houseSpriteArr[this._houseCount].spriteFrame=i,this._houseIdx.push(a.getHouseIndex()),s.getHouseCollectBool(e)?(this._houseInfoBool.push(!0),this.houseSpriteArr[this._houseCount].node.color=cc.color(255,255,255),this.houseSpriteArr[this._houseCount].node.opacity=255,this._getHouseCount++):(this._houseInfoBool.push(!1),this.houseSpriteArr[this._houseCount].node.color=cc.color(0,0,0),this.houseSpriteArr[this._houseCount].node.opacity=180),this._houseCount++)}for(e=this._houseCount;e<this._HOUSE_MAX_COUNT;e++)this.houseSpriteArr[e].node.active=!1},OnHouseBtn:function(t,e){if(this._houseInfoBool[e]){var i=this._houseIdx[e];this._popupGallery.showHouseInfo(i)}},OngetBtn:function(){var t=[],e=s.setRewardData(this._rewardType,this._rewardValue);t.push(e),r.instance.showPopup(r.POPUP_REWARD,t),this._playSceneMgr.chkGuide(c.GUIDE_GALLERY),s.saveGetGalleryData(this._galleryIdx),this.updateBtn();var i=this._playSceneMgr.getGalleryNew();i-=1,this._playSceneMgr.setGalleryNew(i),this._playSceneMgr.updateGalleryNew(),this._popupGallery.updateSlot()},updateBtn:function(){if(this._getHouseCount!=this._houseCount||s.isGotGalleryIdx(this._galleryIdx))this._newBool=!1,this.getBtnSprite.spriteFrame=this.btnGray,this.getBtnSprite.node.getComponent("cc.Button").interactable=!1,this.newNode.active=!1;else{this.getBtnSprite.spriteFrame=this.btnBlue,this.getBtnSprite.node.getComponent("cc.Button").interactable=!0,this.newNode.active=!0,this._newBool=!0;var t=this._playSceneMgr.getGalleryNew();t+=1,this._playSceneMgr.setGalleryNew(t)}},getNewBool:function(){return this._newBool}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",UnitMgr:"UnitMgr"}],Global:[function(t,e,i){"use strict";var a;function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"7a33106vUdPv54M+fexykX+","Global"),e.exports=(s(a={APP_VERSION:"0.4.2",APP_ID:"com.indiejoy.mergemergecat",PLATFORM_FB:"FB",PLATFORM_WEB:"WEB",PLATFORM_ANDROID:"AND",PLATFORM_IOS:"IOS",PLATFORM:"WEB",FB_REWARD_ADS_ID:"272299950025893_285200905402464",FB_INTERSTITIAL_ADS_ID:"272299950025893_285200732069148",ADS_REWARD_PLACEMENT_ID:"placement-reward1",INAPP_ADS_PASS_PACK:"ads_pass_pack",INAPP_ADS_PASS_PACK_ID:"com.indiejoy.mergecats.ads_pass_pack",COMM_URL:"https://cafe.naver.com/indiejoy",AND_MARKET_URL:"https://play.google.com/store/apps/details?id=com.indiejoy.mergecats",IOS_MARKET_URL:"",TERMS_URL:"https://drive.google.com/open?id=1HO_xWBx0tAgqfTwqhrmv-so9EzhhN1pm",ACTIVE_DEBUG_MODE:!0,MAX_MERGEOBJ_NUM:12,MAX_UNIT_GRADE:36,MAX_GOLD_UNIT_GRADE:33,MAX_USER_LV:1e3,MAX_RARE_CAT_LV:100,MAX_USER_EXP:13376294625,MAX_RARE_CAT_EXP:6567e3,MAX_OFFLINE_TIME:360,ADD_CAT_COUNT_TIME:0,ADD_CAT_COUNT_NUM:1,NORMAL_CAT_HOME_SLOT:2,SHOP_CAT_BUY_MIN_GRADE:3,SHOP_CAT_BUY_MAX_GRADE:4,RESOLUTION_NORMAL:0,RESOLUTION_LOW_HEIGHT:1,RESOLUTION_HIGH_HEIGHT:2,RESOLUTION_VHIGH_HEIGHT:3,RESOLUTION_UHIGH_HEIGHT:4,RESOLUTION_SET:0,SAFE_TOP_UI:0,SAFE_BOT_UI:0,CATE_UNIT:0,CATE_BUFF:1,CATE_CUSION:2,SHOP_BUFF_MAX:8,SHOP_BUFF_CATCOUNT:0,SHOP_BUFF_GET_SPEED_TIME:1,SHOP_BUFF_INCREASE_COIN:2,SHOP_BUFF_INCREASE_BUFF_TIME:3,SHOP_BUFF_CAT_LVTWO_CHANCE:4,SHOP_BUFF_MERGE_LVTWO_CHANCE:5,SHOP_BUFF_OFFLINE_REWARD:6,SHOP_BUFF_MOUSE_LVUP_CHANCE:7,GOODS_HOUSE_MAX:7,GOODS_CARE_ITEM_MAX:8,GOODS_FURNITURE_MAX:4},"RESOLUTION_NORMAL",0),s(a,"RESOLUTION_LOW_HEIGHT",1),s(a,"RESOLUTION_HIGH_HEIGHT",2),s(a,"RESOLUTION_VHIGH_HEIGHT",3),s(a,"RESOLUTION_SET",0),s(a,"UNIT_GRADEUP_MAX",36),s(a,"RARE_CAT_MIN",11),s(a,"CAT_TIMER_TIME",1),s(a,"COIN_PREFAB_MAX",10),s(a,"TOTAL_CAT_NUMBER",36),s(a,"RARE_CAT_NUMBER",26),s(a,"UNIT_CREATE_GRADE",1),s(a,"DEFAULT_RARE_SLOT",1),s(a,"DEFAULT_HOTEL_SLOT",0),s(a,"DEFAULT_HOUSE_SLOT",0),s(a,"PAGE_ONE_RARE_SLOT",7),s(a,"ACC_MAX",0),s(a,"ADD_CAT_COUNT_DEFAULT_TIME",0),s(a,"ADD_CAT_COUNT_MAX_TIME",0),s(a,"ADD_CAT_COUNT_DEFAULT_NUM",0),s(a,"ADD_CAT_COUNT_MAX_NUM",0),s(a,"NORMAL_CAT_HOME_SLOT",0),s(a,"SHOP_CAT_BUY_MIN_GRADE",0),s(a,"SHOP_CAT_BUY_MAX_GRADE",0),s(a,"MIN_REWARD_TIME",300),s(a,"MAX_REWARD_TIME",86400),s(a,"RANDOM_BOX_MAX_COUNT",4),s(a,"RANDOM_BOX_MAX_TIME",21600),s(a,"RANDOM_BOX_ADS_MAX_TIME",600),s(a,"RANDOM_BOX_ACC_MAX_COUNT",1),s(a,"RANDOM_BOX_ACC_MAX_TIME",86400),s(a,"RANDOM_BOX_ACC_ADS_MAX_TIME",86400),s(a,"ADS_REWARD_MUL",2),s(a,"PAYMENT_NONE",-1),s(a,"PAYMENT_COIN",0),s(a,"PAYMENT_RARE_COIN",1),s(a,"PAYMENT_CASH_COIN",2),s(a,"PAYMENT_CAT_TICKET",3),s(a,"PAYMENT_ACC_TICKET",4),s(a,"PAYMENT_TROPHY",5),s(a,"PAYMENT_CATEXP",6),s(a,"PAYMENT_CAT",15),s(a,"PAYMENT_CAT_FEED",7),s(a,"PAYMENT_CAT_SHAMPOO",8),s(a,"PAYMENT_CAT_TONIC",9),s(a,"PAYMENT_TOY_FISHING",10),s(a,"PAYMENT_FISH_STEAK",11),s(a,"PAYMENT_BUBBLE_BATH",12),s(a,"PAYMENT_MEDICAL_TESTING",13),s(a,"PAYMENT_MAZE_HUNT",14),s(a,"GALLERY_NORMAL_CAT_1",1),s(a,"GALLERY_NORMAL_CAT_2",2),s(a,"GALLERY_NORMAL_CAT_3",3),s(a,"GALLERY_RARE_CAT_1",4),s(a,"GALLERY_RARE_CAT_2",5),s(a,"GALLERY_RARE_CAT_3",6),s(a,"GALLERY_RARE_CAT_4",7),s(a,"GALLERY_RARE_CAT_5",8),s(a,"GALLERY_RARE_CAT_6",9),s(a,"GALLERY_RARE_CAT_7",10),s(a,"GALLERY_ACC_1",101),s(a,"GALLERY_ACC_2",102),s(a,"GALLERY_ACC_3",103),s(a,"GALLERY_ACC_4",104),s(a,"GALLERY_ACC_5",105),s(a,"GALLERY_ACC_6",106),s(a,"GALLERY_ACC_7",107),s(a,"GALLERY_ACC_8",108),s(a,"GALLERY_ACC_9",109),s(a,"GALLERY_ACC_10",110),s(a,"GALLERY_ACC_11",111),s(a,"GALLERY_ACC_12",112),s(a,"GALLERY_ACC_13",113),s(a,"GALLERY_HOUSE_1",201),s(a,"GALLERY_FURNITURE_1",301),s(a,"GALLERY_CAT_MAX",0),s(a,"GALLERY_ACC_MAX",0),s(a,"GALLERY_HOUSE_MAX",0),s(a,"CONTEST_PERFECT",0),s(a,"CONTEST_GREAT",1),s(a,"CONTEST_GOOD",2),s(a,"CONTEST_BAD",3),s(a,"CONTEST_LV_STANDARD",100),s(a,"CONTEST_GRADE_STANDARD",10),s(a,"CONTEST_KIND_HEALTH",0),s(a,"CONTEST_KIND_CHARM",1),s(a,"CONTEST_KIND_INT",2),s(a,"CONTEST_MAX_TIME",300),s(a,"CONTEST_CAT_TIME",3600),s(a,"CARE_NORMAL",-1),s(a,"CARE_HUNGRY",0),s(a,"CARE_DIRTY",1),s(a,"CARE_SICK",2),s(a,"CARE_BORED",3),s(a,"CARE_HAPPY",0),s(a,"CARE_CALM",1),s(a,"CARE_ANGRY",2),s(a,"CAT_EMOTICON_HUNGRY",0),s(a,"CAT_EMOTICON_DIRTY",1),s(a,"CAT_EMOTICON_SICK",2),s(a,"CAT_EMOTICON_BORING",3),s(a,"CAT_EMOTICON_LIKE",4),s(a,"CAT_EMOTICON_ANGRY",5),s(a,"CAT_EMOTICON_MAX",4),s(a,"CARE_ADS_ITEM_COUNT",5),s(a,"HELP_NORMAL",0),s(a,"HELP_RARE",1),s(a,"HELP_CONTEST",2),s(a,"CONTENT_OPEN_TYPE_CATGRADE",0),s(a,"CONTENT_OPEN_TYPE_RARE_CAT_COUNT",1),s(a,"CONTENT_OPEN_TYPE_GUIDE_FINSH",2),s(a,"CONTENT_PET_SHOP",0),s(a,"CONTNET_GALLERY",1),s(a,"CONTENT_GACHA",2),s(a,"CONTENT_CONTEST",3),s(a,"CONTENT_QUEST",4),s(a,"RARE_CAT_MAIN_HEALTH",0),s(a,"RARE_CAT_MAIN_CHARM",1),s(a,"RARE_CAT_MAIN_INT",2),s(a,"GUIDE_NULL",-1),s(a,"GUIDE_NORMAL_CAT_MARGE",0),s(a,"GUIDE_NORMAL_CAT_4LV_MADE",1),s(a,"GUIDE_NORMAL_CAT_6LV_MADE",2),s(a,"GUIDE_NORMAL_CAT_8LV_MADE",3),s(a,"GUIDE_NORMAL_CAT_10LV_MADE",4),s(a,"GUIDE_MOUSE_CATCH",5),s(a,"GUIDE_PLAYTIME_REWARD",6),s(a,"GUIDE_PRODUCTION",7),s(a,"GUIDE_GALLERY",8),s(a,"GUIDE_RARE_CAT_MADE",9),s(a,"GUIDE_PETSHOP_NORMAL_CAT_BUY",10),s(a,"GUIDE_BUFF_GET",11),s(a,"GUIDE_PETSHOP_CAT_PRODUCTION_UP",12),s(a,"GUIDE_PETSHOP_CAT_PRODUCTION_TIME",13),s(a,"GUIDE_RANDOMBOX_NORMAL_CAT",14),s(a,"GUIDE_RAMDOMBOX_ACC_GET",15),s(a,"GUIDE_GOODSHOP_FEED_BUY",16),s(a,"GUIDE_RARE_CAT_DEBUFF_CARE",17),s(a,"GUIDE_RARE_CAT_ACC_MOUNT",18),s(a,"GUIDE_CAT_CONTEST_JOIN",19),s(a,"QUEST_REFRESH_PRICE",100),s(a,"MAX_QUEST_REWARD",10),s(a,"MAX_QUEST_NUM",3),s(a,"ADS_QUEST_REFRESH_TIME",600),s(a,"QUEST_FREE_REFRESH_TIME",1800),s(a,"QUEST_PRODUCTION",0),s(a,"QUEST_NORMAL_CAT_MERGE",1),s(a,"QUEST_MOUSE_CATCH",2),s(a,"QUEST_BUFF_GET",3),s(a,"QUEST_RANDOMBOX_NORMAL_CAT",4),s(a,"QUEST_PLAYTIME_REWARD",5),s(a,"QUEST_RANDOMBOX_ACC_GET",6),s(a,"QUEST_CAT_CONTEST_JOIN",7),s(a,"QUEST_RARE_CAT_DEBUFF_CARE",8),s(a,"QUEST_RARE_CAT_FOOD_CARE",9),s(a,"QUEST_RARE_CAT_DIRTY_CARE",10),s(a,"QUEST_RARE_CAT_SICK_CARE",11),s(a,"QUEST_RARE_CAT_DORED_CARE",12),s(a,"initSettingValue",function(t){this.ADD_CAT_COUNT_DEFAULT_TIME=parseInt(t.getRecordValue(0,"ADD_CAT_COUNT_DEFAULT_TIME")),this.ADD_CAT_COUNT_MAX_TIME=parseInt(t.getRecordValue(0,"ADD_CAT_COUNT_MAX_TIME")),this.ADD_CAT_COUNT_DEFAULT_NUM=parseInt(t.getRecordValue(0,"ADD_CAT_COUNT_DEFAULT_NUM")),this.ADD_CAT_COUNT_MAX_NUM=parseInt(t.getRecordValue(0,"ADD_CAT_COUNT_MAX_NUM")),this.NORMAL_CAT_HOME_SLOT=parseInt(t.getRecordValue(0,"NORMAL_CAT_HOME_SLOT")),this.SHOP_CAT_BUY_MIN_GRADE=parseInt(t.getRecordValue(0,"SHOP_CAT_BUY_MIN_GRADE")),this.SHOP_CAT_BUY_MAX_GRADE=parseInt(t.getRecordValue(0,"SHOP_CAT_BUY_MAX_GRADE"))}),s(a,"setGalleryMax",function(t,e,i){this.GALLERY_CAT_MAX=t,this.GALLERY_ACC_MAX=e,this.GALLERY_HOUSE_MAX=i}),s(a,"setAccMax",function(t){this.ACC_MAX=t}),s(a,"setDefaultSlot",function(t){for(var e=0;e<t.getRecordNum();e++)switch(parseInt(t.getRecordValue(e,"Slot_Index"))){case 1:this.DEFAULT_RARE_SLOT=parseInt(t.getRecordValue(e,"Slot_Default_Num"));break;case 2:this.DEFAULT_HOTEL_SLOT=parseInt(t.getRecordValue(e,"Slot_Default_Num"));break;case 3:this.DEFAULT_HOUSE_SLOT=parseInt(t.getRecordValue(e,"Slot_Default_Num"))}}),s(a,"setResolutionSetting",function(){if(cc.sys.isMobile){var t=cc.sys.windowPixelResolution.height/cc.sys.windowPixelResolution.width;t<=1.7?(this.RESOLUTION_SET=this.RESOLUTION_LOW_HEIGHT,cc.view.setDesignResolutionSize(720,1184,cc.ResolutionPolicy.SHOW_ALL)):t>=1.9?(this.RESOLUTION_SET=this.RESOLUTION_VHIGH_HEIGHT,cc.view.setDesignResolutionSize(720,1376,cc.ResolutionPolicy.SHOW_ALL)):t>=1.85&&(this.RESOLUTION_SET=this.RESOLUTION_HIGH_HEIGHT,cc.view.setDesignResolutionSize(720,1344,cc.ResolutionPolicy.SHOW_ALL))}}),s(a,"initPlatform",function(){0==cc.sys.platform&&(this.PLATFORM=this.PLATFORM_WEB)}),s(a,"formatNumber",function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}),s(a,"getTypeToNum",function(t,e){switch(e){case"K":return 1e3*t;case"M":return 1e6*t;case"G":return 1e9*t;case"T":return 1e12*t;case"P":return 1e15*t;case"E":return 1e18*t;case"Z":return 1e21*t;case"Y":return 1e24*t;case"aa":return 1e27*t;case"bb":return 1e30*t;case"cc":return 1e33*t;case"dd":return 1e36*t;case"ee":return 1e39*t;default:return t}}),s(a,"getNumToType",function(t){return t>=1e23?t>=1e41?this.formatNumber(Math.floor(t/1e39))+"ee":t>=1e38?this.formatNumber(Math.floor(t/1e36))+"dd":t>=1e35?this.formatNumber(Math.floor(t/1e33))+"cc":t>=1e32?this.formatNumber(Math.floor(t/1e30))+"bb":t>=1e29?this.formatNumber(Math.floor(t/1e27))+"aa":t>=1e26?this.formatNumber(Math.floor(t/1e24))+"Y":t>=1e23?this.formatNumber(Math.floor(t/1e21))+"Z":void 0:t>=1e20?this.formatNumber(Math.floor(t/1e18))+"E":t>=1e17?this.formatNumber(Math.floor(t/1e15))+"P":t>=1e14?this.formatNumber(Math.floor(t/1e12))+"T":t>=1e11?this.formatNumber(Math.floor(t/1e9))+"G":t>=1e8?this.formatNumber(Math.floor(t/1e6))+"M":t>=1e5?this.formatNumber(Math.floor(t/1e3))+"K":this.formatNumber(t)}),s(a,"getNumToArr",function(t){return t>=1e23?t>=1e41?[Math.floor(t/1e39),"ee"]:t>=1e38?[Math.floor(t/1e36),"dd"]:t>=1e35?[Math.floor(t/1e33),"cc"]:t>=1e32?[Math.floor(t/1e30),"bb"]:t>=1e29?[Math.floor(t/1e27),"aa"]:t>=1e26?[Math.floor(t/1e24),"Y"]:t>=1e23?[Math.floor(t/1e21),"Z"]:void 0:t>=1e20?[Math.floor(t/1e18),"E"]:t>=1e17?[Math.floor(t/1e15),"P"]:t>=1e14?[Math.floor(t/1e12),"T"]:t>=1e11?[Math.floor(t/1e9),"G"]:t>=1e8?[Math.floor(t/1e6),"M"]:t>=1e5?[Math.floor(t/1e3),"K"]:[t,""]}),s(a,"shuffleArray",function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),a=t[e];t[e]=t[i],t[i]=a}}),s(a,"gotoCommunity",function(){cc.sys.openURL(this.COMM_URL)}),s(a,"gotoTerms",function(){cc.sys.openURL(this.TERMS_URL)}),s(a,"gotoMarket",function(){cc.sys.openURL(this.AND_MARKET_URL),this.PLATFORM==this.PLATFORM_ANDROID?cc.sys.openURL(this.AND_MARKET_URL):this.PLATFORM==this.PLATFORM_IOS&&cc.sys.openURL(this.IOS_MARKET_URL)}),a),cc._RF.pop()},{}],GuideData:[function(t,e,i){"use strict";cc._RF.push(e,"50d79sJS6BBqq3YDf7VoAkx","GuideData"),cc.Class({extends:cc.Component,properties:{_guideKey:0,_guideCode:0,_nameTextKey:0,_guideCount:0,_rewardType:0,_rewardValue:0},initData:function(t,e,i,a,s,n){this._guideKey=t,this._guideCode=e,this._nameTextKey=i,this._guideCount=a,this._rewardType=s,this._rewardValue=n},getGuideKey:function(){return this._guideKey},getGuideCode:function(){return this._guideCode},getNameTextKey:function(){return this._nameTextKey},getGuideCount:function(){return this._guideCount},getRewardType:function(){return this._rewardType},getRewardValue:function(){return this._rewardValue}}),cc._RF.pop()},{}],IconAni:[function(t,e,i){"use strict";cc._RF.push(e,"38ddaMerelFPZXiFltfLjuH","IconAni"),cc.Class({extends:cc.Component,properties:{aniType:"",_delayTime:3},start:function(){},startAni:function(){switch(this.aniType){case"rotation":this.unscheduleAllCallbacks(),this.schedule(this.rotationAni,2.5);break;case"scale":this.unscheduleAllCallbacks(),this.schedule(this.scaleAni,2.5);break;case"scale2":this.unscheduleAllCallbacks(),this.schedule(this.scaleAni2,2.5);break;case"position":this.unscheduleAllCallbacks(),this.schedule(this.positionAni,2.5)}},rotationAni:function(){var t=this;cc.tween(this.node).delay(this._delayTime).to(.075,{angle:10}).to(.15,{angle:-10}).to(.15,{angle:10}).to(.15,{angle:-10}).to(.075,{angle:0}).call(function(){t.setDelayTime()}).start()},scaleAni:function(){var t=this;cc.tween(this.node).delay(this._delayTime).to(.15,{scale:1.1},{easing:"backOut"}).to(.15,{scale:1},{easing:"backOut"}).to(.15,{scale:1.1},{easing:"backOut"}).to(.15,{scale:1},{easing:"backOut"}).call(function(){t.setDelayTime()}).start()},scaleAni2:function(){var t=this;cc.tween(this.node).delay(this._delayTime).to(.15,{scale:.9},{easing:"backOut"}).to(.15,{scale:1},{easing:"backOut"}).to(.15,{scale:.9},{easing:"backOut"}).to(.15,{scale:1},{easing:"backOut"}).call(function(){t.setDelayTime()}).start()},positionAni:function(){var t=this;cc.tween(this.node).delay(this._delayTime).by(.15,{position:cc.v2(0,5)},{easing:"backOut"}).by(.15,{position:cc.v2(0,-5)},{easing:"backOut"}).by(.15,{position:cc.v2(0,5)},{easing:"backOut"}).by(.15,{position:cc.v2(0,-5)},{easing:"backOut"}).call(function(){t.setDelayTime()}).start()},stopAni:function(){this.unscheduleAllCallbacks()},setDelayTime:function(){this._delayTime=2*Math.random()}}),cc._RF.pop()},{}],IntroSceneMgr:[function(t,e,i){"use strict";cc._RF.push(e,"399echq1D1Bx6ZWbXg3XZw1","IntroSceneMgr");var a=t("DataMgr"),s=t("UnitMgr"),n=t("RareCatMgr"),r=t("AccessoryMgr"),c=t("TSVFileHandler"),o=t("SoundMgr"),h=t("LocaleMgr"),u=t("Global"),l=t("ShopData"),_=t("CashShopData"),p=t("CatHouseData"),d=t("PostData"),g=t("CouponData"),S=t("DailyAccessData"),T=t("ContestLvData"),A=t("ContestRewardData"),C=t("GalleryData"),f=t("CareData"),m=t("ContentOpenData"),b=t("GuideData"),M=t("FurnitureData"),y=t("FurnitureUpgradeData"),P=t("QuestData");cc.Class({extends:cc.Component,properties:{verLabel:cc.Label,label:cc.Label,progressBar:cc.ProgressBar,startBtn:cc.Node,initBtn:cc.Node,_loadingPer1:0,_totalFileNum:4,_loadFileNum:0,_dataLoadedFlag:!1,_loadCompFlag:!1,_SCENE_NAME:"PlayScene"},start:function(){this.verLabel.string=u.PLATFORM+u.APP_VERSION,this.label.string="0%",this._loadingPer1=0,this.progressBar.progress=0,this._dataLoadedFlag=!1,this._loadCompFlag=!1,this._titleCompFlag=!0,s.instance.setDataMgr(a),n.instance.setDataMgr(a),r.instance.setDataMgr(a),this.loadDataTable(),o.loadSoundPre(this.preSoundLoadedHandler.bind(this))},loadDataTable:function(){(new c).loadFile("Data/setting_info.txt",[],this.onSettingInfoLoading.bind(this)),(new c).loadFile("Data/char_normal_info.txt",[],this.onCharInfoLoading.bind(this)),(new c).loadFile("Data/localization.txt",[],this.onLocalizationLoading.bind(this)),(new c).loadFile("Data/shop_info.txt",[],this.onShopInfoLoading.bind(this)),(new c).loadFile("Data/level_info.txt",[],this.onLevelInfoLoading.bind(this)),(new c).loadFile("Data/char_rare_info.txt",[],this.onRareCharInfoLoading.bind(this)),(new c).loadFile("Data/slot_info.txt",[],this.onSlotInfoLoading.bind(this)),(new c).loadFile("Data/cat_house_info.txt",[],this.onCatHouseInfoLoading.bind(this)),(new c).loadFile("Data/upgrade_info",[],this.onUpgradeInfoLoading.bind(this)),(new c).loadFile("Data/box_reward_info",[],this.onBoxRewardInfoLoading.bind(this)),(new c).loadFile("Data/Accessories_info",[],this.onAccessoryInfo.bind(this)),(new c).loadFile("Data/Accessories_Option_info",[],this.onAccessoryOptionInfo.bind(this)),(new c).loadFile("Data/dailyaccess_info",[],this.onDailyAccessInfoLoading.bind(this)),(new c).loadFile("Data/attend_info",[],this.onAttendInfoLoading.bind(this)),(new c).loadFile("Data/post_info.txt",[],this.onPostInfoLoading.bind(this)),(new c).loadFile("Data/coupon_info.txt",[],this.onCouponInfoLoading.bind(this)),(new c).loadFile("Data/contest_Level_info.txt",[],this.onContestLevelLoading.bind(this)),(new c).loadFile("Data/contest_Reward_info.txt",[],this.onContestRewardLoading.bind(this)),(new c).loadFile("Data/contest_score_info.txt",[],this.onContestScoreLoading.bind(this)),(new c).loadFile("Data/Gallery_info.txt",[],this.onGalleryInfoLoading.bind(this)),(new c).loadFile("Data/care_info.txt",[],this.onCareInfoLoading.bind(this)),(new c).loadFile("Data/rare_Cat_Level_info.txt",[],this.onRareCatExpInfoLoading.bind(this)),(new c).loadFile("Data/contents_limit_info.txt",[],this.onContentOpenInfoLoading.bind(this)),(new c).loadFile("Data/cash_shop_info.txt",[],this.onCashShopInfoLoading.bind(this)),(new c).loadFile("Data/guide_info.txt",[],this.onGuideInfoLoading.bind(this)),(new c).loadFile("Data/furniture_info.txt",[],this.onFurnitureInfoLoading.bind(this)),(new c).loadFile("Data/furniture_upgrade_info.txt",[],this.onFurnitureUpgradeInfoLoading.bind(this)),(new c).loadFile("Data/quest_info.txt",[],this.onQuestInfoLoading.bind(this)),this._totalFileNum=29,this._loadFileNum=0},preSoundLoadedHandler:function(){this.loadDataHandler(),o.playMusic(o.audioBgmSplash,!0)},loadDataHandler:function(){if(++this._loadFileNum,this._loadingPer1=parseInt(this._loadFileNum/this._totalFileNum*100),this.label.string=this._loadingPer1+"%",this.progressBar.progress=.01*this._loadingPer1,this._loadFileNum==this._totalFileNum){this._dataLoadedFlag=!0;var t=this,e=100;cc.loader.onProgress=function(i,a,s){if(a>=e){e=a;var n=t._loadingPer1+parseInt(i/a*40);t.label.string=n+"%",t.progressBar.progress=.01*n}},cc.director.preloadScene(this._SCENE_NAME,function(){cc.loader.onProgress=null,t.schedule(t.chkLoadedFlag,.1)})}},setLoadedFlag:function(){this._dataLoadedFlag=!0},chkLoadedFlag:function(){this._loadCompFlag=!0,this._dataLoadedFlag&&this._titleCompFlag&&(this.unschedule(this.chkLoadedFlag),this.showStartBtn())},onSettingInfoLoading:function(t,e){0==t?(u.initSettingValue(e),this.loadDataHandler()):cc.error("data table load failed.")},onCharInfoLoading:function(t,e){if(0==t){a._newCatRewardTable=[];for(var i=0;i<e.getRecordNum();i++){var n={};n.coin=parseInt(e.getRecordValue(i,"Get_New_Cat_Coin")),n.cash=parseInt(e.getRecordValue(i,"Get_New_Cat_Cash")),a._newCatRewardTable[i]=n}s.instance.initUnitData(e),this.loadDataHandler()}else cc.error("data table load failed.")},onLocalizationLoading:function(t,e){if(0==t){for(var i=0;i<e.getRecordNum();i++)h.inputData(e.getRecordValue(i,"TextKey"),[e.getRecordValue(i,"ENGLISH"),e.getRecordValue(i,"KOREAN")]);this.loadDataHandler()}},onShopInfoLoading:function(t,e){if(0==t){a._shopPassiveInfoTable=[];for(var i=0;i<e.getRecordNum();i++){var s=new l;s.initData(parseInt(e.getRecordValue(i,"SHOP_IDX")),e.getRecordValue(i,"SHOP_IDX_TWO")),a._shopPassiveInfoTable[i]=s}this.loadDataHandler()}else cc.error("data table load failed.")},onLevelInfoLoading:function(t,e){if(0==t){a._userExpTable=[],a._userLvRewardTable=[];for(var i=0;i<e.getRecordNum();i++){a._userExpTable[i]=parseInt(e.getRecordValue(i,"Accumulate_EXP"));var s={};s.coin=parseInt(e.getRecordValue(i,"RewardCoin")),s.cash=parseInt(e.getRecordValue(i,"RewardCash")),a._userLvRewardTable[i]=s}this.loadDataHandler()}else cc.error("data table load failed.")},onRareCharInfoLoading:function(t,e){if(0==t){for(var i=0;i<e.getRecordNum();i++){var s={};s.coin=parseInt(e.getRecordValue(i,"Get_New_Cat_Coin")),s.cash=parseInt(e.getRecordValue(i,"Get_New_Cat_Cash")),a._newCatRewardTable[i]=s}n.instance.initRareCatData(e),this.loadDataHandler()}else cc.error("data table load failed.")},onSlotInfoLoading:function(t,e){if(0==t){for(var i=0;i<e.getRecordNum();i++){var s={};switch(s.slotType=e.getRecordValue(i,"Slot_Type"),s.slotPrice=parseInt(e.getRecordValue(i,"Price")),s.slotIncrease=parseInt(e.getRecordValue(i,"Increase")),e.getRecordValue(i,"Slot_Type")){case a.Cat_Slot:a._slotInfoCat=s;break;case a.Cat_Hotel:a._slotInfoHotel=s;break;case a.Cat_House:a._slotInfoHouse=s}}u.setDefaultSlot(e),this.loadDataHandler()}else cc.error("data table load failed.")},onCatHouseInfoLoading:function(t,e){if(0==t){a._catHouseTable=[];for(var i=0;i<e.getRecordNum();i++){var s=a.getGalleyType(e.getRecordValue(i,"Gallery_Type")),n=new p;n.initData(parseInt(e.getRecordValue(i,"House_Index")),parseInt(e.getRecordValue(i,"Name_TextKey")),parseInt(e.getRecordValue(i,"Explain_TextKey")),parseInt(e.getRecordValue(i,"Price")),e.getRecordValue(i,"Price_Type"),s),a._catHouseTable[i+1]=n}this.loadDataHandler()}else cc.error("data table load failed.")},onUpgradeInfoLoading:function(t,e){if(0==t){a._normalCatUpgradeTable=[];for(var i=0;i<e.getRecordNum();i++){var s={};s.LevelNo=parseInt(e.getRecordValue(i,"LevelNo")),s.countCat=parseInt(e.getRecordValue(i,"COUNT_CAT")),s.buyCountCat=parseInt(e.getRecordValue(i,"BUY_COUNT_CAT")),s.getSpeedTime=parseFloat(e.getRecordValue(i,"GET_SPEED_TIME")),s.buyGetSpeedTime=parseInt(e.getRecordValue(i,"BUY_GET_SPEED_TIME")),s.increaseCoin=parseInt(e.getRecordValue(i,"INCREASE_COIN")),s.buyCashCoin=parseInt(e.getRecordValue(i,"BUY_CASH_COIN")),s.increaseCoinbuffTime=parseInt(e.getRecordValue(i,"INCREASE_COINBUFF_TIME")),s.buyCashCoinbuffTime=parseInt(e.getRecordValue(i,"BUY_CASH_COINBUFF_TIME")),s.catLvTwoChance=parseInt(e.getRecordValue(i,"CAT_Lv2_CHANCE")),s.buyCashCatLvTwoChance=parseInt(e.getRecordValue(i,"BUY_CASH_CAT_Lv2_CHANCE")),s.mergeLvTwoChance=parseInt(e.getRecordValue(i,"PLUS_Lv2_CAT_COMPOSE")),s.buyCashMergeLvTwoChance=parseInt(e.getRecordValue(i,"BUY_CASH_PLUS_Lv2_CAT_COMPOSE")),s.offlineReward=parseInt(e.getRecordValue(i,"OFFLINE_REWERD")),s.buyCashOfflineReward=parseInt(e.getRecordValue(i,"BUY_CASH_OFFLINE_REWERD")),s.mouseLvUpChance=parseInt(e.getRecordValue(i,"MOUSE_TOY_4Lv_CAT_GET")),s.buyCashMouseLvUpChance=parseInt(e.getRecordValue(i,"BUY_CASH_MOUSE_TOY_4Lv_CAT_GET")),a._normalCatUpgradeTable[i]=s}this.loadDataHandler()}else cc.error("data table load failed.")},onBoxRewardInfoLoading:function(t,e){if(0==t){a._mouseRewardTable=new Array,a._boxRewardTable=new Array;for(var i=0,s=0,n=0,r=0,c=0;c<e.getRecordNum();c++){var o={};switch(o.ItemType=e.getRecordValue(c,"ItemType"),o.ItemValue=parseInt(e.getRecordValue(c,"ItemValue")),o.LimitCount=parseInt(e.getRecordValue(c,"Limit_Count")),e.getRecordValue(c,"BoxType")){case"MOUSE":i+=parseInt(e.getRecordValue(c,"Base_Prob")),n+=parseInt(e.getRecordValue(c,"Item_Prob")),o.BaseProb=i/1e4,o.ItemProb=n/1e4,a._mouseRewardTable.push(o);break;case"BOX":s+=parseInt(e.getRecordValue(c,"Base_Prob")),r+=parseInt(e.getRecordValue(c,"Item_Prob")),o.BaseProb=s/1e4,o.ItemProb=r/1e4,a._boxRewardTable.push(o)}}this.loadDataHandler()}else cc.error("data table load failed.")},onAccessoryInfo:function(t,e){0==t?(r.instance.initAccData(e),this.loadDataHandler()):cc.error("data table load failed.")},onAccessoryOptionInfo:function(t,e){0==t?(r.instance.initAccOptionData(e),this.loadDataHandler()):cc.error("data table load failed.")},onDailyAccessInfoLoading:function(t,e){if(0==t){a._dailyAccessTable=[];for(var i=0;i<e.getRecordNum();i++){var s=a.getPaymentType(e.getRecordValue(i,"ItemType2")),n=new S;s>-1?n.initData(e.getRecordValue(i,"AttendType"),parseInt(e.getRecordValue(i,"GetItem_Time")),a.getPaymentType(e.getRecordValue(i,"ItemType1")),parseInt(e.getRecordValue(i,"ItemCount1")),s,parseInt(e.getRecordValue(i,"ItemCount2"))):n.initData(e.getRecordValue(i,"AttendType"),parseInt(e.getRecordValue(i,"GetItem_Time")),a.getPaymentType(e.getRecordValue(i,"ItemType1")),parseInt(e.getRecordValue(i,"ItemCount1")),s,0),a._dailyAccessTable.push(n)}a._dailyAccessNum=a._dailyAccessTable.length,this.loadDataHandler()}else cc.error("data table load failed.")},onAttendInfoLoading:function(t,e){if(0==t){a._attendInfoTable=[];for(var i=0;i<e.getRecordNum();i++){var s=[e.getRecordValue(i,"AttendType"),a.getPaymentType(e.getRecordValue(i,"ItemType1")),parseInt(e.getRecordValue(i,"ItemCount1")),a.getPaymentType(e.getRecordValue(i,"ItemType2")),parseInt(e.getRecordValue(i,"ItemCount2"))];a._attendInfoTable.push(s)}this.loadDataHandler()}else cc.error("data table load failed")},onPostInfoLoading:function(t,e){if(0==t){a._postInfo=[],a._eventPostInfo=[];for(var i=0;i<e.getRecordNum();i++){var s=a.getPaymentType(e.getRecordValue(i,"TYPE1"));if(""!=e.getRecordValue(i,"TYPE1")&&-1==s)return void cc.error("data table load failed. type1="+s);var n=a.getPaymentType(e.getRecordValue(i,"TYPE2"));if(""!=e.getRecordValue(i,"TYPE2")&&-1==n)return void cc.error("data table load failed. type2="+n);var r=a.getPaymentType(e.getRecordValue(i,"TYPE3"));if(""!=e.getRecordValue(i,"TYPE3")&&-1==r)return void cc.error("data table load failed. type3="+r);var c=a.getPaymentType(e.getRecordValue(i,"TYPE4"));if(""!=e.getRecordValue(i,"TYPE4")&&-1==c)return void cc.error("data table load failed. type4="+c);var o=a.getPaymentType(e.getRecordValue(i,"TYPE5"));if(""!=e.getRecordValue(i,"TYPE5")&&-1==o)return void cc.error("data table load failed. type5="+o);var h=a.getPaymentType(e.getRecordValue(i,"TYPE6"));if(""!=e.getRecordValue(i,"TYPE6")&&-1==h)return void cc.error("data table load failed. type6="+h);var u=0;u="TUTORIAL"==e.getRecordValue(i,"EVENT_TYPE")?a.getPostTutoValue(e.getRecordValue(i,"EVENT_VALUE")):parseInt(e.getRecordValue(i,"EVENT_VALUE"));var l=new d;l.initData(parseInt(e.getRecordValue(i,"Post_Idx")),parseInt(e.getRecordValue(i,"Post_Title_Key")),s,parseInt(e.getRecordValue(i,"VALUE1")),n,parseInt(e.getRecordValue(i,"VALUE2")),r,parseInt(e.getRecordValue(i,"VALUE3")),c,parseInt(e.getRecordValue(i,"VALUE4")),o,parseInt(e.getRecordValue(i,"VALUE5")),h,parseInt(e.getRecordValue(i,"VALUE6")),e.getRecordValue(i,"START_DATE"),e.getRecordValue(i,"END_DATE"),e.getRecordValue(i,"EVENT_TYPE"),u),""!=l.getEventType()?a._eventPostInfo.push(l):a._postInfo.push(l)}this.loadDataHandler()}else cc.error("data table load failed.")},onCouponInfoLoading:function(t,e){if(0==t){a._couponInfo=[],a._specialCouponInfo=[];for(var i=0;i<e.getRecordNum();i++){var s=a.getPaymentType(e.getRecordValue(i,"TYPE1"));if(""!=e.getRecordValue(i,"TYPE1")&&-1==s)return void cc.error("data table load failed. type1="+s);var n=a.getPaymentType(e.getRecordValue(i,"TYPE2"));if(""!=e.getRecordValue(i,"TYPE2")&&-1==n)return void cc.error("data table load failed. type2="+n);var r=a.getPaymentType(e.getRecordValue(i,"TYPE3"));if(""!=e.getRecordValue(i,"TYPE3")&&-1==r)return void cc.error("data table load failed. type3="+r);var c=a.getPaymentType(e.getRecordValue(i,"TYPE4"));if(""!=e.getRecordValue(i,"TYPE4")&&-1==c)return void cc.error("data table load failed. type4="+c);var o=a.getPaymentType(e.getRecordValue(i,"TYPE5"));if(""!=e.getRecordValue(i,"TYPE5")&&-1==o)return void cc.error("data table load failed. type5="+o);var h=a.getPaymentType(e.getRecordValue(i,"TYPE6"));if(""!=e.getRecordValue(i,"TYPE6")&&-1==h)return void cc.error("data table load failed. type6="+h);var u=new g;u.initData(parseInt(e.getRecordValue(i,"Coupon_Idx")),e.getRecordValue(i,"Coupon_Code"),s,parseInt(e.getRecordValue(i,"VALUE1")),n,parseInt(e.getRecordValue(i,"VALUE2")),r,parseInt(e.getRecordValue(i,"VALUE3")),c,parseInt(e.getRecordValue(i,"VALUE4")),o,parseInt(e.getRecordValue(i,"VALUE5")),h,parseInt(e.getRecordValue(i,"VALUE6")),e.getRecordValue(i,"START_DATE"),e.getRecordValue(i,"END_DATE"),e.getRecordValue(i,"EVENT_TYPE")),""!=u.getEventType()?a._specialCouponInfo.push(u):a._couponInfo.push(u)}this.loadDataHandler()}else cc.error("data table load failed.")},onContestLevelLoading:function(t,e){if(0==t){a._contestLvTabel=[];for(var i=0;i<e.getRecordNum();i++){var s=new T;s.initData(parseInt(e.getRecordValue(i,"Contest_Level")),parseInt(e.getRecordValue(i,"Perfect_Stat")),parseInt(e.getRecordValue(i,"Great_Stat")),parseInt(e.getRecordValue(i,"Good_Stat"))),a._contestLvTabel.push(s)}this.loadDataHandler()}else cc.error("data table load failed.")},onContestRewardLoading:function(t,e){if(0==t){a._contestRewardTable=[];for(var i=0;i<e.getRecordNum();i++){var s=a.getPaymentType(e.getRecordValue(i,"TYPE1"));if(""!=e.getRecordValue(i,"TYPE1")&&-1==s)return void cc.error("data table load failed. type1="+s);var n=a.getPaymentType(e.getRecordValue(i,"TYPE2"));if(""!=e.getRecordValue(i,"TYPE2")&&-1==n)return void cc.error("data table load failed. type2="+n);var r=a.getPaymentType(e.getRecordValue(i,"TYPE3"));if(""!=e.getRecordValue(i,"TYPE3")&&-1==r)return void cc.error("data table load failed. type3="+r);var c=a.getPaymentType(e.getRecordValue(i,"TYPE4"));if(""!=e.getRecordValue(i,"TYPE4")&&-1==c)return void cc.error("data table load failed. type4="+c);var o=new A;o.initData(parseInt(e.getRecordValue(i,"Contest_Rank")),parseInt(e.getRecordValue(i,"Rank_Start")),s,parseInt(e.getRecordValue(i,"VALUE1")),n,parseInt(e.getRecordValue(i,"VALUE2")),r,parseInt(e.getRecordValue(i,"VALUE3")),c,parseInt(e.getRecordValue(i,"VALUE4")),e.getRecordValue(i,"VALUE2_PLUS"),parseInt(e.getRecordValue(i,"VALUE3_PLUS"))),a._contestRewardTable.push(o)}this.loadDataHandler()}else cc.error("data table load failed.")},onContestScoreLoading:function(t,e){if(0==t){a._contestScoreTable=[];for(var i=0;i<e.getRecordNum();i++){var s={};s.min=parseInt(e.getRecordValue(i,"Min_Score")),s.max=parseInt(e.getRecordValue(i,"Max_Score")),a._contestScoreTable.push(s)}this.loadDataHandler()}else cc.error("data table load failed.")},onGalleryInfoLoading:function(t,e){if(0==t){a._galleryCatTabel=[],a._galleryAccTabel=[],a._galleryHouseTabel=[];for(var i=0,s=0,n=0,r=0;r<e.getRecordNum();r++){var c=a.getGalleyType(e.getRecordValue(r,"Gallery_Type")),o=a.getPaymentType(e.getRecordValue(r,"Reward_Type")),h=new C;h.initData(parseInt(e.getRecordValue(r,"Gallery_Index")),c,parseInt(e.getRecordValue(r,"Gallery_Name_Key")),o,parseInt(e.getRecordValue(r,"Value"))),c<=100?(i+=1,a._galleryCatTabel.push(h)):c<=200?(s+=1,a._galleryAccTabel.push(h)):(n+=1,a._galleryHouseTabel.push(h))}u.setGalleryMax(i,s,n),this.loadDataHandler()}else cc.error("data table load failed.")},onCareInfoLoading:function(t,e){if(0==t){a._careTabel=[];for(var i=0;i<e.getRecordNum();i++){var s=a.getCareType(e.getRecordValue(i,"Care_Type")),n=a.getPaymentType(e.getRecordValue(i,"Care_Code")),r=a.getPaymentType(e.getRecordValue(i,"Buy_Type")),c=new f;c.initData(parseInt(e.getRecordValue(i,"Care_Index")),s,n,parseInt(e.getRecordValue(i,"Name_TextKey")),parseInt(e.getRecordValue(i,"Account_TextKey")),parseInt(e.getRecordValue(i,"Price")),r,parseInt(e.getRecordValue(i,"Exp_Normal")),parseInt(e.getRecordValue(i,"Exp_Different")),parseInt(e.getRecordValue(i,"Exp_Right"))),a._careTabel.push(c)}this.loadDataHandler()}else cc.error("data table load failed.")},onRareCatExpInfoLoading:function(t,e){if(0==t){a._rareCatExpTable=[];for(var i=0;i<e.getRecordNum();i++)a._rareCatExpTable[i]=parseInt(e.getRecordValue(i,"Cat_Accumulate_EXP"));this.loadDataHandler()}else cc.error("data table load failed.")},onContentOpenInfoLoading:function(t,e){if(0==t){a._contentOpenTable=[];for(var i=0;i<e.getRecordNum();i++){var s=new m,n=a.getContentCode(e.getRecordValue(i,"Contents_Code")),r=a.getContentType(e.getRecordValue(i,"Open_Type"));s.init(n,r,parseInt(e.getRecordValue(i,"Open_Value")),parseInt(e.getRecordValue(i,"Contents_Text_Tittle")),parseInt(e.getRecordValue(i,"Contents_Text_Account"))),a._contentOpenTable[n]=s}this.loadDataHandler()}else cc.error("data table load failed.")},onCashShopInfoLoading:function(t,e){if(0==t){a._cashShopInfoTable=[];for(var i=0;i<e.getRecordNum();i++){var s=a.getPaymentType(e.getRecordValue(i,"TYPE1"));if(""!=e.getRecordValue(i,"TYPE1")&&-1==s)return void cc.error("data table load failed. type1="+s);var n=a.getPaymentType(e.getRecordValue(i,"TYPE2"));if(""!=e.getRecordValue(i,"TYPE2")&&-1==n)return void cc.error("data table load failed. type2="+n);var r=a.getPaymentType(e.getRecordValue(i,"TYPE3"));if(""!=e.getRecordValue(i,"TYPE3")&&-1==r)return void cc.error("data table load failed. type3="+r);var c=a.getPaymentType(e.getRecordValue(i,"TYPE4"));if(""!=e.getRecordValue(i,"TYPE4")&&-1==c)return void cc.error("data table load failed. type4="+c);var o=a.getPaymentType(e.getRecordValue(i,"TYPE5"));if(""!=e.getRecordValue(i,"TYPE5")&&-1==o)return void cc.error("data table load failed. type5="+o);var h=a.getPaymentType(e.getRecordValue(i,"TYPE6"));if(""!=e.getRecordValue(i,"TYPE6")&&-1==h)return void cc.error("data table load failed. type6="+h);var u=new _;u.initData(parseInt(e.getRecordValue(i,"ItemPrimaryKey")),parseInt(e.getRecordValue(i,"ItemTextKey")),e.getRecordValue(i,"Product_ID"),parseInt(e.getRecordValue(i,"BgCate")),parseInt(e.getRecordValue(i,"Cate")),parseInt(e.getRecordValue(i,"BuyLimit")),parseInt(e.getRecordValue(i,"WeekType")),parseInt(e.getRecordValue(i,"DailyReset")),parseInt(e.getRecordValue(i,"Chain")),a.getPaymentType(e.getRecordValue(i,"PRICE_TYPE")),parseInt(e.getRecordValue(i,"PRICE")),e.getRecordValue(i,"PRICE_E"),parseInt(e.getRecordValue(i,"BONUS_RATE")),s,parseInt(e.getRecordValue(i,"VALUE1")),n,parseInt(e.getRecordValue(i,"VALUE2")),r,parseInt(e.getRecordValue(i,"VALUE3")),c,parseInt(e.getRecordValue(i,"VALUE4")),o,parseInt(e.getRecordValue(i,"VALUE5")),h,parseInt(e.getRecordValue(i,"VALUE6")),parseInt(e.getRecordValue(i,"AD_PASS")),parseInt(e.getRecordValue(i,"EventType")),parseInt(e.getRecordValue(i,"NEW")),parseInt(e.getRecordValue(i,"BEST"))),a._cashShopInfoTable[i]=u}this.loadDataHandler()}else cc.error("data table load failed.")},onGuideInfoLoading:function(t,e){if(0==t){a._guideInfoTable=[];for(var i=0;i<e.getRecordNum();i++){var s=new b,n=a.getGuideType(e.getRecordValue(i,"Guide_Code")),r=a.getPaymentType(e.getRecordValue(i,"Reward_Type"));s.initData(parseInt(e.getRecordValue(i,"Guide_Key")),n,parseInt(e.getRecordValue(i,"Name_TextKey")),parseInt(e.getRecordValue(i,"Guide_Count")),r,parseInt(e.getRecordValue(i,"Reward_Value"))),a._guideInfoTable[i]=s}this.loadDataHandler()}else cc.error("data table load failed.")},onFurnitureInfoLoading:function(t,e){if(0==t){a._furnitureInfoTable=[];for(var i=0;i<e.getRecordNum();i++){var s=new M,n=a.getPaymentType(e.getRecordValue(i,"Price_Type")),r=a.getGalleyType(e.getRecordValue(i,"Gallery_Type")),c=a.getPaymentType(e.getRecordValue(i,"Produce_Type"));s.initData(parseInt(e.getRecordValue(i,"furniture_Index")),parseInt(e.getRecordValue(i,"Name_TextKey")),parseInt(e.getRecordValue(i,"Explain_TextKey")),n,parseInt(e.getRecordValue(i,"Price")),c,r),a._furnitureInfoTable[i]=s}this.loadDataHandler()}else cc.error("data table load failed.")},onFurnitureUpgradeInfoLoading:function(t,e){if(0==t){a._furnitureUpgradeTable=Array.from(Array(4),function(){return Array()});for(var i=0;i<e.getRecordNum();i++)for(var s=0;s<a._furnitureInfoTable.length;s++){var n=new y,r=parseInt(e.getRecordValue(i,"Production_Count_"+(s+1))),c=parseInt(e.getRecordValue(i,"Price_"+(s+1))),o=parseInt(e.getRecordValue(i,"Production_Time_"+(s+1))),h=parseInt(e.getRecordValue(i,"Save_Max_"+(s+1)));n.initData(r,c,o,h),a._furnitureUpgradeTable[s][i]=n}this.loadDataHandler()}else cc.error("data table load failed.")},onQuestInfoLoading:function(t,e){if(0==t){a._questInfoTabel=[],a._questRate=[];for(var i=0,s=0;s<e.getRecordNum();s++){i+=e.getRecordValue(s,"Quest_Open_Probability")/1e4,a._questRate[s]=i;var n=new P;n.initData(parseInt(e.getRecordValue(s,"Quest_Code")),a.getQuestType(e.getRecordValue(s,"Quest_Code")),parseInt(e.getRecordValue(s,"Name_TextKey")),parseInt(e.getRecordValue(s,"Explain_Text_Key")),parseInt(e.getRecordValue(s,"Quest_Count")),a.getPaymentType(e.getRecordValue(s,"Reward_Type")),parseInt(e.getRecordValue(s,"Reward_Value")),parseInt(e.getRecordValue(s,"Quest_Point"))),a._questInfoTabel.push(n)}a._questRate[a._questRate.length-1]=1,this.loadDataHandler()}else cc.error("data table load failed.")},showStartBtn:function(){this.progressBar.node.active=!1,this.label.node.active=!1,this.startBtn.active=!0},startBtnAni:function(){this.startBtn.runAction(cc.sequence(cc.fadeOut(1),cc.fadeIn(1),cc.callFunc(null,this)))},clickStartBtn:function(){a.loadData(),cc.director.loadScene(this._SCENE_NAME)},OnInitBtn:function(){a.initData(),cc.director.loadScene(this._SCENE_NAME)}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",CareData:"CareData",CashShopData:"CashShopData",CatHouseData:"CatHouseData",ContentOpenData:"ContentOpenData",ContestLvData:"ContestLvData",ContestRewardData:"ContestRewardData",CouponData:"CouponData",DailyAccessData:"DailyAccessData",DataMgr:"DataMgr",FurnitureData:"FurnitureData",FurnitureUpgradeData:"FurnitureUpgradeData",GalleryData:"GalleryData",Global:"Global",GuideData:"GuideData",LocaleMgr:"LocaleMgr",PostData:"PostData",QuestData:"QuestData",RareCatMgr:"RareCatMgr",ShopData:"ShopData",SoundMgr:"SoundMgr",TSVFileHandler:"TSVFileHandler",UnitMgr:"UnitMgr"}],LocaleMgr:[function(t,e,i){"use strict";cc._RF.push(e,"1d078HjErJJjq2LLDT5Tiri","LocaleMgr"),e.exports={OK:1,CANCEL:2,CLOSE:3,GOLD:201,GEM:202,RUNE:203,HEART:204,GHEART:205,SOULSTONE:221,ADS:206,_localeCode:1,_stringDic:[],_koFont:cc.Font,ENGLISH:0,KOREAN:1,GERMAN:2,FRENCH:3,VIETNAMESE:4,THAI:5,SIMPLIFIED_CHINESE:6,TRADITIONAL_CHINESE:7,JAPANESE:8,SPANISH:9,RUSSIAN:10,PORTUGUESE:11,INDONESIAN:12,FONT_TITLE_ENGLISH:95,FONT_TITLE_KOREAN:85,FONT_RIBBON_ENGLISH:48,FONT_RIBBON_KOREAN:44,LANG_STR:["English","\ud55c\uad6d\uc5b4","Deutsch","Fran\xe7ais","Ti\u1ebfng vi\u1ec7t","\u0e44\u0e17\u0e22","\u7b80\u4f53\u4e2d\u6587","\u7e41\u9ad4\u4e2d\u6587","\u65e5\u672c\u8a9e","Espa\xf1ol","\u0440\u0443\u0441\u0441\u043a\u0438\u0439","Portugu\xeas","Indonesia"],init:function(t){switch(this._koFont=t,cc.sys.language){case cc.sys.LANGUAGE_KOREAN:this._localeCode=this.KOREAN;break;case cc.sys.LANGUAGE_GERMAN:this._localeCode=this.GERMAN;break;case cc.sys.LANGUAGE_FRENCH:this._localeCode=this.FRENCH;break;case cc.sys.LANGUAGE_CHINESE:this._localeCode=this.SIMPLIFIED_CHINESE;break;case cc.sys.LANGUAGE_JAPANESE:this._localeCode=this.JAPANESE;break;case cc.sys.LANGUAGE_PORTUGUESE:this._localeCode=this.PORTUGUESE;break;default:this._localeCode=this.ENGLISH}},getLocaleFont:function(){switch(this._localeCode){case this.ENGLISH:case this.KOREAN:return this._koFont}return null},getTitleFontSize:function(){switch(this._localeCode){case this.ENGLISH:return this.FONT_TITLE_ENGLISH;case this.KOREAN:return this.FONT_TITLE_KOREAN}return null},getRibbonFontSize:function(){switch(this._localeCode){case this.ENGLISH:return this.FONT_RIBBON_ENGLISH;case this.KOREAN:return this.FONT_RIBBON_KOREAN}return null},getLocaleCode:function(){return this._localeCode},setLocaleCode:function(t){this._localeCode=t},inputData:function(t,e){this._stringDic[t]=e},getString:function(t,e,i,a,s,n,r){if(void 0==e)return this._stringDic[t][this._localeCode];var c=this._stringDic[t][this._localeCode];return c=(c=(c=c.replace(e,i)).replace(a,s)).replace(n,r)},getLocaleString:function(t,e,i,a,s,n,r,c){if(void 0==i)return this._stringDic[e][t];var o=this._stringDic[e][t];return o=(o=(o=o.replace(i,a)).replace(s,n)).replace(r,c)},getNowLangStr:function(){return this.LANG_STR[this._localeCode]}},cc._RF.pop()},{}],LuckyObj:[function(t,e,i){"use strict";cc._RF.push(e,"c31f4b5i1VKq4+nCQG7dODV","LuckyObj"),cc.Class({extends:cc.Component,properties:{_offsetY:50,_playSceneMgr:null},playAni:function(t){this._playSceneMgr=t,this.node.y+=this._offsetY,this.node.active=!0,this.node.runAction(cc.moveBy(1.5,cc.v2(0,30)).easing(cc.easeBackOut())),this.node.runAction(cc.sequence(cc.fadeIn(.3),cc.delayTime(.9),cc.fadeOut(.3),cc.callFunc(this.expUpAniEnd,this)))},hide:function(){this._playSceneMgr.pushLuckyObj(this.node),this.node.stopAllActions(),this.node.active=!1}}),cc._RF.pop()},{}],MergeAniObj:[function(t,e,i){"use strict";cc._RF.push(e,"254beCMd6JOAb9lffah7SDa","MergeAniObj");var a=t("SoundMgr"),s=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{unit0:cc.Node,unit1:cc.Node,mergeEff:sp.Skeleton,_exp:0},start:function(){},actAni:function(t,e){this._exp=e,this.node.active=!0,this.unit0.active=!0,this.unit1.active=!0,this.unit0.getComponent(cc.Sprite).spriteFrame=t,this.unit1.getComponent(cc.Sprite).spriteFrame=t,this.unit0.x=0,this.unit0.y=0,this.unit1.x=0,this.unit1.y=0,this.unit0.runAction(cc.sequence(cc.moveTo(.2,-80,0).easing(cc.easeCircleActionOut()),cc.moveTo(.2,0,0).easing(cc.easeCircleActionIn()))),this.unit1.runAction(cc.sequence(cc.moveTo(.2,80,0).easing(cc.easeCircleActionOut()),cc.moveTo(.2,0,0).easing(cc.easeCircleActionIn()),cc.callFunc(this.effAni,this))),this.scheduleOnce(this.hide,.8)},effAni:function(){this.unit0.active=!1,this.unit1.active=!1,this.mergeEff.node.active=!0,this.mergeEff.setAnimation(0,"merge_eff",!1);var t=cc.v2(this.node.x,this.node.y);s.instance.expAni(t,this._exp),a.playSound(a.audioMergeCat)},hide:function(){this.unit1.stopAllActions(),this.mergeEff.node.active=!1,this.node.active=!1}}),cc._RF.pop()},{PlaySceneMgr:"PlaySceneMgr",SoundMgr:"SoundMgr"}],MergeBoardMgr:[function(t,e,i){"use strict";cc._RF.push(e,"4abd4t8dgdPnLonSR/pyu3q","MergeBoardMgr");var a=t("Global"),s=t("DataMgr"),n=t("UnitMgr"),r=t("RareCatMgr"),c=(t("PlaySceneMgr"),t("PopupMgr")),o=t("SoundMgr"),h=t("TutoMgr");cc.Class({extends:cc.Component,properties:{atlasChar:cc.SpriteAtlas,mergeObjPrefab:cc.Prefab,mergeAniPrefab:cc.Prefab,moveUnitPrefab:cc.Prefab,_PlaySceneMgr:null,_dragUnit:cc.Node,_moveUnitArr:[cc.Node],_moveUnitIdx:0,_MOVE_UNIT_NUM:5,_mergeAniArr:null,_mergeAniIdx:0,_MERGE_ANI_NUM:5,_mergeObjArr:null,_mergeScArr:null,_startPos:null,_dragTargetIdx:-1,_dragFlag:!1,_dragWarnTargetIdx:-1,_activeMergeSlotNum:12,_SLOT_SX:0,_SLOT_SY:0,_SLOT_WIDTH:0,_SLOT_HEIGHT:0,_SLOT_ROW:3,_trashPos:null,_mergeRareState:0,_MERGE_NEW_RARE_BOARD:0,_MERGE_NEW_RARE_HOTEL:1,_MERGE_OLD_RARE:2,_MERGE_FAIL_FULL:3},start:function(){},init:function(t){this._PlaySceneMgr=t,this._SLOT_SX=-260,this._SLOT_SY=250,this._SLOT_WIDTH=175,this._SLOT_HEIGHT=160,a.RESOLUTION_SET==a.RESOLUTION_LOW_HEIGHT&&(this._SLOT_HEIGHT=140),this._mergeObjArr=new Array,this._mergeScArr=new Array;for(var e=0;e<a.MAX_MERGEOBJ_NUM;++e){var i=cc.instantiate(this.mergeObjPrefab);this._mergeObjArr.push(i),this._mergeScArr[e]=i.getComponent("MergeObj"),this.node.addChild(i),i.x=this._SLOT_SX+.5*this._SLOT_WIDTH+Math.floor(e%3)*this._SLOT_WIDTH,i.y=this._SLOT_SY-.5*this._SLOT_HEIGHT+Math.floor(e/3)*-this._SLOT_HEIGHT,this._mergeScArr[e].init(e,this._PlaySceneMgr)}for(this._mergeAniArr=[],e=0;e<this._MERGE_ANI_NUM;++e){var s=cc.instantiate(this.mergeAniPrefab);this._mergeAniArr.push(s),this.node.addChild(s),s.active=!1}for(this._moveUnitArr=[],e=0;e<this._MOVE_UNIT_NUM;++e){var n=cc.instantiate(this.moveUnitPrefab);this._moveUnitArr.push(n),this.node.addChild(n),n.active=!1}this._dragUnit=cc.instantiate(this.moveUnitPrefab),this.node.addChild(this._dragUnit),this._dragUnit.active=!1,this._dragTargetIdx=-1,this._dragWarnTargetIdx=-1,this._dragFlag=!1},destroyTemp:function(){this.removeMergeTouchEvent()},actStart:function(){this.addMergeTouchEvent()},addMergeTouchEvent:function(){for(var t=0;t<a.MAX_MERGEOBJ_NUM;++t)this._mergeObjArr[t].getChildByName("hit").on(cc.Node.EventType.TOUCH_START,this.touchStartHandler,this),this._mergeObjArr[t].getChildByName("hit").on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveHandler,this),this._mergeObjArr[t].getChildByName("hit").on(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this._mergeObjArr[t].getChildByName("hit").on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndHandler,this)},removeMergeTouchEvent:function(){for(var t=0;t<a.MAX_MERGEOBJ_NUM;++t)this._mergeObjArr[t].getChildByName("hit").off(cc.Node.EventType.TOUCH_START,this.touchStartHandler,this),this._mergeObjArr[t].getChildByName("hit").off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveHandler,this),this._mergeObjArr[t].getChildByName("hit").off(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this._mergeObjArr[t].getChildByName("hit").off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndHandler,this)},touchStartHandler:function(t){if(!this._dragFlag){var e=t.getTouches()[0].getLocation();this._startPos=this.node.convertToNodeSpaceAR(e),this._dragTargetIdx=t.target.parent.getComponent("MergeObj").getSlotIdx(),o.playSound(o.audioBtn0)}},touchMoveHandler:function(t){var e=t.getTouches()[0].getLocation(),i=this.node.convertToNodeSpaceAR(e);if(1==this._dragFlag)if(this._dragUnit.position=i,i.y>this._BATTLE_Y);else this.getSlotIdxForPos(i);else if((Math.abs(this._startPos.x-i.x)>10||Math.abs(this._startPos.y-i.y)>10)&&this._mergeScArr[this._dragTargetIdx].isTouchable())if(1==s.isMergeSlotUnitDrag(this._dragTargetIdx)){this._dragUnit.active=!0;var a=s.getMergeSlotGradeData(this._dragTargetIdx),r=n.instance.getUnitSpriteNameForGrade(a);cc.log("unitName : "+r);var c=n.instance.getUnitThumbPosGrade(a),o=this._PlaySceneMgr.getAniCatSprite(a);this._dragUnit.getComponent("MoveUnitObj").setThumb(o,c[0],c[1]),this._dragUnit.position=i,this._dragFlag=!0,this._mergeScArr[this._dragTargetIdx].setTouchable(!1),this.chkMergeableUnit(!0)}else this._dragWarnTargetIdx!=this._dragTargetIdx&&(this._dragWarnTargetIdx=this._dragTargetIdx)},touchEndHandler:function(t){var e=t.getTouches()[0].getLocation(),i=this.node.convertToNodeSpaceAR(e);if(1==this._dragFlag){this._dragFlag=!1,this._dragUnit.active=!1;var r=!0;this.chkMergeableUnit(!1);var c=this.getSlotIdxForPos(i);if(c>-1&&c!=this._dragTargetIdx){var o=s.getMergeSlotGradeData(c);if(0==o&&c<this._activeMergeSlotNum){s.setMergeSlotGradeData(c,s.getMergeSlotGradeData(this._dragTargetIdx)),this._mergeScArr[c].setObj(s.getMergeSlotGradeData(this._dragTargetIdx)),s.setMergeSlotGradeData(this._dragTargetIdx,0),this._mergeScArr[this._dragTargetIdx].setObj(0),this._mergeScArr[this._dragTargetIdx].setTouchable(!0),r=!1;var u=this._mergeScArr[this._dragTargetIdx].getHaveCoin(),l=this._mergeScArr[this._dragTargetIdx].getCoinTimer();this._mergeScArr[c].setHaveCoin(u),this._mergeScArr[c].setCoinTimer(l)}else if(o==s.getMergeSlotGradeData(this._dragTargetIdx)&&s.getMergeSlotGradeData(this._dragTargetIdx)<=a.UNIT_GRADEUP_MAX){var _=1;if(-1==s.getTutoProc(h.TUTO_TYPE_GALLERY)){var p=s.getUserBuyMergeLv2();if(s.getNormalCatUpgradeTable(p).mergeLvTwoChance/1e4>Math.random()){_+=1;var d=this._mergeObjArr[c].position;this._PlaySceneMgr.luckyAni(d)}}var g=o+_;if(this.settingMergeUnit(c,g)){var S=n.instance.getUnitDataGrade(o).getExp();s.addUserExp(S),this.showMergeAni(o,this._mergeScArr[c].getCharPos(),S),s.setMergeSlotGradeData(this._dragTargetIdx,0),this._mergeScArr[this._dragTargetIdx].setObj(0),this._mergeScArr[this._dragTargetIdx].setTouchable(!0),r=!1,s.saveData()}}else if(s.getMergeSlotGradeData(c)>0){var T=s.getMergeSlotGradeData(c);s.setMergeSlotGradeData(c,s.getMergeSlotGradeData(this._dragTargetIdx)),this._mergeScArr[c].setObj(s.getMergeSlotGradeData(this._dragTargetIdx),a.ACT_UNIT_DROP_ANI),s.setMergeSlotGradeData(this._dragTargetIdx,T),this._mergeScArr[this._dragTargetIdx].setObj(T),this.showMoveUnit(.2,T,this._mergeScArr[c].getCharPos(),this._mergeScArr[this._dragTargetIdx].getCharPos()),this._mergeScArr[this._dragTargetIdx].setTouchable(!1),this._mergeScArr[this._dragTargetIdx].setDelayReset(.2),r=!1;var A=this._mergeScArr[this._dragTargetIdx].getHaveCoin(),C=this._mergeScArr[c].getHaveCoin(),f=this._mergeScArr[this._dragTargetIdx].getCoinTimer(),m=this._mergeScArr[c].getCoinTimer();this._mergeScArr[c].setHaveCoin(A),this._mergeScArr[c].setCoinTimer(f),this._mergeScArr[this._dragTargetIdx].setHaveCoin(C),this._mergeScArr[this._dragTargetIdx].setCoinTimer(m)}}1==r&&(this.showMoveUnit(.3,s.getMergeSlotGradeData(this._dragTargetIdx),this._dragUnit.position,this._mergeScArr[this._dragTargetIdx].getCharPos()),this._mergeScArr[this._dragTargetIdx].setDelayReset(.3))}this._dragTargetIdx=-1,this._dragWarnTargetIdx=-1},settingMergeUnit:function(t,e){if(e>10){e=this._PlaySceneMgr.getRareCatGrade(),cc.log("Grade : "+e);var i=s.getEnabledSlot(),h=i[0],u=i[1],l=s.getNewCatBool(e),_=!1;switch(_=null!=h,!l&&_?this._mergeRareState=this._MERGE_NEW_RARE_BOARD:l||_?l&&(this._mergeRareState=this._MERGE_OLD_RARE):this._mergeRareState=this._MERGE_NEW_RARE_HOTEL,this._mergeRareState){case this._MERGE_NEW_RARE_BOARD:s.setRareSlotNum(h,u.houseIndex,e),s.setRareCat(e,h),this._PlaySceneMgr.updateRareBoard(h),this.successMergeNew(e),this.successMergeCommon(t,e),o.playSound(o.audioMergeCat2);break;case this._MERGE_NEW_RARE_HOTEL:this._PlaySceneMgr.getNewRareCat(e),this.successMergeNew(e),this.successMergeCommon(t,e),o.playSound(o.audioMergeCat2);break;case this._MERGE_OLD_RARE:o.playSound(o.audioMergeCat2);var p=r.instance.getRareCatDataGrade(e);c.instance.schedulePopup(c.POPUP_OVERLAP,p,.8),s.setMergeSlotGradeData(t,0),this._mergeScArr[t].setObj(0),this._mergeScArr[t].setTouchable(!0)}this._PlaySceneMgr.chkGuide(a.GUIDE_RARE_CAT_MADE)}else{if(this._mergeScArr[t].updateActiveUnit(!1),this._mergeScArr[t].setObjDelay(.4),s.setMergeSlotGradeData(t,e),!s.getNewCatBool(e)){s.setNewCatBool(e);p=n.instance.getUnitDataGrade(e);c.instance.schedulePopup(c.POPUP_NEWCAT,p,.8),s.addCoin(p.getNewRewardCoin()),s.addCashCoin(p.getNewRewardCash()),this._PlaySceneMgr.chkGalleryNew()}o.playSound(o.audioMergeCat2),this.setNormalPageCoin(),this.chkGuideNormal(e)}return this._PlaySceneMgr.chkGuide(a.GUIDE_NORMAL_CAT_MARGE),s.incQuestCount(a.QUEST_NORMAL_CAT_MERGE,1),s.saveData(),!0},successMergeNew:function(t){this._PlaySceneMgr.viewNewCatIcon(),s.setNewCatBool(t);var e=r.instance.getRareCatDataGrade(t);c.instance.schedulePopup(c.POPUP_NEWCAT,e,.8),this._PlaySceneMgr.chkGalleryNew()},successMergeCommon:function(t,e){s.setMergeSlotGradeData(t,0),this._mergeScArr[t].setObj(0),this._mergeScArr[t].setTouchable(!0);var i=r.instance.getRareCatDataGrade(e);s.addCoin(i.getNewRewardCoin()),s.addCashCoin(i.getNewRewardCash()),s.getNowMaxUnitGrade()<e&&s.setNowMaxUnitGrade(e)},chkGuideNormal:function(t){switch(this._PlaySceneMgr.getGuideType()){case a.GUIDE_NORMAL_CAT_4LV_MADE:4==t&&s.plusUserGuideCount()&&this._PlaySceneMgr.updateGuide();break;case a.GUIDE_NORMAL_CAT_6LV_MADE:6==t&&s.plusUserGuideCount()&&this._PlaySceneMgr.updateGuide();break;case a.GUIDE_NORMAL_CAT_8LV_MADE:8==t&&s.plusUserGuideCount()&&this._PlaySceneMgr.updateGuide();break;case a.GUIDE_NORMAL_CAT_10LV_MADE:10==t&&s.plusUserGuideCount()&&this._PlaySceneMgr.updateGuide()}},tutoTouchStartHandler:function(t,e){if(!this._dragFlag){var i=t.getTouches()[0].getLocation();this._startPos=this.node.convertToNodeSpaceAR(i),2==e&&(this._dragTargetIdx=1)}},tutoTouchEndHandler:function(t,e){var i=t.getTouches()[0].getLocation(),r=this.node.convertToNodeSpaceAR(i),c=!1;if(1==this._dragFlag){this._dragFlag=!1,this._dragUnit.active=!1;var o=!0;this.chkMergeableUnit(!1);var h=this.getSlotIdxForPos(r),u=s.getMergeSlotGradeData(h);if(h>-1&&h!=this._dragTargetIdx&&u==s.getMergeSlotGradeData(this._dragTargetIdx)&&s.getMergeSlotGradeData(this._dragTargetIdx)<=a.UNIT_GRADEUP_MAX){var l=u+1;if(this.settingMergeUnit(h,l)){var _=n.instance.getUnitDataGrade(u).getExp();s.addUserExp(_),this.showMergeAni(u,this._mergeScArr[h].getCharPos(),_),s.setMergeSlotGradeData(this._dragTargetIdx,0),this._mergeScArr[this._dragTargetIdx].setObj(0),this._mergeScArr[this._dragTargetIdx].setTouchable(!0),o=!1,s.saveData(),c=!0}}1==o&&(this.showMoveUnit(.3,s.getMergeSlotGradeData(this._dragTargetIdx),this._dragUnit.position,this._mergeScArr[this._dragTargetIdx].getCharPos()),this._mergeScArr[this._dragTargetIdx].setDelayReset(.3))}return this._dragTargetIdx=-1,c},showMergeAni:function(t,e,i){var a=this._mergeAniArr[this._mergeAniIdx];a.position=e;var s=this._PlaySceneMgr.getAniCatSprite(t);a.getComponent("MergeAniObj").actAni(s,i),++this._mergeAniIdx,this._mergeAniIdx>=this._MERGE_ANI_NUM&&(this._mergeAniIdx=0)},showMoveUnit:function(t,e,i,a){var s=this._moveUnitArr[this._moveUnitIdx];s.stopAllActions();var r=n.instance.getUnitThumbPosGrade(e);s.getComponent("MoveUnitObj").setThumb(this.atlasChar.getSpriteFrame(n.instance.getUnitSpriteNameForGrade(e)),r[0],r[1]),s.position=i,s.active=!0,s.runAction(cc.sequence(cc.moveTo(t,a).easing(cc.easeCircleActionOut()),cc.callFunc(this.hideMoveUnit,this,s))),++this._moveUnitIdx,this._moveUnitIdx>=this._MOVE_UNIT_NUM&&(this._moveUnitIdx=0)},hideMoveUnit:function(t){t.active=!1},newUnitAchievement:function(){switch(a.PLATFORM){case a.PLATFORM_ANDROID:case a.PLATFORM_IOS:case a.PLATFORM_ONE:switch(tempGrade+1){case 5:case 10:case 15:case 20:case 25:case 30:case 35:SdkboxMgr.submitAchievements("newunit-"+(tempGrade+1))}switch(tempGrade+1){case 2:case 3:case 4:case 5:case 10:case 15:case 20:case 25:case 30:case 35:case 38:case 40:case 42:case 44:case 46:case 47:case 48:s.SingularLogEvent(a.SINGULAR_NEWUNIT_+(tempGrade+1)+"_S")}}},mergeUnitAchievement:function(){switch(a.PLATFORM){case a.PLATFORM_ANDROID:case a.PLATFORM_IOS:case a.PLATFORM_ONE:switch(s.getPlayMergeUnit()){case 100:case 300:case 800:case 2e3:SdkboxMgr.submitAchievements("merge-"+s.getPlayMergeUnit())}}},chkMergeableUnit:function(t){if(t)for(var e=s.getMergeSlotGradeData(this._dragTargetIdx),i=0;i<this._activeMergeSlotNum;++i)s.getMergeSlotGradeData(i)==e&&i!=this._dragTargetIdx&&s.getMergeSlotGradeData(i)<=a.UNIT_GRADEUP_MAX&&this._mergeScArr[i].setMergeable(!0);else for(i=0;i<this._activeMergeSlotNum;++i)this._mergeScArr[i].setMergeable(!1)},getSlotIdxForPos:function(t){var e=-1,i=Math.floor((this._SLOT_SY-t.y+50)/this._SLOT_HEIGHT),a=Math.floor((t.x-this._SLOT_SX)/this._SLOT_WIDTH);return a>=0&&a<=this._SLOT_ROW-1&&i>=0&&i<=3&&(e=i*this._SLOT_ROW+a),e},chkRolloverUnit:function(t,e,i){if(t){for(var n=!1,r=0;r<this._activeMergeSlotNum;++r)r==e&&r!=i?(this._mergeScArr[r].setRollover(!0),s.getMergeSlotGradeData(e)>a.UNIT_GRADEUP_MAX&&this._mergeScArr[r].getMergeableOver()&&(n=!0)):this._mergeScArr[r].setRollover(!1);n?this._dragUnit.getComponent("MoveUnitObj").setSoulstone(!0,-soulstoneNum):this._dragUnit.getComponent("MoveUnitObj").setSoulstone(!1)}else{for(r=0;r<this._activeMergeSlotNum;++r)this._mergeScArr[r].setRollover(!1);this._dragUnit.getComponent("MoveUnitObj").setSoulstone(!1)}},makeUnit:function(t,e){var i=s.getEmptyMergeSlot();if(i>-1){if(s.setMergeSlotGradeData(i,t),cc.log("psy. makeUnit!!!"),this._mergeScArr[i].createObj(t),this._PlaySceneMgr.chkGuide(a.GUIDE_PRODUCTION),this._PlaySceneMgr.getGameState()==this._PlaySceneMgr.GAME_STATE_PLAY){var n=null;switch(Math.floor(5*Math.random())){case 0:n=o.audioCatBig1;break;case 1:n=o.audioCatBig2;break;case 2:n=o.audioCatBig3;break;case 3:n=o.audioCatSmall1;break;case 4:n=o.audioCatSmall2}o.playSound(n)}if(this.setNormalPageCoin(),e){var r=this._mergeObjArr[i].position;this._PlaySceneMgr.luckyAni(r)}return!0}return cc.log("\ube48\uc2ac\ub86f \uc5c6\uc74c!!!"),!1},startBuffFood:function(){for(var t=0;t<a.MAX_MERGEOBJ_NUM;++t)this._mergeScArr[t].startBuffFood()},endBuffFood:function(){for(var t=0;t<a.MAX_MERGEOBJ_NUM;++t)this._mergeScArr[t].endBuffFood()},calSecondAddCoin:function(){for(var t=0,e=0;e<this._activeMergeSlotNum;e++)0!=this._mergeScArr[e].getUnitGrade()&&(t+=this._mergeScArr[e].getPerSecondGetCoin());return t},setNormalPageCoin:function(){this._PlaySceneMgr.setNormalPageCoin(this.calSecondAddCoin())},getUnitSc:function(t){return this._mergeScArr[t]}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr",UnitMgr:"UnitMgr"}],MergeCharObj:[function(t,e,i){"use strict";cc._RF.push(e,"2f44efVNIFPM7yh02I70NkZ","MergeCharObj"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],MergeObj:[function(t,e,i){"use strict";cc._RF.push(e,"4311c2GmtlLLqCSRVmgM3iM","MergeObj");var a=t("DataMgr"),s=t("Global"),n=t("UnitMgr");t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{unitSkeleton:sp.Skeleton,effectSkeleton:sp.Skeleton,buffFood:sp.Skeleton,mergeableEff:sp.Skeleton,numLabel:cc.Label,numLabelBg:cc.Node,slotBg:cc.Sprite,charNode:cc.Node,charSprite:cc.Node,numNode:cc.Node,_unitData:null,_mergeCoin:0,_haveCoin:0,_getCoin:0,_getCoinTime:0,_useGetCoinTime:0,_coinTimer:0,_tempCoin:0,_PlaySceneMgr:null,_aniName:null,_unitGrade:-1,_slotIdx:0,_touchable:!0,_sumcoin:0,_rolloverFlag:!1,_colorGray:cc.Color,_colorWhite:cc.Color},start:function(){},init:function(t,e){var i=this;this._PlaySceneMgr=e,this._slotIdx=t,this._rolloverFlag=!1,this.updateObj(),this.unitSkeleton.setEventListener(function(t,e){"endAni"==e.data.name&&(i._PlaySceneMgr.addCoin(Math.round(i._getCoin),i.node.position),i.unitSkeleton.setAnimation(0,"idle",!0))}),this.effectSkeleton.setCompleteListener(function(t){i.effectSkeleton.node.active=!1})},updateObj:function(){this.setObj(a.getMergeSlotGradeData(this._slotIdx))},createObj:function(t){this._unitGrade=t,this._unitData=n.instance.getUnitDataGrade(this._unitGrade),this.effectSkeleton.node.active=!0,this.effectSkeleton.setAnimation(0,"appear_eff",!1),this.unitSkeleton.node.active=!0,this.unitSkeleton.node.scale=0,this.unitSkeleton.node.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.viewObj,this))),this.setObj(t)},setObj:function(t){this._unitGrade=t,-1==t?(this.unitSkeleton.clearTrack(0),this.unitSkeleton.node.active=!1,this.numLabel.node.active=!1):0==t||void 0==t||null==t?(this.unitSkeleton.clearTrack(0),this.unitSkeleton.node.active=!1,this.numLabel.node.active=!1,this.buffFood.clearTrack(0),this.unschedule(this.startAddCoin),this.endBuffFood()):(this._unitData=n.instance.getUnitDataGrade(this._unitGrade),this.unitSkeleton.node.active=!0,this.unitSkeleton.skeletonData=this._unitData.getSpineData(),this.unitSkeleton.setSkin(this._unitData.getSpineSkin()),this.actAni(this._unitData.getSpineAni(),!0),this._sumcoin=0,this._coinTimer=0,this._haveCoin=0,this.unitSkeleton.node.active=!0,this.numLabel.node.active=!0,this.numLabel.string=this._unitGrade,this._aniName=this._unitData.getSpineAni(),this.updateActiveUnit(!0),this._getCoin=this._unitData.getGetCoin(),this._getCoinTime=this._unitData.getGetCoinTime(),this._useGetCoinTime=this._getCoinTime,this._mergeCoin=this._unitData.getMergeCoin(),this._PlaySceneMgr.getAdsCatBuff()==this._PlaySceneMgr.ADS_BUFF_ON&&this.startBuffFood())},viewObj:function(){this._sumcoin=0,this._coinTimer=0,this._haveCoin=0,this.unitSkeleton.node.active=!0,this.numLabel.node.active=!0,this.numLabel.string=this._unitGrade,this._aniName=this._unitData.getSpineAni(),this.updateActiveUnit(!0),this._getCoin=this._unitData.getGetCoin(),this._getCoinTime=this._unitData.getGetCoinTime(),this._mergeCoin=this._unitData.getMergeCoin()},startAddCoin:function(){this._coinTimer++,this._coinTimer>=this._useGetCoinTime&&(this.actAni(this._aniName,!1),this._coinTimer=0)},actAni:function(t,e){e?this.unitSkeleton.setAnimation(0,"idle",!0):this.unitSkeleton.setAnimation(0,t,!1)},getSlotIdx:function(){return this._slotIdx},updateActiveUnit:function(t){t?(this.charNode.opacity=255,this._unitGrade>0&&this.schedule(this.startAddCoin,1)):(this.charNode.opacity=100,this.unschedule(this.startAddCoin))},setTouchable:function(t){this._touchable=t,this.updateActiveUnit(t)},isTouchable:function(){return this._touchable},setReset:function(){this.setRollover(!1),this.setTouchable(!0),this._rolloverFlag=!1},setRollover:function(t){t?0==this._rolloverFlag&&(this._rolloverFlag=!0,this.charSprite.color=this._colorGray,this.slotBg.node.color=this._colorGray,1==this.mergeableEff.active&&(this.mergeableOver.active=!0,this.mergeableOver.getComponent(cc.Animation).play("mergeable_over_ani"),this.mergeableOver.opacity=0,this.mergeableOver.runAction(cc.fadeTo(.2,255)),SoundMgr.playSound(SoundMgr.audioOver))):1==this._rolloverFlag&&(this._rolloverFlag=!1,this.charSprite.color=this._colorWhite,this.slotBg.node.color=this._colorWhite,1==this.mergeableEff.active&&(this.mergeableOver.getComponent(cc.Animation).stop(),this.mergeableOver.runAction(cc.fadeTo(.2,0))))},setMergeable:function(t){t?(this.mergeableEff.node.active=!0,this.mergeableEff.setAnimation(0,"buff_back_eff",!0)):(this.mergeableEff.node.active=!1,this.mergeableEff.clearTrack(0))},startBuffFood:function(){this._unitGrade>0&&(this.buffFood.node.opacity=255,this.buffFood.node.active=!0,this.buffFood.setAnimation(0,"buff_food_eff",!0),this.unitSkeleton.timeScale=2,this._useGetCoinTime=Math.ceil(this._getCoinTime/2))},endBuffFood:function(){this.unitSkeleton.timeScale=1,this._useGetCoinTime=this._getCoinTime,this.buffFood.node.runAction(cc.sequence(cc.fadeTo(.2,0),cc.callFunc(this.deleteBuffFood,this)))},deleteBuffFood:function(){this.buffFood.node.active=!1},getHaveCoin:function(){var t=this._haveCoin;return this._haveCoin=0,t},setHaveCoin:function(t){this._haveCoin=t},getCoinTimer:function(){var t=this._coinTimer;return this._coinTimer=0,t},setCoinTimer:function(t){this._coinTimer=t},getMergeCoin:function(){return this._mergeCoin},getCharPos:function(){return cc.v2(this.node.x,this.node.y+65)},setDelayReset:function(t){this.scheduleOnce(this.setReset,t)},setObjDelay:function(t){this.scheduleOnce(this.updateObjNew,t)},updateObjNew:function(){this._slotIdx<a.getActiveMergeSlotNum()?this.setObj(a.getMergeSlotGradeData(this._slotIdx),s.ACT_UNIT_DROP_ANI):this.setObj(-1,a.getMergeSlotLimitLv(this._slotIdx))},getUnitGrade:function(){return this._unitGrade},getPerSecondGetCoin:function(){return this._getCoin/this._getCoinTime}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",PlaySceneMgr:"PlaySceneMgr",UnitMgr:"UnitMgr"}],MouseObj:[function(t,e,i){"use strict";cc._RF.push(e,"e3d8aBNlFVKeb7RJ9sc/v3D","MouseObj");var a=t("PlaySceneMgr"),s=t("PopupMgr"),n=t("DataMgr"),r=t("LocaleMgr"),c=t("SoundMgr"),o=t("Global");cc.Class({extends:cc.Component,properties:{mouseAni:sp.Skeleton,catFootAni:sp.Skeleton,_moveBool:!1,_horizontal:-1,_posX:0,_speed:100,_moveCount:3,_warningText:"",_rewardData:null,_rewardValue:0,_rewardType:"",_DEAFAUL_SCALE:-.8,_moonWalkFlag:1,_playSceneMgr:null,_blockBtn:!1},start:function(){var t=this;this._warningText=r.getString(3011),this.catFootAni.setEventListener(function(e,i){"endAni"==i.data.name&&(c.playSound(c.audioBang),t.mouseAni.node.runAction(cc.fadeTo(.2,0)),-1==n.getEmptyMergeSlot()?t._playSceneMgr.showAlarm(t._warningText,!1,0,t._playSceneMgr.UNDER):4==t._rewardValue||"MOUSE_CAT"!=t._rewardType?s.instance.schedulePopup(s.POPUP_MOUSE_REWARD,t._rewardData,0):t._playSceneMgr.mouseReward(t._rewardValue),t.catFootAni.node.active=!1,t._playSceneMgr.updateMouseNode(!1))})},startAni:function(){this._playSceneMgr=a.instance,this._playSceneMgr.updateMouseNode(!0),this._blockBtn=!1,n.chkMouseRewardInit(),this._rewardData=a.instance.getMouseReward(),this._rewardValue=this._rewardData.ItemValue,this._rewardType=this._rewardData.ItemType,4==this._rewardValue||"MOUSE_CAT"!=this._rewardType?(this._moonWalkFlag=-1,this._speed=100):(this._moonWalkFlag=1,this._speed=130),this.mouseAni.node.opacity=255,this.node.active=!0,this._moveBool=!0,this.node.x=450,this._posX=this.node.x,this._moveCount=3,this._horizontal=-1,this.node.scaleX=this._horizontal*this._DEAFAUL_SCALE*this._moonWalkFlag,this.mouseAni.setAnimation(0,"eff_mouse",!0),this._playSceneMgr.getGameState()==this._playSceneMgr.GAME_STATE_PLAY&&c.playSound(c.audioMouse)},OnMouseTouch:function(){this._blockBtn||(this._blockBtn=!0,this._moveBool=!1,this.catFootAni.node.active=!0,this.catFootAni.setAnimation(0,"eff_catfoot",!1),c.playSound(c.audioBtn2),this._playSceneMgr.chkGuide(o.GUIDE_MOUSE_CATCH),n.incQuestCount(o.QUEST_MOUSE_CATCH,1))},hideMouse:function(){this._playSceneMgr.updateMouseNode(!1),this.node.active=!1},update:function(t){if(this._moveBool){var e=t*this._speed*this._horizontal;this._posX+=e,this.node.x=this._posX,3==this._moveCount?this._posX<-215&&(this._horizontal=1,this.node.scaleX=this._horizontal*this._DEAFAUL_SCALE*this._moonWalkFlag,this._moveCount--):this._moveCount>0?(this._posX<-215&&(this._horizontal=1,this.node.scaleX=this._horizontal*this._DEAFAUL_SCALE*this._moonWalkFlag,this._moveCount--),this._posX>215&&(this._horizontal=-1,this.node.scaleX=this._horizontal*this._DEAFAUL_SCALE*this._moonWalkFlag)):this._posX>450&&this.hideMouse()}}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],MoveUnitObj:[function(t,e,i){"use strict";cc._RF.push(e,"0ae83HgR6BCTrF5xR+MmyGa","MoveUnitObj"),cc.Class({extends:cc.Component,properties:{charSprite:cc.Sprite},setThumb:function(t,e,i){this.charSprite.spriteFrame=t,this.charSprite.node.x=e,this.charSprite.node.y=i}}),cc._RF.pop()},{}],PlaySceneMgr:[function(t,e,i){"use strict";cc._RF.push(e,"d6b36wFCydJ6K3EzG5BvfwD","PlaySceneMgr");var a=t("DataMgr"),s=t("Global"),n=t("PopupMgr"),r=t("SoundMgr"),c=t("RareCatMgr"),o=t("AccessoryMgr"),h=t("TutoMgr"),u=t("LocaleMgr"),l=cc.Class({extends:cc.Component,properties:{atlasItem:cc.SpriteAtlas,atlasAniCat:cc.SpriteAtlas,atlasUI:cc.SpriteAtlas,atlasCashShop:cc.SpriteAtlas,normalPageNode:cc.Node,rarePageNode:cc.Node,mergeBoard:cc.Node,rareBoardMgr:cc.Node,furnitureMgr:cc.Node,contestNode:cc.Node,topUpUI:cc.Node,topUI:cc.Node,botUI:cc.Node,popupUnder:cc.Node,popupOverlay:cc.Node,playGameNode:cc.Node,coinBar:cc.Node,rareCoinBar:cc.Node,cashCoinBar:cc.Node,blind:cc.Node,feverTimeEff:cc.Node,popupShop:cc.Node,popupCatHotel:cc.Node,popupGoodsShop:cc.Node,popupGallery:cc.Node,popupCashShop:cc.Node,popupQuest:cc.Node,coinNode:cc.Node,rareCoinNode:cc.Node,expNode:cc.Node,luckyNode:cc.Node,rareCoinPlusNode:cc.Node,coinObjPrefab:cc.Prefab,rareCoinObjPrefab:cc.Prefab,rareCoinPlusObjPrefab:cc.Prefab,expObjPrefab:cc.Prefab,luckyObjPrefab:cc.Prefab,alarmObjPrefab:cc.Prefab,currencyObjPrefab:cc.Prefab,adsCatNode:cc.Node,mouseNode:cc.Node,_coinObjPool:null,_coinObjArr:null,_rareCoinObjPool:null,_rareCoinObjArr:null,_rareCoinPlusObjPool:null,_rareCoinPlusObjArr:null,_expObjPool:null,_expObjArr:null,_luckyObjPool:null,_luckyObjArr:null,_popupAlarmPool:null,_popupAlarmArr:null,_accessoryMgr:null,_mergeBoardMgr:null,_rareBoardMgr:null,_topUIMgr:null,_botUIMgr:null,_popupUnderMgr:null,_blind:null,_feverTimeEff:null,_popupRandomBox:null,_contest:null,_furnitureMgr:null,_tutoRareBool:!1,_contentOpenIdx:-1,_rareCatCount:0,_selectedSlot:-1,_selectedCat:-1,_selectedHouse:-1,_rareCoinPlusCountArr:null,UNDER:0,OVERLAY:1,_adsCatBuff:0,ADS_BUFF_OFF:0,ADS_BUFF_ON:1,_gameState:0,GAME_STATE_PLAY:0,GAME_STATE_FULL_SCREEN:1,GAME_STATE_CONTEST:2,_deployState:0,DEPLOY_STATE_PLAY:0,DEPLOY_STATE_CAT:1,DEPLOY_STATE_HOTEL:2,OFFLINE_MUL:.01,_contestKind:-1,_galleryNew:0,_guideType:-1,_mouseBool:!1},statics:{instance:null,BUFF_MUL:5,ADS_CAT_COOLTIME:120,MOUSE_COOLTIME:60},onLoad:function(){l.instance=this},start:function(){this._mergeBoardMgr=this.mergeBoard.getComponent("MergeBoardMgr"),this._rareBoardMgr=this.rareBoardMgr.getComponent("RareBoardMgr"),this._topUIMgr=this.topUI.getComponent("UITopMgr"),this._botUIMgr=this.botUI.getComponent("UIBotMgr"),this._popupUnderMgr=this.popupUnder.getComponent("PopupUnderMgr"),this._blind=this.blind.getComponent("Blind"),this._feverTimeEff=this.feverTimeEff.getComponent("FeverTimeEffObj"),this._popupRandomBox=n.instance.getPopupRandomBox(),this._contest=this.contestNode.getComponent("CatContest"),this._furnitureMgr=this.furnitureMgr.getComponent("FurnitureMgr"),this._accessoryMgr=o.instance,a.setLink(this,this._topUIMgr,this._botUIMgr,this._popupUnderMgr,this._mergeBoardMgr,this._accessoryMgr),n.instance.setLink(this),this.moveStartPos(),this.scheduleOnce(this.initPlayScene,.1),-1==a.getTutoProc(h.TUTO_TYPE_FIRST)&&this.scheduleOnce(this.viewAdsCat,l.ADS_CAT_COOLTIME),this.schedule(this.viewMouse,l.MOUSE_COOLTIME),this.blind.active=!0,this.scheduleOnce(this.fadeOut,.3),this.schedule(this.updateTimer,1),this.initObjectPool(),r.loadSoundAll(this.onSoundHandler.bind(this))},onMusic:function(){this._adsCatBuff==this.ADS_BUFF_OFF?r.playMusic(r.audioBgmNormal,!0):r.playMusic(r.audioBgmFever,!0)},startAdsCat:function(){this.scheduleOnce(this.viewAdsCat,l.ADS_CAT_COOLTIME)},updateTimer:function(){a.minusRandomBoxTime(),a.minusRandomBoxAdsTime(),a.minusRandomBoxAccTime(),a.minusRandomBoxAccAdsTime(),a.minusContestTime(),a.minusContestCatTime(),a.incDailyPlayTime(),this.updateRandomBoxTime(),a.minusQuestAdsTime(),a.saveTimeData()},fadeIn:function(t){null==t&&(t=1),this._blind.fadeIn(t)},fadeOut:function(t){null==t&&(t=1),this._blind.fadeOut(t)},onSoundHandler:function(){},initPlayScene:function(){if(this._mergeBoardMgr.init(this),this._rareBoardMgr.init(),this._mergeBoardMgr.actStart(),h.instance.setDataMgr(a,this,this._mergeBoardMgr,this._rareBoardMgr,this._botUIMgr,this._topUIMgr),this.initPopup(),this.onMusic(),this.chkPostNew(),this.updateGuide(),a.chkQuestList(),a.chkDailyQuestRewardReset(),a.getTutoProc(h.TUTO_TYPE_FIRST)>=0&&1==a.getUserLv())3==a.getTutoProc(h.TUTO_TYPE_FIRST)||4==a.getTutoProc(h.TUTO_TYPE_FIRST)?a.setTutoProc(h.TUTO_TYPE_FIRST,-1):(h.instance.startTutorial(h.TUTO_TYPE_FIRST,a.getTutoProc(h.TUTO_TYPE_FIRST)),a.saveTimeData());else{var t=a.chkAttend();t[1]>0&&n.instance.showPopup(n.POPUP_ATTEND,t)}this._rareCoinPlusCountArr=new Array},setTutoRareBool:function(t){this._tutoRareBool=t},getTutoRareBool:function(){return this._tutoRareBool},tutoRareCatBtn:function(){this._rareBoardMgr.OnRareCatBtn(0)},moveStartPos:function(){0==a.getPageIndex()?this.playGameNode.position=cc.v2(0,0):this.playGameNode.position=cc.v2(-720,0)},initPopup:function(){this.popupShop.getComponent("PopupShop").init(this,this._topUIMgr,this._botUIMgr,this._mergeBoardMgr),this.popupCatHotel.getComponent("PopupCatHotel").init(this,this._topUIMgr,this._botUIMgr,this._rareBoardMgr),this.popupGoodsShop.getComponent("PopupGoodsShop").init(this,this._topUIMgr,this._botUIMgr,this._rareBoardMgr),this.popupGallery.getComponent("PopupGallery").init(this,this._topUIMgr,this._botUIMgr,this._rareBoardMgr),this.popupCashShop.getComponent("PopupCashShop").init(this,this._topUIMgr,this._botUIMgr),this.popupQuest.getComponent("PopupQuest").init()},outAdsCat:function(){this.adsCatNode.getComponent("AdsCat").outCat()},viewAdsCat:function(t){this.adsCatNode.getComponent("AdsCat").inCat(t)},viewMouse:function(){this.mouseNode.getComponent("MouseObj").startAni()},transRarePage:function(){this.disableTouch();var t=cc.moveBy(.3,cc.v2(-720,0)).easing(cc.easeCircleActionOut());this.playGameNode.runAction(cc.sequence(t,cc.callFunc(this.enableTouch,this)))},transNormalPage:function(){this.disableTouch();var t=cc.moveBy(.3,cc.v2(720,0)).easing(cc.easeCircleActionOut());this.playGameNode.runAction(cc.sequence(t,cc.callFunc(this.enableTouch,this)))},enableTouch:function(){},disableTouch:function(){},initObjectPool:function(){this._coinObjPool=new Array,this._coinObjArr=new Array,this._rareCoinObjPool=new Array,this._rareCoinObjArr=new Array,this._rareCoinPlusObjPool=new Array,this._rareCoinPlusObjArr=new Array,this._expObjPool=new Array,this._expObjArr=new Array,this._luckyObjPool=new Array,this._luckyObjArr=new Array,this._popupAlarmPool=new Array,this._popupAlarmArr=new Array;for(var t=0;t<s.COIN_PREFAB_MAX;++t){var e=cc.instantiate(this.coinObjPrefab);this._coinObjPool.push(e),this.coinNode.addChild(e),e.active=!1}for(t=0;t<s.COIN_PREFAB_MAX;++t){var i=cc.instantiate(this.rareCoinObjPrefab);this._rareCoinObjPool.push(i),this.rareCoinNode.addChild(i),i.active=!1}for(t=0;t<s.COIN_PREFAB_MAX;++t){var a=cc.instantiate(this.rareCoinPlusObjPrefab);this._rareCoinPlusObjPool.push(a),this.rareCoinNode.addChild(a),a.active=!1}for(t=0;t<3;t++){var n=cc.instantiate(this.expObjPrefab);this._expObjPool.push(n),this.expNode.addChild(n),n.active=!1}for(t=0;t<3;t++){var r=cc.instantiate(this.luckyObjPrefab);this._luckyObjPool.push(r),this.luckyNode.addChild(r),r.active=!1}for(t=0;t<5;++t){var c=cc.instantiate(this.alarmObjPrefab);this._popupAlarmPool.push(c),this.popupUnder.addChild(c),c.active=!1}},pushCoinObj:function(t){var e=this._coinObjArr.indexOf(t);e>-1&&this._coinObjArr.splice(e,1),this._coinObjPool.push(t)},pushRareCoinObj:function(t){var e=this._rareCoinObjArr.indexOf(t);e>-1&&this._rareCoinObjArr.splice(e,1),this._rareCoinObjPool.push(t)},pushExpObj:function(t){var e=this._expObjArr.indexOf(t);e>-1&&this._expObjArr.splice(e,1),this._expObjPool.push(t)},pushLuckyObj:function(t){var e=this._luckyObjArr.indexOf(t);e>-1&&this._luckyObjArr.splice(e,1),this._luckyObjPool.push(t)},pushAlarmObj:function(t){var e=this._popupAlarmArr.indexOf(t);e>-1&&this._popupAlarmArr.splice(e,1),this._popupAlarmPool.push(t)},addCoin:function(t,e){var i=a.getUserBuyCoinInc(),s=t*(1+a.getNormalCatUpgradeTable(i).increaseCoin/1e4);this._adsCatBuff==this.ADS_BUFF_ON&&(s*=l.BUFF_MUL),s=Math.floor(s),a.addCoin(s),this.viewCoin(),this.CoinAni(e,s),this._gameState==this.GAME_STATE_PLAY&&r.playSound(r.audioMakeCoin2)},minusCoin:function(t,e){a.minusCoin(t),this.viewCoin(),this.CoinAni(e,-t)},addRareCoin:function(t,e){a.addRareCoin(t),this.rareCoinAni(e),this._rareCoinPlusCountArr.push(t),this.node.runAction(cc.sequence(cc.delayTime(1.6),cc.callFunc(this.viewRareCoinPlus,this)))},viewAllCoin:function(){this._topUIMgr.viewAllCoin(),a.saveData()},viewCoin:function(){this._topUIMgr.viewCoin(),a.saveData()},viewRareCoin:function(){this._topUIMgr.viewRareCoin(),a.saveData()},viewCashCoin:function(){this._topUIMgr.viewCashCoin(),a.saveData()},viewCoinPerSecond:function(t){this._topUIMgr.viewPerSecondCoin(t)},viewRareCoinPerSecond:function(t){this._topUIMgr.viewPerSecondRareCoin(t)},viewRareCoinPlus:function(){var t=this._rareCoinPlusObjPool.shift(),e=this._rareCoinPlusCountArr.shift();null==t&&(t=cc.instantiate(this.rareCoinPlusObjPrefab),this.rareCoinPlusNode.addChild(t),t.active=!1),t.getComponent("RareCoinPlusObj").playAni(e),this._rareCoinPlusObjArr.push(t),this.viewRareCoin()},setNormalPageCoin:function(t){var e=t+this._rareBoardMgr.calSecondAddCoin().coin,i=a.getUserBuyCoinInc(),s=e*(1+a.getNormalCatUpgradeTable(i).increaseCoin/1e4);this._adsCatBuff==this.ADS_BUFF_ON&&(s*=4),this.viewCoinPerSecond(s)},setRarePageCoin:function(t){var e=t.rareCoin;this.viewRareCoinPerSecond(e);var i=t.coin+this._mergeBoardMgr.calSecondAddCoin(),s=a.getUserBuyCoinInc(),n=i*(1+a.getNormalCatUpgradeTable(s).increaseCoin/1e4);this._adsCatBuff==this.ADS_BUFF_ON&&(n*=4),this.viewCoinPerSecond(n),this.offlineReward(i,e)},transCoinPerSecond:function(){this._mergeBoardMgr.setNormalPageCoin()},transRareCoinPerSecond:function(){this._rareBoardMgr.setRarePageCoin()},offlineReward:function(t,e){if(0!=a.getRewardTime()&&0!=t){var i={},s=a.getRewardTime(),r=Math.floor(t*s*this.OFFLINE_MUL),c=Math.floor(e*s*this.OFFLINE_MUL),o=a.getUserBuyOffline(),h=a.getNormalCatUpgradeTable(o).offlineReward/1e4;i.rewardCoin=r,i.rewardRareCoin=c,i.bonusCoin=Math.floor(r*h),i.bonusRareCoin=Math.floor(c*h),a.addCoin(i.rewardCoin+i.bonusCoin),a.addRareCoin(i.rewardRareCoin+i.bonusRareCoin),n.instance.schedulePopup(n.POPUP_OFFLINE_REWARD,i,0),a.setRewardTime(0)}},CoinAni:function(t,e,i){var a=this._coinObjPool.shift();null==a&&(a=cc.instantiate(this.coinObjPrefab),this.coinNode.addChild(a)),a.position=t,a.getComponent("CoinObj").playAni(e,this,i),this._coinObjArr.push(a)},rareCoinAni:function(t,e){for(var i=0;i<5;++i)this.showRareCoinAniOne(t,.05*i)},showRareCoinAniOne:function(t,e){var i=300*Math.random()-150,a=500+200*Math.random(),s=t.y-10-Math.floor(20*Math.random()),n=this._rareCoinObjPool.shift();null==n&&(n=cc.instantiate(this.rareCoinObjPrefab),this.rareCoinNode.addChild(n)),n.position=t,n.getComponent("rareCoinObj").init(t.x,t.y,i,a,2e3,s,e,this),this._rareCoinObjArr.push(n)},expAni:function(t,e){var i=this._expObjPool.shift();null==i&&(i=cc.instantiate(this.expObjPrefab),this.expNode.addChild(i),i.active=!1),i.position=t,i.getComponent("ExpObj").playAni(e,this),this._expObjArr.push(i)},luckyAni:function(t){var e=this._luckyObjPool.shift();null==e&&(e=cc.instantiate(this.luckyObjPrefab),this.luckyNode.addChild(e),e.active=!1),e.position=t,e.getComponent("LuckyObj").playAni(this),this._luckyObjArr.push(e)},showAlarm:function(t,e,i,a){var s=this._popupAlarmPool.shift();switch(null==s&&((s=cc.instantiate(this.alarmObjPrefab)).active=!1),this.popupUnder.removeChild(s),this.popupOverlay.removeChild(s),a){case this.UNDER:cc.log("Under"),this.popupUnder.addChild(s);break;case this.OVERLAY:cc.log("Overlay"),this.popupOverlay.addChild(s)}s.position=cc.v2(0,i),s.getComponent("PopupAlarm").showAlarm(t,e,this),this._popupAlarmArr.push(s)},setGameState:function(t){this._gameState=t},getGameState:function(){return this._gameState},setDeployState:function(t){this._deployState=t},getDeployState:function(){return this._deployState},setSelectedSlot:function(t){this._selectedSlot=t},getSelectedSlot:function(){return this._selectedSlot},setSelectedCat:function(t){this._selectedCat=t},getSelectedCat:function(){return this._selectedCat},setSelectedHouse:function(t){this._selectedHouse=t},getSelectedHouse:function(){return this._selectedHouse},setAdsCatBuff:function(t){this._adsCatBuff=t,t==this.ADS_BUFF_ON?(this._mergeBoardMgr.startBuffFood(),this._rareBoardMgr.startBuffFood()):(this._mergeBoardMgr.endBuffFood(),this._rareBoardMgr.endBuffFood(),this.startAdsCat()),this.transCoinPerSecond(),this._gameState!=this.GAME_STATE_CONTEST&&this.onMusic()},getAdsCatBuff:function(){return this._adsCatBuff},startCatBuff:function(){this._topUIMgr.startCatBuff(),this.scheduleOnce(this.startFeverEff,.3)},startFeverEff:function(){this._feverTimeEff.startAniFever()},setRareCatCount:function(t){this._rareCatCount=t},getRareCatCount:function(){return this._rareCatCount},showSlotPlus:function(){},viewNewCatIcon:function(){this._botUIMgr.viewNewCatIcon()},getNewRareCat:function(t){a.setRareCat(t,-1),this.calCatCount()},setPlusSlot:function(){this._rareBoardMgr.setPlusSlot()},getImoticonTransBool:function(){return n.instance.getPopup(n.POPUP_CARE).getImoticonTransBool()},getSpriteToUI:function(t){return this.atlasUI.getSpriteFrame(t)},getCatRankSprite:function(t){return this.atlasUI.getSpriteFrame("icon_grade_"+t)},getHouseSprite:function(t){return this.atlasItem.getSpriteFrame("house_1_"+t)},getShopHouseSprite:function(t){return this.atlasItem.getSpriteFrame("shop_house_1_"+t)},getShopFurnitureSprite:function(t){return this.atlasItem.getSpriteFrame("shop_furniture_1_"+(t+1))},getAniCatSprite:function(t){return this.atlasAniCat.getSpriteFrame("CAT_"+t)},getShopItem:function(t){return this.atlasItem.getSpriteFrame("shop_item"+t)},getCurrencySprite:function(t){switch(t){case s.PAYMENT_COIN:return this.atlasUI.getSpriteFrame("icon_coin_s");case s.PAYMENT_RARE_COIN:return this.atlasUI.getSpriteFrame("icon_can_s");case s.PAYMENT_CASH_COIN:return this.atlasUI.getSpriteFrame("icon_sticksnack");case s.PAYMENT_CAT_TICKET:return this.atlasUI.getSpriteFrame("icon_ticket");case s.PAYMENT_ACC_TICKET:return this.atlasUI.getSpriteFrame("icon_ticket_acc");case s.PAYMENT_CAT_FEED:return this.atlasItem.getSpriteFrame("btn_icon_care_1");case s.PAYMENT_CAT_SHAMPOO:return this.atlasItem.getSpriteFrame("btn_icon_care_2");case s.PAYMENT_CAT_TONIC:return this.atlasItem.getSpriteFrame("btn_icon_care_3");case s.PAYMENT_TOY_FISHING:return this.atlasItem.getSpriteFrame("btn_icon_care_4");case s.PAYMENT_FISH_STEAK:return this.atlasItem.getSpriteFrame("btn_icon_care_11");case s.PAYMENT_BUBBLE_BATH:return this.atlasItem.getSpriteFrame("btn_icon_care_12");case s.PAYMENT_MEDICAL_TESTING:return this.atlasItem.getSpriteFrame("btn_icon_care_13");case s.PAYMENT_MAZE_HUNT:return this.atlasItem.getSpriteFrame("btn_icon_care_14")}},getEmoticon:function(t){switch(t){case s.CAT_EMOTICON_LIKE:return this.atlasItem.getSpriteFrame("emoticon_like");case s.CAT_EMOTICON_BORING:return this.atlasItem.getSpriteFrame("emoticon_boring");case s.CAT_EMOTICON_SICK:return this.atlasItem.getSpriteFrame("emoticon_sick");case s.CAT_EMOTICON_HUNGRY:return this.atlasItem.getSpriteFrame("emoticon_hungry");case s.CAT_EMOTICON_DIRTY:return this.atlasItem.getSpriteFrame("emoticon_dirty");case s.CAT_EMOTICON_ANGRY:return this.atlasItem.getSpriteFrame("emoticon_angry")}},getCareItem:function(t){return this.atlasItem.getSpriteFrame("icon_care_"+t)},getContestGradeSprite:function(t){switch(t){case 0:return this.atlasUI.getSpriteFrame("number_bg3");case 1:return this.atlasUI.getSpriteFrame("number_bg4");case 2:return this.atlasUI.getSpriteFrame("number_bg5");case 3:return this.atlasUI.getSpriteFrame("number_bg6")}},getContestKindSprite:function(){switch(this._contestKind){case 0:return this.atlasUI.getSpriteFrame("contest_ribbon_health");case 1:return this.atlasUI.getSpriteFrame("contest_ribbon_charm");case 2:return this.atlasUI.getSpriteFrame("contest_ribbon_int")}},getContestKindTrophy:function(){switch(this._contestKind){case 0:return this.atlasUI.getSpriteFrame("icon_trophy_health");case 1:return this.atlasUI.getSpriteFrame("icon_trophy_charm");case 2:return this.atlasUI.getSpriteFrame("icon_trophy_int")}},getOpenContentSprite:function(t){switch(t){case s.CONTENT_PET_SHOP:return this.atlasUI.getSpriteFrame("icon_shop_nomal");case s.CONTNET_GALLERY:return this.atlasUI.getSpriteFrame("icon_gallery");case s.CONTENT_GACHA:return this.atlasUI.getSpriteFrame("icon_randombox");case s.CONTENT_CONTEST:return this.atlasUI.getSpriteFrame("icon_contest");case s.CONTENT_QUEST:return this.atlasUI.getSpriteFrame("icon_quest")}},getCashProductSprite:function(t){return this.atlasCashShop.getSpriteFrame("Shop_"+t)},getCashProductBgSprite:function(t){return this.atlasCashShop.getSpriteFrame("Shop_Bg_"+t)},getFurnitureSprite:function(t){return this.atlasItem.getSpriteFrame("deco_1_"+t)},getFurnitureShopSprite:function(t){return this.atlasItem.getSpriteFrame("shop_furniture_1_"+(t+1))},mouseReward:function(t){var e=this.createCat(t);if(e&&4!=t){var i=u.getString(3072);this.showAlarm(i,!0,0,this.UNDER)}return e},getEmptyMergeSlot:function(){return a.getEmptyMergeSlot()},createCat:function(t){return this._mergeBoardMgr.makeUnit(t)},getUnitSc:function(t){return this._mergeBoardMgr.getUnitSc(t)},calCatCount:function(){n.instance.getPopupHotel().calCatCount()},updateCatAcc:function(t){this.updateRareBoard(this._selectedSlot);var e=n.instance.getPopup(n.POPUP_DRESS_ROOM);e.initData(),e.refreshAllAcc(),n.instance.getPopup(n.POPUP_CONTEST).initData(t)},updateRareBoard:function(t){this._rareBoardMgr.settingCat(t)},updateImoticon:function(t){this._rareBoardMgr.refreshState(t);var e=n.instance.getPopup(n.POPUP_CARE);null!=e.getCatData()&&e.updateImoticon()},updateCountLabel:function(t){this._botUIMgr.refreshRareCatLabel(t)},updateCatHotel:function(){n.instance.getPopupHotel().refreshHotel()},updateCatHouse:function(t){this._rareBoardMgr.setSlot(t)},updateFurniture:function(t){this._furnitureMgr.setFurniture(t)},updateRandomBoxTime:function(){n.instance.getPopupRandomBox().checkBoxCount()},updateContent:function(t){switch(t){case s.CONTENT_PET_SHOP:this._botUIMgr.updateShopBtn();break;case s.CONTNET_GALLERY:this._botUIMgr.updateGalleryBtn();break;case s.CONTENT_GACHA:this._topUIMgr.updateRandomBoxBtn();break;case s.CONTENT_CONTEST:this._botUIMgr.updateContestBtn();break;case s.CONTENT_QUEST:this._topUIMgr.updateQuestBtn()}},updateLimitProductBtn:function(){this._topUIMgr.updateLimitProductBtn()},updateTransBtn:function(){this._botUIMgr.updateTransBtn()},updateGuide:function(){this._topUIMgr.updateGuide()},getRareCatGrade:function(){for(var t=Math.random(),e=11;e<=36;e++){if(t<c.instance.getRareCatDataGrade(e).getRankProb())return e}},getMouseReward:function(){for(var t=a.getMouseRewardTable(),e=Math.random(),i=a.getUserBuyMouseLvUp(),s=a.getNormalCatUpgradeTable(i).mouseLvUpChance/1e4,n=0;n<t.length;n++)if(e<t[n].BaseProb-s)return""!=t[n].LimitCount&&t[n].LimitCount<=a.getMouseRewardCount()?t[n-1]:t[n];return""!=t[t.length-1].LimitCount&&t[t.length-1].LimitCount<=a.getMouseRewardCount()?t[t.length-2]:t[t.length-1]},getBoxRewardGrade:function(){for(var t=a.getBoxRewardTable(),e=Math.random(),i=0;i<t.length;i++)if(e<t[i].BaseProb)return t[i].ItemValue},getBoxRewardTicketGrade:function(){for(var t=a.getBoxRewardTable(),e=Math.random(),i=0;i<t.length;i++)if(e<t[i].ItemProb)return t[i].ItemValue},getBoxRewardAcc:function(){var t=this._accessoryMgr.getAccDic(),e=Math.random();for(var i in t)if(e<t[i].getBaseProb())return t[i]},getBoxRewardTicketAcc:function(){var t=this._accessoryMgr.getAccDic(),e=Math.random();for(var i in t)if(e<t[i].getCashProb())return t[i]},getAccStat:function(t){for(var e=Math.random(),i=this._accessoryMgr.getOptionStat(t),a=0;a<i.length;a++)if(e<i[a].getOpProb())return i[a]},getAccBuff:function(t){for(var e=Math.random(),i=this._accessoryMgr.getOptionBuff(t),a=0;a<i.length;a++)if(e<i[a].getOpProb())return i[a]},startContest:function(t){this._contest.startContest(t)},setContestKind:function(t){this._contestKind=t},getContestKind:function(){return this._contestKind},setContentOpenIdx:function(t){this._contentOpenIdx=t},getContentOpenIdx:function(){return this._contentOpenIdx},setGalleryNew:function(t){this._galleryNew=t},getGalleryNew:function(){return this._galleryNew},updateGalleryNew:function(){this._galleryNew>0?this._botUIMgr.viewNewGallery():this._botUIMgr.closeNewGallery()},chkGalleryNew:function(){n.instance.getPopup(n.POPUP_GALLERY).updateSlot()},updatePostNew:function(t){t?this._topUIMgr.viewNewPost():this._topUIMgr.closeNewPost()},chkPostNew:function(){n.instance.getPopup(n.POPUP_POST).chkPostObj()},setGuideType:function(t){this._guideType=t},getGuideType:function(){return this._guideType},chkGuide:function(t){this.getGuideType()==t&&a.plusUserGuideCount()&&this.updateGuide()},chkCatHelp:function(){this._botUIMgr.chkCatHelp()},updateMouseNode:function(t){this._mouseBool=t,this._botUIMgr.chkMouseToy()},getMouseBool:function(){return this._mouseBool},currencyUp:function(){this.topUpUI.removeChild(this.coinBar),this.topUpUI.removeChild(this.rareCoinBar),this.topUpUI.removeChild(this.cashCoinBar),this.coinBar.y=605,this.rareCoinBar.y=605,this.cashCoinBar.y=605,this.cashCoinBar.getComponent("cc.Button").interactable=!1,this.popupOverlay.addChild(this.coinBar),this.popupOverlay.addChild(this.rareCoinBar),this.popupOverlay.addChild(this.cashCoinBar)},currencyDown:function(){this.popupOverlay.removeChild(this.coinBar),this.popupOverlay.removeChild(this.rareCoinBar),this.popupOverlay.removeChild(this.cashCoinBar),this.coinBar.y=0,this.rareCoinBar.y=0,this.cashCoinBar.y=0,this.cashCoinBar.getComponent("cc.Button").interactable=!0,this.topUpUI.addChild(this.coinBar),this.topUpUI.addChild(this.rareCoinBar),this.topUpUI.addChild(this.cashCoinBar)}});cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr"}],PopupAccEquip:[function(t,e,i){"use strict";cc._RF.push(e,"0cf86U/NvdA8Js5+KjpW38D","PopupAccEquip");var a=t("DataMgr"),s=t("PopupMgr"),n=t("PlaySceneMgr"),r=t("RareCatMgr"),c=t("AccessoryMgr"),o=t("LocaleMgr"),h=t("SoundMgr"),u=t("Global");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,catBefore:sp.Skeleton,catAfter:sp.Skeleton,accSlotPrefab:cc.Prefab,accStatPrefab:cc.Prefab,allNode:cc.Node,titleLabel:cc.Label,equipLabel:cc.Label,beforeNode:cc.Node,beforeBuffNode:cc.Node,afterBuffNode:cc.Node,beforeAccStatSprite:cc.Sprite,beforeAccStatLabel:cc.Label,beforeAccBuffSprite:cc.Sprite,beforeAccBuffLabel:cc.Label,afterAccStatSprite:cc.Sprite,afterAccStatLabel:cc.Label,afterAccBuffSprite:cc.Sprite,afterAccBuffLabel:cc.Label,accName:cc.Label,accGrade:cc.Sprite,_accHatData:null,_accNeckData:null,_accSlotHat:null,_accSlotNeck:null,_accData:null,_catGrade:0,_btnLockFlag:!0,_accBeforeData:null,_accAfterData:null,_rareCatMgr:null,_accessoryMgr:null},onLoad:function(){this.titleLabel.string=o.getString(3067),this.titleLabel.fontSize=o.getRibbonFontSize(),this.equipLabel.string=o.getString(1063)},showPopup:function(t){this._rareCatMgr=r.instance,this._accessoryMgr=c.instance,this._accData=t,this.allNode.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.initData(this._accData),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(t){if(this._accBeforeData=t.beforeData,this._accAfterData=t.afterData,this._catGrade=t.catGrade,null!=this._accBeforeData){this.beforeNode.active=!0;var e=this._accBeforeData.getAccGrade(),i=this._accBeforeData.getStatType(),s=this._accBeforeData.getStat(),n=this._accBeforeData.getBuffType(),r=this._accBeforeData.getbuffEffect();if(this.beforeAccStatSprite.spriteFrame=c.instance.getAccStatSprite(i),this.beforeAccStatLabel.string="+"+s,"A"==e||"S"==e){this.beforeBuffNode.active=!0;var h=c.instance.getAccBuffSprite(n);this.beforeAccBuffSprite.spriteFrame=h,this.beforeAccBuffLabel.string="S"==e?"+"+r:"+"+Math.ceil(100*r)+"%"}else this.beforeBuffNode.active=!1}else this.beforeNode.active=!1;if(null!=this._accAfterData){var u=this._accAfterData.getAccGrade(),l=this._accAfterData.getStatType(),_=this._accAfterData.getStat(),p=this._accAfterData.getBuffType(),d=this._accAfterData.getbuffEffect();if(this.afterAccStatSprite.spriteFrame=c.instance.getAccStatSprite(l),this.afterAccStatLabel.string="+"+_,"A"==u||"S"==u){this.afterBuffNode.active=!0;h=c.instance.getAccBuffSprite(p);this.afterAccBuffSprite.spriteFrame=h,this.afterAccBuffLabel.string="S"==u?"+"+d:"+"+Math.ceil(100*d)+"%"}else this.afterBuffNode.active=!1}var g=this._rareCatMgr.getRareCatDataGrade(this._catGrade),S=a.getRareCatData(this._catGrade),T=S.getAccHatPK(),A=S.getAccNeckPK();this._accHatData=a.getUserHatAccData(T),this._accNeckData=a.getUserNeckAccData(A),this.catBefore.skeletonData=g.getSpineData();var C=g.getSpineSkin();if(this.catBefore.setSkin(C),this._aniName=g.getSpineAni(),this._accSlotHat=g.getSpineAccSlotHat(),null!=this._accNeckData?this._accSlotNeck=g.getSpineAccSlotNeck(this._accNeckData.getIdx()):(this.catBefore.setAttachment("neck_front","none"),this.catBefore.setAttachment("neck_back","none")),null==this._accHatData)this.catBefore.setAttachment(this._accSlotHat,"none");else{var f=this._accHatData.getAccType()+"_"+this._accHatData.getIdx();this.catBefore.setAttachment(this._accSlotHat,f)}if(null==this._accNeckData);else{f=this._accNeckData.getAccType()+"_"+this._accNeckData.getIdx();this.catBefore.setAttachment(this._accSlotNeck,f)}var m=this._accAfterData.getIdx(),b=this._accAfterData.getAccType(),M=(u=this._accAfterData.getAccGrade(),this._accAfterData.getNameTextKey());this.accName.string=o.getString(M),this.accGrade.spriteFrame=this._accessoryMgr.getAccGradeSprite(u),this.catAfter.skeletonData=g.getSpineData();C=g.getSpineSkin();if(this.catAfter.setSkin(C),this._accSlotHat=g.getSpineAccSlotHat(),"neck"==b){this._accSlotNeck=g.getSpineAccSlotNeck(m);var y=b+"_"+m;if(this.catAfter.setAttachment(this._accSlotNeck,y),null==this._accHatData)this.catAfter.setAttachment(this._accSlotHat,"none");else{var P=this._accHatData.getAccType()+"_"+this._accHatData.getIdx();this.catAfter.setAttachment(this._accSlotHat,P)}}else{P=b+"_"+m;if(this.catAfter.setAttachment(this._accSlotHat,P),null!=this._accNeckData){this._accSlotNeck=g.getSpineAccSlotNeck(this._accNeckData.getIdx());y=this._accNeckData.getAccType()+"_"+this._accNeckData.getIdx();this.catAfter.setAttachment(this._accSlotNeck,y)}else this.catAfter.setAttachment("neck_front","none"),this.catAfter.setAttachment("neck_back","none")}this.aniStart()},aniStart:function(){this.catBefore.setAnimation(0,"idle",!0),this.catAfter.setAnimation(0,"idle",!0)},OnOkBtn:function(){var t=this._accAfterData.getAccType(),e=this._accAfterData.getPK();if(null!=this._accBeforeData)var i=this._accBeforeData.getPK();switch(t){case"hat":a.setEquipUserHatAccData(e,!0),a.setRareCatHatAcc(this._catGrade,e),null!=this._accBeforeData&&a.setEquipUserHatAccData(i,!1);break;case"neck":a.setEquipUserNeckAccData(e,!0),a.setRareCatNeckAcc(this._catGrade,e),null!=this._accBeforeData&&a.setEquipUserNeckAccData(i,!1)}n.instance.updateCatAcc(this._catGrade),h.playSound(h.audioDressUp),this.hidePopupHandler(),n.instance.chkGuide(u.GUIDE_RARE_CAT_ACC_MOUNT)},allStatOut:function(){this.beforeBuffNode.active=!1,this.afterBuffNode.active=!1},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this.scheduleOnce(this.endHideAni,.3)},endHideAni:function(){s.instance.nextPopup()},destroyPopup:function(){this.allStatOut(),this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_ACC_EQUIP))}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr"}],PopupAccInfo:[function(t,e,i){"use strict";cc._RF.push(e,"26b8eKgxFtNQ70T+QkQlAKy","PopupAccInfo");var a=t("LocaleMgr"),s=(t("DataMgr"),t("AccessoryMgr")),n=t("PlaySceneMgr");t("PopupMgr"),t("Global");cc.Class({extends:cc.Component,properties:{accGradeSprite:cc.Sprite,accSprite:cc.Sprite,accNameLabel:cc.Label,accExplainLabel:cc.Label,tipLabel:cc.Label,_tipLabelArr:null,_playSceneMgr:null},showPopup:function(t){this._playSceneMgr=n.instance,this._accessoryMgr=s.instance,this.node.active=!0,null==this._tipLabelArr&&(this._tipLabelArr=[],this._tipLabelArr[0]=a.getString(3125),this._tipLabelArr[1]=a.getString(3126));var e=this._accessoryMgr.getAccDic()[t],i=e.getAccType(),r=e.getAccGrade();this.accSprite.spriteFrame=this._accessoryMgr.getAccSprite(i,t),this.accGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(r);var c=e.getNameTextKey(),o=e.getExplainTextKey();this.accNameLabel.string=a.getString(c),this.accExplainLabel.string=a.getString(o,"<br/>","\n");var h=Math.floor(2*Math.random());this.tipLabel.string=this._tipLabelArr[h]},hidePopup:function(){this.node.active=!1}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],PopupAccMerge:[function(t,e,i){"use strict";cc._RF.push(e,"c8f3bynDglIlYo4HsI4ubQb","PopupAccMerge");t("Global");var a=t("DataMgr"),s=t("PopupMgr"),n=t("LocaleMgr"),r=t("PlaySceneMgr"),c=t("AccessoryMgr"),o=t("AccessoryUserData"),h=t("SoundMgr");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,resultRibbonAni:sp.Skeleton,allNode:cc.Node,accNode:cc.Node,accScrollView:cc.ScrollView,accMergeSlotPrefab:cc.Prefab,titleLabel:cc.Label,myAccLabel:cc.Label,mergeLabel:cc.Label,cancleLabel:cc.Label,selectedAccArr:[cc.Node],_selectedCount:0,maskNode:cc.Node,particleNode:cc.Node,particleArr:[cc.ParticleSystem],whiteMask:cc.Node,_particlePosArr:null,resultNode:cc.Node,accBuffNode:cc.Node,accSprite:cc.Sprite,accGradeSprite:cc.Sprite,statSprite:cc.Sprite,buffSprite:cc.Sprite,resultTitleLabel:cc.Label,accNameLabel:cc.Label,explainAccLabel:cc.Label,statLabel:cc.Label,buffLabel:cc.Label,resultSlotGrade:cc.Sprite,_AccDataArr:null,_AccArr:null,_selectedAccDataArr:null,_playSceneMgr:null,_accessoryMgr:null,_popupDressRoom:null,_MAX_SELECT_SLOT:5},onLoad:function(){this.titleLabel.string=n.getString(1108),this.myAccLabel.string=n.getString(1109),this.mergeLabel.string=n.getString(1106),this.cancleLabel.string=n.getString(1100),this.resultTitleLabel.string=n.getString(1110),this._playSceneMgr=r.instance,this._accessoryMgr=c.instance},showPopup:function(t){this.allNode.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(this.showAni,this))),this._popupDressRoom=t},showAni:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.initData(),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(){this.accScrollView.scrollToTop(0),this.resultSlotGrade.node.active=!1,this._selectedCount=0,this._selectedAccArr=new Array,this._selectedAccDataArr=new Array,this.initAllAccSlot(),this.initSelectSlot()},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this.scheduleOnce(this.endHideAni,.3)},endHideAni:function(){s.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.accNode.destroyAllChildren(),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_ACC_MERGE))},selectAcc:function(t){for(var e=0;e<this._MAX_SELECT_SLOT;e++)if(null==this._selectedAccDataArr[e]){this._selectedAccDataArr[e]=this._AccDataArr[t],this.selectedAccArr[e].getComponent("AccMergeSlotObj").initAccSelectedSlot(e,this,this._selectedAccDataArr[e]),this._selectedCount++;break}},unselectAcc:function(t){for(var e=0;e<this._MAX_SELECT_SLOT;e++)if(this._AccDataArr[t]==this._selectedAccDataArr[e]){this.selectedAccArr[e].getComponent("AccMergeSlotObj").initAccSelectedSlot(e,this),this._selectedAccDataArr[e]=null,this._selectedCount--;break}0==this._selectedCount&&(this.accNode.destroyAllChildren(),this.initData())},unselectAccPk:function(t){for(var e=0;e<this._MAX_SELECT_SLOT;e++)if(null!=this._selectedAccDataArr[e]&&this._selectedAccDataArr[e].getPK()==t){this.selectedAccArr[e].getComponent("AccMergeSlotObj").initAccSelectedSlot(e,this),this._selectedAccDataArr[e]=null,this._selectedCount--;break}for(e=0;e<this._AccDataArr.length;e++)if(this._AccDataArr[e].getPK()==t){this._AccArr[e].getComponent("AccMergeSlotObj").unSelected();break}0==this._selectedCount&&(this.accNode.destroyAllChildren(),this.initData())},getSelectedCount:function(){return this._selectedCount},OnResultOkBtn:function(){this.resultNode.active=!1,this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.callFunc(this.hideBlackMask,this)))},OnCancleBtn:function(){this.hidePopupHandler()},OnMergeBtn:function(){for(var t=0;t<this._MAX_SELECT_SLOT;t++)if(null==this._selectedAccDataArr[t])return void this._playSceneMgr.showAlarm("\ud569\uc131\ud560 \uc545\uc138\uc11c\ub9ac\ub97c \ub354 \ub123\uc5b4\uc8fc\uc138\uc694",!1,0,this._playSceneMgr.OVERLAY);for(t=0;t<this._MAX_SELECT_SLOT;t++){var e=this._selectedAccDataArr[t].getPK();a.deleteAcc(e)}var i=this._selectedAccDataArr[0].getAccGrade(),s=this.getNextGrade(i);this.resultMergeAcc(s),this.showMergeEffect()},showMergeEffect:function(){this._particlePosArr=[[-232,150],[-116,150],[0,150],[116,150],[232,150]];for(var t=0;t<5;++t)this.particleArr[t].node.x=this._particlePosArr[t][0],this.particleArr[t].node.y=this._particlePosArr[t][1],this.particleArr[t].resetSystem();h.playSound(h.audioAccEvolStart),this.maskNode.active=!0,this.maskNode.opacity=0,this.whiteMask.opacity=0,this.particleNode.active=!0,this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,250),cc.delayTime(.5),cc.callFunc(this.moveParticle,this),cc.delayTime(.8),cc.callFunc(this.showWhiteMask,this),cc.delayTime(.3),cc.callFunc(this.showItems,this)))},moveParticle:function(){var t=[cc.v2(-400,396),cc.v2(-400,396),cc.v2(0,0)];this.particleArr[0].node.runAction(cc.bezierTo(.9,t).easing(cc.easeSineIn()));t=[cc.v2(-200,446),cc.v2(-200,446),cc.v2(0,0)];this.particleArr[1].node.runAction(cc.bezierTo(.9,t).easing(cc.easeSineIn()));t=[cc.v2(0,496),cc.v2(0,496),cc.v2(0,0)];this.particleArr[2].node.runAction(cc.bezierTo(.9,t).easing(cc.easeSineIn()));t=[cc.v2(200,446),cc.v2(200,446),cc.v2(0,0)];this.particleArr[3].node.runAction(cc.bezierTo(.9,t).easing(cc.easeSineIn()));t=[cc.v2(400,396),cc.v2(400,396),cc.v2(0,0)];this.particleArr[4].node.runAction(cc.bezierTo(.9,t).easing(cc.easeSineIn()))},showWhiteMask:function(){h.playSound(h.audioAccEvolEnd),this.whiteMask.active=!0,this.whiteMask.runAction(cc.fadeTo(.2,255))},hideWhteMask:function(){this.whiteMask.runAction(cc.fadeTo(.2,0))},hideBlackMask:function(){this.maskNode.active=!1,this.resultRibbonAni.clearTrack(0)},showItems:function(){this.hideWhteMask(),this.particleNode.active=!1,this.resultNode.active=!0,this.resultRibbonAni.addAnimation(0,"ribbon",!1),this.accNode.destroyAllChildren(),this.initData(),this._popupDressRoom.destroyAllAcc(),this._popupDressRoom.initAllAccSlot()},getNextGrade:function(t){switch(t){case"D":return"C";case"C":return"B";case"B":return"A";case"A":return"S"}},resultMergeAcc:function(t){for(var e=null;;){if(t==(h=(e=this._playSceneMgr.getBoxRewardTicketAcc()).getAccGrade()))break}this.accBuffNode.active=!1;var i=e.getIdx(),s=e.getNameTextKey(),r=e.getExplainTextKey(),c=e.getAccType(),h=e.getAccGrade();0==a.getAccCollectBool(i)&&this._playSceneMgr.chkGalleryNew(),this.accSprite.spriteFrame=this._accessoryMgr.getAccSprite(c,i),this.accGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(h),this.accNameLabel.string=n.getString(s),this.explainAccLabel.string=n.getString(r);var u,l=this._accessoryMgr.getOptionStat(h),_=this._accessoryMgr.getStatType(),p=parseInt(l.getOpMin()),d=parseInt(l.getOpMax());u=Math.floor(Math.random()*(d-p)+p),this.statSprite.spriteFrame=this._accessoryMgr.getAccStatSprite(_),this.statLabel.string=u;var g="",S=0;if("A"==h||"S"==h){this.accBuffNode.active=!0;var T=this._accessoryMgr.getOptionBuff(h),A=parseFloat(T.getOpMin()),C=parseFloat(T.getOpMax());S=Math.random()*(C-A)+A,"S"==h?(S=parseInt(S),this.buffLabel.string=S,g="Rare"):(this.buffLabel.string=Math.floor(100*S)+"%",g="Coin"),this.buffSprite.spriteFrame=this._accessoryMgr.getAccBuffSprite(g)}var f=new o,m=a.getUserAccPK();switch(f.initUserAccData(e,m,_,u,g,S),c){case"neck":a.setUserNeckAccData(f);break;case"hat":a.setUserHatAccData(f)}a.addUserAccPK(),a.saveData()},initSelectSlot:function(){for(var t=0;t<this.selectedAccArr.length;t++)this.selectedAccArr[t].getComponent("AccMergeSlotObj").initAccSelectedSlot(t,this)},initAllAccSlot:function(){this._AccArr=new Array,this._AccDataArr=new Array;var t=a.getUserHatAccDataTable(),e=a.getUserNeckAccDataTable();this._AccDataArr=t.concat(e),this._AccDataArr.sort(this.accSortIdxAsc);for(var i=0;i<this._AccDataArr.length;i++){var s=this._AccDataArr[i];if(!s.getEquip()&&"S"!=s.getAccGrade()){var n=cc.instantiate(this.accMergeSlotPrefab);this.accNode.addChild(n),n.getComponent("AccMergeSlotObj").initAccSlot(i,this,s),this._AccArr[i]=n}}},selectGrade:function(t){for(var e=0;e<this._AccDataArr.length;e++){var i=this._AccDataArr[e];if(!i.getEquip()){var a=i.getAccGrade();a!=t&&"S"!=a&&this._AccArr[e].destroy()}}var s=this.getNextGrade(t);this.resultSlotGrade.node.active=!0,this.resultSlotGrade.spriteFrame=this._accessoryMgr.getAccGradeSprite(s)},accSortIdxDes:function(t,e){return t.getIdx()>e.getIdx()?-1:t.getIdx()<e.getIdx()?1:t.getStat()>e.getStat()?-1:t.getStat()<e.getStat()?1:t.getbuffEffect()>e.getbuffEffect()?-1:t.getbuffEffect()<e.getbuffEffect()?1:void 0},accSortIdxAsc:function(t,e){return t.getIdx()<e.getIdx()?-1:t.getIdx()>e.getIdx()?1:t.getStat()<e.getStat()?-1:t.getStat()>e.getStat()?1:t.getbuffEffect()<e.getbuffEffect()?-1:t.getbuffEffect()>e.getbuffEffect()?1:void 0}});cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",AccessoryUserData:"AccessoryUserData",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupAdsCareItem:[function(t,e,i){"use strict";cc._RF.push(e,"84621lbeUpDIKPvh+qHHSoY","PopupAdsCareItem");t("PopupMgr");var a=t("SoundMgr"),s=t("Global"),n=(t("DataMgr"),t("LocaleMgr")),r=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{allNode:cc.Node,allItemNode:cc.Node,needItemNode:cc.Node,explainLabel:cc.Label,rewardCountLabel:[cc.Label],careItemSprite:cc.Sprite,_playSceneMgr:null,_popupCare:null,_itemIdx:0,_ALL_ITEM_STATE:0,_NEED_ITEM_STATE:1},showPopup:function(t,e){this._playSceneMgr=r.instance,this._popupCare=t,this._itemIdx=e;for(var i=0;i<5;i++)this.rewardCountLabel[i].string=s.CARE_ADS_ITEM_COUNT;var a=0;a=void 0==e?this._ALL_ITEM_STATE:this._NEED_ITEM_STATE,this.initData(a,e),this.showAni()},showAni:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},initData:function(t,e){t==this._ALL_ITEM_STATE?(this.allItemNode.active=!0,this.needItemNode.active=!1,this.explainLabel.string=n.getString(3095,"<br/>","\n"),this._itemIdx=Math.floor(Math.random()*this._popupCare._NORMAL_ITEM_MAX+1)):(this.allItemNode.active=!1,this.needItemNode.active=!0,this.explainLabel.string=n.getString(3096,"<br/>","\n"),this.careItemSprite.spriteFrame=this._playSceneMgr.getCareItem(e))},OnAdsBtn:function(){a.playSound(a.audioBtn0),this._popupCare.showAds(this._itemIdx),this.hidePopup()},hidePopup:function(){this._btnLockFlag||(this._btnLockFlag=!0,this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),a.playSound(a.audioPopupOpen))},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){this._btnLockFlag=!1}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupAdsCat:[function(t,e,i){"use strict";cc._RF.push(e,"2aaf4XT4t1G079z29cAiJBA","PopupAdsCat");var a=t("DataMgr"),s=t("PopupMgr"),n=t("PlaySceneMgr"),r=t("LocaleMgr"),c=t("Global");cc.Class({extends:cc.Component,properties:{allNode:cc.Node,titleLabel:cc.Label,npcCatLabel:cc.Label,_price:100},start:function(){this.titleLabel.string=r.getString(3061),this.titleLabel.fontSize=r.getRibbonFontSize(),this.npcCatLabel.string=r.getString(3002,"<br/>","\n","<br/>","\n")},showPopup:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},tutoPlay:function(){n.instance.startCatBuff(),this.hidePopupHandler()},OnAdsBtn:function(){n.instance.startCatBuff(),this.hidePopupHandler(),n.instance.chkGuide(c.GUIDE_BUFF_GET),a.incQuestCount(c.QUEST_BUFF_GET,1)},OnCashBtn:function(){a.getCashCoin()>=this._price?(a.minusCashCoin(this._price),n.instance.viewCashCoin(),n.instance.startCatBuff(),this.hidePopupHandler(),n.instance.chkGuide(c.GUIDE_BUFF_GET),a.incQuestCount(c.QUEST_BUFF_GET,1)):n.instance.showAlarm("\uc2a4\ud2f1\uac04\uc2dd\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4",!1,0,n.instance.OVERLAY)},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_ADS_CAT))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],PopupAlarm:[function(t,e,i){"use strict";cc._RF.push(e,"1a71dQPonhGxYZL17ZfDLR8","PopupAlarm");var a=t("SoundMgr");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,successSprite:cc.SpriteFrame,failSprite:cc.SpriteFrame,popupBalloon:cc.Node,alarmLabel:cc.Label,_playSceneMgr:null},statics:{_CAT_FULL:0},start:function(){},showAlarm:function(t,e,i){this._playSceneMgr=i,this.bgSprite.spriteFrame=e?this.successSprite:this.failSprite,this.node.active=!0,this.node.opacity=255,cc.log(t),this.alarmLabel.string=t,this.playAni(),e||a.playSound(a.audioWarning)},playAni:function(){this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,50)).easing(cc.easeCircleActionOut()),cc.callFunc(this.hide,this))),this.node.runAction(cc.sequence(cc.delayTime(1),cc.fadeTo(1,0),cc.callFunc(null,this)))},hide:function(){this._playSceneMgr.pushAlarmObj(this.node),this.node.stopAllActions(),this.node.active=!1}}),cc._RF.pop()},{SoundMgr:"SoundMgr"}],PopupAttendObj:[function(t,e,i){"use strict";cc._RF.push(e,"c760c5COidPfYZAOF0zfy+o","PopupAttendObj");t("DataMgr");var a=t("Global"),s=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,countBgSprite:cc.Sprite,countBgSprite2:cc.Sprite,bgSpriteFrame:[cc.SpriteFrame],countBgSpriteFrame:[cc.SpriteFrame],rewardIcon:cc.Sprite,rewardLabel:cc.Label,dayLabel:cc.Label,compStamp:cc.Node,compAni:cc.Node,rewardIcon2:cc.Sprite,rewardLabel2:cc.Label,_playSceneMgr:null,rewardTwoBool:!1},start:function(){},init:function(t,e,i,n,r){this._playSceneMgr=s.instance,this.dayLabel.string="Day "+t,this.rewardIcon.spriteFrame=this._playSceneMgr.getCurrencySprite(e),this.rewardLabel.string=a.getNumToType(i),n>0&&(this.rewardIcon2.spriteFrame=this._playSceneMgr.getCurrencySprite(n),this.rewardLabel2.string=a.getNumToType(r),this.rewardTwoBool=!0)},updateSprite:function(t){0==t?(this.compAni.active=!0,this.bgSprite.spriteFrame=this.bgSpriteFrame[1],this.countBgSprite.spriteFrame=this.countBgSpriteFrame[1],this.rewardTwoBool&&(this.countBgSprite2.spriteFrame=this.countBgSpriteFrame[1])):1==t?(this.compAni.active=!0,this.bgSprite.spriteFrame=this.bgSpriteFrame[1],this.countBgSprite.spriteFrame=this.countBgSpriteFrame[1],this.rewardTwoBool&&(this.countBgSprite2.spriteFrame=this.countBgSpriteFrame[1])):(this.compAni.active=!1,this.bgSprite.spriteFrame=this.bgSpriteFrame[0],this.countBgSprite.spriteFrame=this.countBgSpriteFrame[0],this.rewardTwoBool&&(this.countBgSprite2.spriteFrame=this.countBgSpriteFrame[0]))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",PlaySceneMgr:"PlaySceneMgr"}],PopupAttend:[function(t,e,i){"use strict";var a;function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"d7dfdTmpIBJ4K8AOKKFmAqg","PopupAttend");var n=t("PopupMgr"),r=t("SoundMgr"),c=t("DataMgr"),o=(t("Global"),t("LocaleMgr")),h=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:(a={allNode:cc.Node,titleLabel:cc.Label,explainLabel:cc.Label,okLabel:cc.Label,descLabel:cc.Label,attendObjArr:[cc.Node],okBtn:cc.Button},s(a,"okLabel",cc.Label),s(a,"adsBtn",cc.Button),s(a,"_btnLockFlag",!1),s(a,"_attendData",null),s(a,"_tempReward",null),s(a,"_playSceneMgr",null),a),start:function(){this.titleLabel.string=o.getString(3066),this.titleLabel.fontSize=o.getTitleFontSize(),this.okLabel.string=o.getString(1002),this.explainLabel.string=o.getString(9034,"<br/>","\n");for(var t=0;t<this.attendObjArr.length;++t){var e=c.getAttendInfo(t);this.attendObjArr[t].getComponent("PopupAttendObj").init(e[0],e[1],e[2],e[3],e[4])}},showPopup:function(t){this._playSceneMgr=h.instance,this.node.active=!0,this._attendData=t,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0;for(var e=0;e<this.attendObjArr.length;++e)e<t[0]?this.attendObjArr[e].getComponent("PopupAttendObj").updateSprite(0):this.attendObjArr[e].getComponent("PopupAttendObj").updateSprite(2);t[1]>0?(this.okBtn.interactable=!0,this.adsBtn.interactable=!0,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn1"),this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn4")):(this.okBtn.interactable=!1,this.adsBtn.interactable=!1,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"),this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"))},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_ATTEND))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},OnOkBtn:function(){this._btnLockFlag||(this._tempReward=c.getAttendReward(1),this.attendObjArr[this._attendData[0]].getComponent("PopupAttendObj").updateSprite(1),this.okBtn.interactable=!1,this.adsBtn.interactable=!1,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"),this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"),r.playSound(r.audioNewCat),this.scheduleOnce(this.showRewardPopup,.6))},OnCancleBtn:function(){c.chkAttend()[1]>0?(this._tempReward=c.getAttendReward(1),this.attendObjArr[this._attendData[0]].getComponent("PopupAttendObj").updateSprite(1),this.okBtn.interactable=!1,this.adsBtn.interactable=!1,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"),this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"),this.showRewardPopup()):this.hidePopupHandler()},showRewardPopup:function(){n.instance.showPopup(n.POPUP_REWARD,this._tempReward),this._btnLockFlag=!1,this.hidePopupHandler()},OnAdsBtn:function(){this._btnLockFlag||(this._tempReward=c.getAttendReward(2),this.attendObjArr[this._attendData[0]].getComponent("PopupAttendObj").updateSprite(1),this.okBtn.interactable=!1,this.adsBtn.interactable=!1,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"),this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._playSceneMgr.getSpriteToUI("btn2"),r.playSound(r.audioNewCat),this.scheduleOnce(this.showRewardPopup,.6))},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupCare:[function(t,e,i){"use strict";cc._RF.push(e,"92055Mr9URGi4EbwW6+vVx5","PopupCare");var a=t("Global"),s=t("DataMgr"),n=t("PopupMgr"),r=t("LocaleMgr"),c=t("PlaySceneMgr"),o=t("RareCatMgr"),h=t("AccessoryMgr"),u=t("SoundMgr");cc.Class({extends:cc.Component,properties:{expUpSpine:sp.Skeleton,lvUpEff:sp.Skeleton,expUpNode:cc.Node,expUpLabel:cc.Label,popupAdsCareItem:cc.Node,popupUseCareItem:cc.Node,allNode:cc.Node,imoticonNode:cc.Node,imoticonSprite:cc.Sprite,accHatSprite:cc.Sprite,accHatGradeSprite:cc.Sprite,accNeckSprite:cc.Sprite,accNeckGradeSprite:cc.Sprite,adsBtnLabel:cc.Label,catName:cc.Label,catRankSprite:cc.Sprite,catSkeleton:sp.Skeleton,catStatHealthLabel:cc.Label,catStatCharmLabel:cc.Label,catStatIntLabel:cc.Label,catLvLabel:cc.Label,catExpLabel:cc.Label,catExpProgress:cc.ProgressBar,careItemCountLabelArr:[cc.Label],_popupAdsCareItem:null,_popupUseCareItem:null,_catGrade:0,_userCatData:null,_aniName:"",_accSlotHat:"",_accSlotNeck:"",_accHatData:null,_accNeckData:null,_btnLockFlag:!0,_rareCatMgr:null,_accessoryMgr:null,_playSceneMgr:null,_accState:0,_expUpItemIdx:0,_getExp:0,_catWant:-1,_slotIdx:-1,_oldCatLv:0,_newCatLv:0,_newExp:0,_health:0,_charm:0,_int:0,_imoticonTransBool:!0,_HAT_ACC:0,_NECK_ACC:1,_NORMAL_ITEM_MAX:4,_RARE_ITEM_MIN:11,_ADS_GET_ITEM_COUNT:5},start:function(){var t=this;this._popupAdsCareItem=this.popupAdsCareItem.getComponent("PopupAdsCareItem"),this._popupUseCareItem=this.popupUseCareItem.getComponent("PopupUseCareItem"),this.adsBtnLabel.string=r.getString(1077),this.lvUpEff.setCompleteListener(function(e){t.lvUpEff.clearTrack(0),t.lvUpEff.node.active=!1})},showPopup:function(t,e){this._rareCatMgr=o.instance,this._accessoryMgr=h.instance,this._playSceneMgr=c.instance,this._catGrade=t,this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.popupView,.5),this.scheduleOnce(this.fadeOut,.5),this.allNode.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.unsetBtnLock,this))),this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_FULL_SCREEN),this._btnLockFlag=!0},fadeIn:function(){this._playSceneMgr.fadeIn(.5)},fadeOut:function(){this._playSceneMgr.fadeOut(.5)},popupView:function(){this.node.active=!0,this.initData(),this.updateItemCount(),this.updateCatExp()},initData:function(){var t=s.getRareCatData(this._catGrade);this._userCatData=t;var e=this._rareCatMgr.getRareCatDataGrade(this._catGrade),i=t.getAccHatPK(),a=t.getAccNeckPK();this._accHatData=s.getUserHatAccData(i),this._accNeckData=s.getUserNeckAccData(a);var n=e.getUnitNameTextKey();this.catName.string=r.getString(n);var c=e.getRank();if(this.catRankSprite.spriteFrame=this._rareCatMgr.getUnitRankSprite(c),this.catSkeleton.skeletonData=e.getSpineData(),this.catSkeleton.setSkin(e.getSpineSkin()),this._aniName=e.getSpineAni(),this._accSlotHat=e.getSpineAccSlotHat(),null!=this._accNeckData?this._accSlotNeck=e.getSpineAccSlotNeck(this._accNeckData.getIdx()):(this.catSkeleton.setAttachment("neck_front","none"),this.catSkeleton.setAttachment("neck_back","none")),this.catSkeleton.setAnimation(0,"idle",!0),null==this._accHatData)this.catSkeleton.setAttachment(this._accSlotHat,"none"),this.accHatSprite.spriteFrame=null,this.accHatGradeSprite.spriteFrame=null;else{var o=(u=this._accHatData.getAccType())+"_"+(l=this._accHatData.getIdx()),h=this._accHatData.getAccGrade();this.catSkeleton.setAttachment(this._accSlotHat,o),this.accHatSprite.spriteFrame=this._accessoryMgr.getAccSprite(u,l),this.accHatGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(h)}if(null==this._accNeckData)this.accNeckSprite.spriteFrame=null,this.accNeckGradeSprite.spriteFrame=null;else{var u,l;o=(u=this._accNeckData.getAccType())+"_"+(l=this._accNeckData.getIdx()),h=this._accNeckData.getAccGrade();this.catSkeleton.setAttachment(this._accSlotNeck,o),this.accNeckSprite.spriteFrame=this._accessoryMgr.getAccSprite(u,l),this.accNeckGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(h)}var _=t.getStatHealth(),p=t.getStatCharm(),d=t.getStatInt();if(null!=this._accHatData){var g=this._accHatData.getStatType(),S=this._accHatData.getStat();switch(g){case"Health":_+=parseInt(S);break;case"Charm":p+=parseInt(S);break;case"Int":d+=parseInt(S)}}if(null!=this._accNeckData){var T=this._accNeckData.getStatType(),A=this._accNeckData.getStat();switch(T){case"Health":_+=parseInt(A);break;case"Charm":p+=parseInt(A);break;case"Int":d+=parseInt(A)}}this._health=_,this._charm=p,this._int=d,this.catStatHealthLabel.string=_,this.catStatCharmLabel.string=p,this.catStatIntLabel.string=d,this.updateImoticon()},updateCatExp:function(t){void 0==t&&(t=0),this._oldCatLv=this._userCatData.getFriendshipLv();var e=s.addRareCatExp(this._catGrade,t);this._newCatLv=this._userCatData.getFriendshipLv();var i=e;this._newExp=i,0==t?(this.updateCatLv(this._newCatLv,e),this.catExpProgress.progress=e):this._newCatLv>this._oldCatLv?(this.progressLvUp(),this.scheduleOnce(this.lvUpAni,.5),this.initData()):(this.progressExpUp(),this.scheduleOnce(this.expUpAni,.5))},progressLvUp:function(){var t=this;cc.tween(this.catExpProgress).to(1,{progress:1}).call(function(){t.chkLvUp()}).call(function(){t.resetExp()}).start()},progressExpUp:function(){var t=this;cc.tween(this.catExpProgress).to(1,{progress:this._newExp}).call(function(){t.updateCatLv(t._oldCatLv,t._newExp)}).start()},chkLvUp:function(){this._oldCatLv++,this._oldCatLv<this._newCatLv?this.progressLvUp():this.progressExpUp()},resetExp:function(){this.catExpProgress.progress=0,this.updateCatLv(this._oldCatLv,this._newExp)},updateCatLv:function(t,e){this.catLvLabel.string="Lv. "+t,this.catExpLabel.string=(100*e).toFixed(1)+"%"},updateItemCount:function(){for(var t=0;t<this.careItemCountLabelArr.length;t++){var e=0;e=t<this._NORMAL_ITEM_MAX?s.getCareItemCount(t+1):s.getCareItemCount(this._RARE_ITEM_MIN-this._NORMAL_ITEM_MAX+t),this.careItemCountLabelArr[t].string=e}},updateImoticon:function(){var t=this._userCatData.getCatState();t>=0?(this.imoticonSprite.spriteFrame=this._playSceneMgr.getEmoticon(t),this.imoticonNode.active=!0):this.imoticonNode.active=!1},getCatData:function(){return this._userCatData},expUp:function(t,e,i){this._expUpItemIdx=t,this._getExp=e,this._catWant=i;var n=s.getCareItemCount(t);n-=1,s.setCareItemCount(t,n);var r=this._playSceneMgr.getSelectedSlot();this._slotIdx=r,i==a.CARE_HAPPY?(this._playSceneMgr.chkGuide(a.GUIDE_RARE_CAT_DEBUFF_CARE),s.incQuestCount(a.QUEST_RARE_CAT_DEBUFF_CARE,1),this._playSceneMgr.chkCatHelp(),this._userCatData.setCatState(-1),this.scheduleOnce(this.expUpEffect,.5),this.scheduleOnce(this.expUpImoticon,.5)):i==a.CARE_ANGRY?this.scheduleOnce(this.expUpImoticon,.5):i==a.CARE_CALM&&u.playSound(u.audioBtn2);this._userCatData.getFriendshipLv();this.updateCatExp(e),this.chkQuest(),this.updateItemCount(),this._playSceneMgr.updateImoticon(this._slotIdx),s.saveData()},chkQuest:function(){switch(s.getCareItemDataToIdx(this._expUpItemIdx).getCareType()){case a.CARE_HUNGRY:s.incQuestCount(a.QUEST_RARE_CAT_FOOD_CARE,1);break;case a.CARE_DIRTY:s.incQuestCount(a.QUEST_RARE_CAT_DIRTY_CARE,1);break;case a.CARE_SICK:s.incQuestCount(a.QUEST_RARE_CAT_SICK_CARE,1);break;case a.CARE_BORED:s.incQuestCount(a.QUEST_RARE_CAT_DORED_CARE,1)}},lvUpAni:function(){u.playSound(u.audioNewCat),this.lvUpEff.node.active=!0,this.lvUpEff.setAnimation(0,"levelup",!1)},expUpAni:function(){this.expUpNode.stopAllActions(),this.expUpNode.y=80,this.expUpNode.opacity=0,this.expUpLabel.string=this._getExp,this.expUpNode.active=!0,this.expUpNode.runAction(cc.moveBy(1.5,cc.v2(0,30)).easing(cc.easeBackOut())),this.expUpNode.runAction(cc.sequence(cc.fadeIn(.3),cc.delayTime(.9),cc.fadeOut(.3),cc.callFunc(this.expUpAniEnd,this)))},expUpAniEnd:function(){this.expUpNode.active=!1},expUpEffect:function(){this.expUpSpine.node.active=!0;var t="";switch(s.getCareItemDataToIdx(this._expUpItemIdx).getCareType()){case a.CARE_HUNGRY:t="food",u.playSound(u.audioCareFood);break;case a.CARE_DIRTY:t="shower",u.playSound(u.audioCareClean);break;case a.CARE_SICK:t="medical",u.playSound(u.audioCareDrug);break;case a.CARE_BORED:t="play",u.playSound(u.audioCareToy)}this.expUpSpine.setSkin(t),this._expUpItemIdx<this._RARE_ITEM_MIN?this.expUpSpine.setAnimation(0,"care_eff1",!1):this.expUpSpine.setAnimation(0,"care_eff2",!1)},expUpImoticon:function(){this._imoticonTransBool=!1,this.imoticonNode.active=!0,this.imoticonNode.x=-100,this.imoticonNode.y=100,this._catWant==a.CARE_HAPPY?(this.imoticonSprite.spriteFrame=this._playSceneMgr.getEmoticon(a.CAT_EMOTICON_LIKE),u.playSound(u.audioCareSuccess),this.imoticonNode.runAction(cc.sequence(cc.moveBy(.2,cc.v2(0,10)),cc.moveBy(.2,cc.v2(0,-10)),cc.moveBy(.2,cc.v2(0,10)),cc.moveBy(.2,cc.v2(0,-10)),cc.delayTime(1),cc.callFunc(this.endExpUpImoticon,this)))):this._catWant==a.CARE_ANGRY&&(this.imoticonSprite.spriteFrame=this._playSceneMgr.getEmoticon(a.CAT_EMOTICON_ANGRY),u.playSound(u.audioCareFail),this.imoticonNode.runAction(cc.sequence(cc.moveBy(.1,cc.v2(0,5)),cc.moveBy(.1,cc.v2(0,-5)),cc.moveBy(.1,cc.v2(0,-5)),cc.moveBy(.1,cc.v2(0,5)),cc.moveBy(.1,cc.v2(0,-5)),cc.moveBy(.1,cc.v2(0,5)),cc.moveBy(.1,cc.v2(0,5)),cc.moveBy(.1,cc.v2(0,-5)))),this.imoticonNode.runAction(cc.sequence(cc.moveBy(.1,cc.v2(5,0)),cc.moveBy(.1,cc.v2(-5,0)),cc.moveBy(.1,cc.v2(5,0)),cc.moveBy(.1,cc.v2(-5,0)),cc.moveBy(.1,cc.v2(-5,0)),cc.moveBy(.1,cc.v2(5,0)),cc.moveBy(.1,cc.v2(5,0)),cc.moveBy(.1,cc.v2(-5,0)),cc.delayTime(1),cc.callFunc(this.endExpUpImoticon,this))))},endExpUpImoticon:function(){this._imoticonTransBool=!0,this.imoticonNode.active=!1},showAds:function(t){var e=s.getCareItemCount(t);e+=a.CARE_ADS_ITEM_COUNT,s.setCareItemCount(t,e),s.saveData(),this.updateItemCount();var i=s.getCareItemDataToIdx(t).getCurrencyType(),r=[],c={};c.type=i,c.count=a.CARE_ADS_ITEM_COUNT,r.push(c),n.instance.showPopup(n.POPUP_REWARD,r,.3)},OnCatArrowBtn:function(t,e){u.playSound(u.audioBtn0);var i=e,a=this._catGrade;this._catGrade=s.getNextCat(this._catGrade,i),a!=this._catGrade&&(this.endAllAni(),this.initData(),this.updateCatExp())},OnItemBtn:function(t,e){var i=parseInt(e);if(u.playSound(u.audioBtn0),cc.log(i),s.getCareItemCount(i)>0){var a=0;switch(i){case 1:a=this._health;break;case 2:a=this._charm;break;case 3:a=this.seachMax([this._health,this._charm,this._int]);break;case 4:a=this._int;break;case 11:a=this._health;break;case 12:a=this._charm;break;case 13:a=this.seachMax([this._health,this._charm,this._int]);break;case 14:a=this._int}this._popupUseCareItem.showPopup(this,i,this._userCatData,a),this._imoticonTransBool=!1}else i<this._RARE_ITEM_MIN?this._popupAdsCareItem.showPopup(this,i):n.instance.showPopup(n.POPUP_GOODS_SHOP,1)},seachMax:function(t){for(var e=0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return e},OnAdsBtn:function(){this._popupAdsCareItem.showPopup(this),u.playSound(u.audioPopupOpen)},setImoticonTransBool:function(t){this._imoticonTransBool=t},getImoticonTransBool:function(){return this._imoticonTransBool},hidePopup:function(){this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.fadeOut,.5),this.scheduleOnce(this.destroyPopup,.5),this.scheduleOnce(this.endHideAni,.5),this._userCatData=null,this._imoticonTransBool=!0},endHideAni:function(){n.instance.nextPopup()},endAllAni:function(){this.imoticonNode.stopAllActions(),this.expUpNode.stopAllActions(),this.expUpNode.active=!1,this.imoticonNode.active=!1,this.expUpSpine.clearTrack(0),this.expUpSpine.node.active=!1,this.lvUpEff.clearTrack(0),this.lvUpEff.node.active=!1,this.unschedule(this.expUpEffect),this.unschedule(this.expUpImoticon),this.unschedule(this.expUpAni),this.unschedule(this.lvUpAni)},destroyPopup:function(){this.allNode.stopAllActions(),this.endAllAni(),this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_PLAY),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_CARE))}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr"}],PopupCashShop:[function(t,e,i){"use strict";var a;function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"5ff63nqggxJZ6pkhbgUUDme","PopupCashShop");t("Global"),t("UnitMgr");var n=t("DataMgr"),r=t("PopupMgr"),c=t("SoundMgr"),o=t("LocaleMgr");cc.Class({extends:cc.Component,properties:(a={_playSceneMgr:null,_topUIMgr:null,_BotUIMgr:null,_mergeBoardMgr:null,cashShopSlotPrefab:cc.Prefab,allNode:cc.Node,titleLabel:cc.Label,spriteEvent:cc.Sprite,spritePackage:cc.Sprite,spriteCurrency:cc.Sprite,spriteTapEvent:cc.Sprite,spriteTapPackage:cc.Sprite,spriteTapCurrency:cc.Sprite,spriteFrameTap1:cc.SpriteFrame,spriteFrameTap2:cc.SpriteFrame,spriteFrameTapEvent1:cc.SpriteFrame,spriteFrameTapEvent2:cc.SpriteFrame,spriteFrameTapPackage1:cc.SpriteFrame,spriteFrameTapPackage2:cc.SpriteFrame,spriteFrameTapCurrency1:cc.SpriteFrame,spriteFrameTapCurrency2:cc.SpriteFrame,cateBtnArr:[cc.Button],cateScrollview:[cc.Node],cateContent:[cc.Node]},s(a,"titleLabel",cc.Label),s(a,"_nowCate",0),s(a,"_eventSlotObjArr",null),s(a,"_packageSlotObjArr",null),s(a,"_currencySlotObjArr",null),s(a,"_tempShopData",null),s(a,"_tempAdsUnitGrade",-1),s(a,"_btnLockFlag",!1),s(a,"_MIN_UNIT_SLOT_IDX",0),s(a,"_MAX_UNIT_SLOT_IDX",0),s(a,"_TAP_EVENT",0),s(a,"_TAP_PACKAGE",1),s(a,"_TAP_CURRENCY",2),s(a,"_SUCCESS",0),s(a,"_COIN_FAIL",1),s(a,"_CASH_COIN_FAIL",2),s(a,"_ALL_BUY_FAIL",3),s(a,"_FULL_SLOT_FAIL",4),a),statics:{},start:function(){this.titleLabel.string=o.getString(1101)},init:function(t,e,i){this._playSceneMgr=t,this._topUIMgr=e,this._BotUIMgr=i,this._eventSlotObjArr=new Array,this._packageSlotObjArr=new Array,this._currencySlotObjArr=new Array;for(var a=0;a<n.getCashShopCount();a++){var s=n.getCashShopData(a),r=s.getCate();if(3!=r){var c=cc.instantiate(this.cashShopSlotPrefab);switch(r){case this._TAP_EVENT:this._eventSlotObjArr[a]=c;break;case this._TAP_PACKAGE:this._packageSlotObjArr[a]=c;break;case this._TAP_CURRENCY:this._currencySlotObjArr[a]=c}this.cateContent[r].addChild(c),c.getComponent("CashShopObj").init(s,this)}}this._btnLockFlag=!0},OnTransTap:function(t,e){cc.log(e);var i=parseInt(e);this.transTap(i)},transTap:function(t){for(var e,i=0;e=this.cateContent[i];i++)t==i?(e.active=!0,this.cateScrollview[i].active=!0):(e.active=!1,this.cateScrollview[i].active=!1);switch(t){case this._TAP_EVENT:cc.log("\uc774\ubca4\ud2b8 \uc0c1\uc810"),this.spriteEvent.spriteFrame=this.spriteFrameTapEvent1,this.spriteTapEvent.spriteFrame=this.spriteFrameTap1,this.spritePackage.spriteFrame=this.spriteFrameTapPackage2,this.spriteTapPackage.spriteFrame=this.spriteFrameTap2,this.spriteCurrency.spriteFrame=this.spriteFrameTapCurrency2,this.spriteTapCurrency.spriteFrame=this.spriteFrameTap2;break;case this._TAP_PACKAGE:cc.log("\ud328\ud0a4\uc9c0 \uc0c1\uc810"),this.spriteEvent.spriteFrame=this.spriteFrameTapEvent2,this.spriteTapEvent.spriteFrame=this.spriteFrameTap2,this.spritePackage.spriteFrame=this.spriteFrameTapPackage1,this.spriteTapPackage.spriteFrame=this.spriteFrameTap1,this.spriteCurrency.spriteFrame=this.spriteFrameTapCurrency2,this.spriteTapCurrency.spriteFrame=this.spriteFrameTap2;break;case this._TAP_CURRENCY:cc.log("\uc7ac\ud654 \uc0c1\uc810"),this.spriteEvent.spriteFrame=this.spriteFrameTapEvent2,this.spriteTapEvent.spriteFrame=this.spriteFrameTap2,this.spritePackage.spriteFrame=this.spriteFrameTapPackage2,this.spriteTapPackage.spriteFrame=this.spriteFrameTap2,this.spriteCurrency.spriteFrame=this.spriteFrameTapCurrency1,this.spriteTapCurrency.spriteFrame=this.spriteFrameTap1}c.playSound(c.audioBtn0)},showPopup:function(t){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0,null!=t&&this.transTap(t)},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,r.instance.hidePopup(r.POPUP_CASHSHOP))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){r.instance.hideLoading(),this._btnLockFlag=!1},showAlarm:function(t){var e="",i=!1;switch(t){case this._SUCCESS:e=o.getString(3005),i=!0,c.playSound(c.audioShopBuyItem);break;case this._COIN_FAIL:e=o.getString(3006),c.playSound(c.audioWarning);break;case this._CASH_COIN_FAIL:e=o.getString(3008),c.playSound(c.audioWarning);break;case this._ALL_BUY_FAIL:e=o.getString(3009),c.playSound(c.audioWarning);break;case this._FULL_SLOT_FAIL:e=o.getString(3010),c.playSound(c.audioWarning)}this._playSceneMgr.showAlarm(e,i,0,this._playSceneMgr.OVERLAY)},buyProduct:function(t){for(var e=0;e<t.length;e++)n.setRewardData(t[e].type,t[e].count);r.instance.showPopup(r.POPUP_REWARD,t,0)},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],PopupCatHotel:[function(t,e,i){"use strict";cc._RF.push(e,"3dd937g1NlLAoxCoOV97WvN","PopupCatHotel");var a=t("RareCatMgr"),s=t("Global"),n=t("DataMgr"),r=t("PopupMgr"),c=t("LocaleMgr"),o=t("RareCatUserData");cc.Class({extends:cc.Component,properties:{rareCatSlotPrefab:cc.Prefab,allNode:cc.Node,maskNode:cc.Node,selectedCatNode:cc.Node,titleLabel:cc.Label,catCountLabel:cc.Label,npcCatLabel:cc.Label,cateScrollview:[cc.Node],cateContent:[cc.Node],_playSceneMgr:null,_topUIMgr:null,_BotUIMgr:null,_rareBoardMgr:null,_slotObjArr:null,_catCount:0,_catSetBool:!0,_selectedCat:null,_maskBool:!1,_deployBool:!1},start:function(){this.titleLabel.string=c.getString(3060),this.titleLabel.fontSize=c.getTitleFontSize(),this.npcCatLabel.string=c.getString(3055),this._selectedCat=this.selectedCatNode.getComponent("SelectedCat")},init:function(t,e,i,a){this._playSceneMgr=t,this._topUIMgr=e,this._BotUIMgr=i,this._rareBoardMgr=a,this.calCatCount(),n.getPageIndex()==n.CAT_MODE_RARE&&this._playSceneMgr.updateCountLabel()},initCatSlot:function(){this._catSetBool=!0,this._deployBool=!1,this._catCount=0,null==this._slotObjArr&&(this._slotObjArr=new Array);for(var t=new o,e=s.RARE_CAT_MIN;e<=s.TOTAL_CAT_NUMBER;e++)if(0!=(t=n.getRareCatData(e)).getCollect()&&-1==t.getSlotIdx()){var i=null;this._slotObjArr.length-1<this._catCount?(i=cc.instantiate(this.rareCatSlotPrefab),this.cateContent[0].addChild(i),this._slotObjArr.push(i)):(i=this._slotObjArr[this._catCount],this._slotObjArr[this._catCount].active=!0),i.getComponent("rareCatSlotObj").init(e,a.instance.getRareCatDataGrade(e),this),this._catCount++}this.catCountLabel.string=this._catCount,this._playSceneMgr.updateCountLabel(this._catCount)},destroyCat:function(){},refreshHotel:function(){this.destroyCat(),this.initCatSlot()},calCatCount:function(){this._catCount=0;for(var t=new o,e=11;e<=s.TOTAL_CAT_NUMBER;e++)0!=(t=n.getRareCatData(e)).getCollect()&&-1==t.getSlotIdx()&&this._catCount++;this.catCountLabel.string=this._catCount,this._playSceneMgr.setRareCatCount(this._catCount)},slotInit:function(){this.initCatSlot()},tutoDeployCat:function(){this._slotObjArr[0].getComponent("rareCatSlotObj").OnBtn()},deployCat:function(t){this._playSceneMgr.setSelectedCat(t),this._playSceneMgr.setDeployState(this._playSceneMgr.DEPLOY_STATE_PLAY),this._maskBool?(this._playSceneMgr.setDeployState(this._playSceneMgr.DEPLOY_STATE_CAT),this._deployBool=!0,this.scheduleOnce(this.selectUsedSlot,.3)):this.scheduleOnce(this.setRareCatDirect,.25),this.hidePopupHandler()},setRareCatDirect:function(){this._rareBoardMgr.setRareCatDirect()},selectUsedSlot:function(){this._rareBoardMgr.selectUsedSlot()},showPopupSlotBuy:function(t){r.instance.showPopup(r.POPUP_SLOT_PLUS,t)},getCatCount:function(){return this._catCount},getCatSetBool:function(){return this._catSetBool},setCatSetBool:function(t){this._catSetBool=t},showPopup:function(t){this._playSceneMgr.setDeployState(this._playSceneMgr.DEPLOY_STATE_HOTEL),this._maskBool=t,this.maskNode.active=this._maskBool,this.initCatSlot(),this.node.active=!0,this.allNode.y=-200,this.allNode.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,0)).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,r.instance.hidePopup(r.POPUP_HOTEL))},hidePopup:function(){this._deployBool||this._playSceneMgr.setDeployState(this._playSceneMgr.DEPLOY_STATE_PLAY),this.allNode.runAction(cc.moveTo(.3,cc.v2(0,-200)).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this._selectedCat.moveDown(),this.calCatCount(),this._playSceneMgr.updateCountLabel();for(var t=0;t<this._slotObjArr.length;t++)this._slotObjArr[t].active=!1;this.destroyCat(),this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){r.instance.hideLoading(),this._btnLockFlag=!1}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",RareCatUserData:"RareCatUserData"}],PopupCatInfo:[function(t,e,i){"use strict";cc._RF.push(e,"2039dIpr+xOdovU7ilpBhCq","PopupCatInfo");var a=t("LocaleMgr"),s=(t("DataMgr"),t("UnitMgr")),n=t("RareCatMgr"),r=t("PlaySceneMgr"),c=(t("PopupMgr"),t("Global"));cc.Class({extends:cc.Component,properties:{rareCoinNode:cc.Node,statNode:cc.Node,catGradeNode:cc.Node,catGradeSprite:cc.Sprite,catSprite:cc.Sprite,catNameLabel:cc.Label,catExplainLabel:cc.Label,catGradeLabel:cc.Label,catCoin:cc.Label,catRareCoin:cc.Label,statHealth:cc.Label,statCharm:cc.Label,statInt:cc.Label,_playSceneMgr:null},showPopup:function(t){this._playSceneMgr=r.instance,this.node.active=!0;var e=null,i="",o=0,h=0;if(t<c.RARE_CAT_MIN){this.rareCoinNode.active=!1,this.statNode.active=!1,this.catGradeNode.active=!0,e=s.instance.getUnitDataGrade(t),i="n",this.catSprite.spriteFrame=s.instance.getUnitSpriteForGrade(t),o=e.getUnitTextKey(),h=e.getExplainTextKey(),this.catGradeLabel.string=t;var u=parseInt(e.getGetCoin());this.catCoin.string=c.getNumToType(u)}else{this.rareCoinNode.active=!0,this.statNode.active=!0,this.catGradeNode.active=!1,i=(e=n.instance.getRareCatDataGrade(t)).getRank(),this.catSprite.spriteFrame=n.instance.getUnitSpriteForGrade(t),o=e.getUnitNameTextKey(),h=e.getUnitExplainTextKey();u=parseInt(e.getGetCoin());var l=parseInt(e.getGetRareCoin());this.catCoin.string=c.getNumToType(u),this.catRareCoin.string=c.getNumToType(l),this.statHealth.string=e.getStatHealth(),this.statCharm.string=e.getStatCharm(),this.statInt.string=e.getStatInt()}this.catGradeSprite.spriteFrame=this._playSceneMgr.getCatRankSprite(i),this.catNameLabel.string=a.getString(o),this.catExplainLabel.string=a.getString(h,"<br/>","\n")},hidePopup:function(){this.node.active=!1}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",UnitMgr:"UnitMgr"}],PopupContent:[function(t,e,i){"use strict";cc._RF.push(e,"aadb8YN0EBDyoOQw6dHcEOj","PopupContent");var a=t("PopupMgr"),s=t("SoundMgr"),n=t("DataMgr"),r=t("Global"),c=t("LocaleMgr"),o=t("TutoMgr"),h=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,effect1:sp.Skeleton,effect2:sp.Skeleton,backStar:sp.Skeleton,maskNode:cc.Node,allNode:cc.Node,titleLabel:cc.Label,subTitleLabel:cc.Label,okLabel:cc.Label,explainLabel:cc.Label,okBtn:cc.Button,moveContent:cc.Node,contentSprite:cc.Sprite,moveContentSprite:cc.Sprite,destObjArr:[cc.Node],_contentKind:0,_contentData:null,_playSceneMgr:null,_btnLockFlag:!1,_bossRewardFlag:!1},start:function(){this.titleLabel.string=c.getString(1085),this.okLabel.string=c.getString(1001)},showPopup:function(t,e){this._playSceneMgr=h.instance,this.node.active=!0,this.allNode.active=!1,this.moveContent.active=!1,this.maskNode.opacity=0,this._contentKind=t,this._contentData=n.getContentData(this._contentKind),n.setContentOpen(this._contentKind),n.saveData(),this._playSceneMgr.setContentOpenIdx(-1),this.initData(),this._btnLockFlag=!0,void 0==e||0==e?this.actShowPopup():this.scheduleOnce(this.actShowPopup,e)},initData:function(){this.contentSprite.spriteFrame=this._playSceneMgr.getOpenContentSprite(this._contentKind),this.moveContentSprite.spriteFrame=this._playSceneMgr.getOpenContentSprite(this._contentKind);var t=this._contentData.getNameTextKey();this.subTitleLabel.string=c.getString(t);var e=this._contentData.getExplainTextKey();this.explainLabel.string=c.getString(e,"<br/>","\n")},actShowPopup:function(){this.allNode.active=!0,this.allNode.scale=0,this.allNode.opacity=255,this.maskNode.opacity=150,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.delayTime(.5),cc.callFunc(this.showBtn,this),cc.delayTime(.3),cc.callFunc(this.unsetBtnLock,this))),s.playSound(s.audioNewCat),this.okBtn.node.active=!1,this.moveContent.active=!1,this.ribbonAni.addAnimation(0,"ribbon",!1),this.effect1.setAnimation(0,"cat_back_eff_nomal",!0),this.scheduleOnce(this.showUnlockEffect,10)},showUnlockEffect:function(){if(!this._btnLockFlag){this._btnLockFlag=!0,this.allNode.runAction(cc.fadeTo(.3,0)),this.moveContent.active=!0,this.moveContent.x=0,this.moveContent.y=70,this.moveContent.opacity=0,this.effect2.setAnimation(0,"cat_back_eff_nomal",!0),s.playSound(s.audioBtn0);var t=this.destObjArr[this._contentKind].convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.convertToNodeSpaceAR(t);this.moveContent.runAction(cc.sequence(cc.fadeTo(.3,255),cc.delayTime(.5),cc.callFunc(this.moveSound,this),cc.moveTo(1,e).easing(cc.easeCircleActionOut()),cc.delayTime(.5),cc.callFunc(this.hidePopup,this)))}},moveSound:function(){},startTuto:function(){switch(this._contentKind){case r.CONTENT_PET_SHOP:o.instance.startTutorial(o.TUTO_TYPE_SHOP,n.getTutoProc(o.TUTO_TYPE_SHOP));break;case r.CONTNET_GALLERY:o.instance.startTutorial(o.TUTO_TYPE_GALLERY,n.getTutoProc(o.TUTO_TYPE_GALLERY));break;case r.CONTENT_GACHA:o.instance.startTutorial(o.TUTO_TYPE_RANDOMBOX,n.getTutoProc(o.TUTO_TYPE_RANDOMBOX));break;case r.CONTENT_CONTEST:o.instance.startTutorial(o.TUTO_TYPE_CONTEST,n.getTutoProc(o.TUTO_TYPE_CONTEST));break;case r.CONTENT_QUEST:o.instance.startTutorial(o.TUTO_TYPE_QUEST,n.getTutoProc(o.TUTO_TYPE_QUEST)),n.getQuestList()}},hidePopup:function(){this._playSceneMgr.updateContent(this._contentKind),this.moveContent.runAction(cc.fadeTo(.3,0)),this.maskNode.runAction(cc.fadeTo(.3,0)),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.moveContent.stopAllActions(),a.instance.nextPopup(),this.startTuto(),this.node.active=!1,this.effect1.clearTrack(0),this.effect2.clearTrack(0),this.ribbonAni.clearTrack(0)},showBtn:function(){this.okBtn.node.active=!0,this.okBtn.node.opacity=0,this.okBtn.node.runAction(cc.fadeTo(.2,255))},unsetBtnLock:function(){a.instance.hideLoading(),this._btnLockFlag=!1},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.showUnlockEffect(),!0)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr"}],PopupContestResult:[function(t,e,i){"use strict";cc._RF.push(e,"94718Sd0KNGfIXA1Puv7/L0","PopupContestResult");var a=t("Global"),s=t("DataMgr"),n=t("PopupMgr"),r=t("LocaleMgr"),c=t("PlaySceneMgr"),o=t("RareCatMgr");function h(t,e){this.name=t,this.score=e}cc.Class({extends:cc.Component,properties:{contestRankObj:cc.Prefab,nextProgress:cc.ProgressBar,allNode:cc.Node,contentNode:cc.Node,rankObjNode:cc.Node,myRank:cc.Node,myRankBg:cc.Node,titleLabel:cc.Label,okBtnLabel:cc.Label,nextTrophyLabel:cc.Label,beforeLvLabel:cc.Label,afterLvLabel:cc.Label,titleBgSprite:cc.Sprite,beforeLvSprite:cc.Sprite,afterLvSprite:cc.Sprite,trophySprite:cc.Sprite,rewardLabel:[cc.Label],_beforeTrophyCount:0,_afterTrophyCount:0,_myScore:0,_myRank:0,_catGrade:0,_contestLv:0,_myCatName:"",_trophySpriteFrame:null,_rankObjArr:null,_catRankArr:null,_catNameArr:null,_rewardTable:null,_btnLockFlag:!0,_rareCatMgr:null,_accessoryMgr:null,_playSceneMgr:null,_DUMMY_CAT_COUNT:39,_MIN_DUMMY_SCORE:4,_MAX_DUMMY_SCORE:35,_MAX_SCORE:35,_MAX_MARK_NUM:10,_MYRANK_DEFAULT:-30,_MYRANK_DISTANCE:80},onLoad:function(){this.titleLabel.string=r.getString(1070),this.okBtnLabel.string=r.getString(1001)},showPopup:function(t,e){this._rareCatMgr=o.instance,this._playSceneMgr=c.instance,this._myScore=t.score,this._catGrade=t.catGrade,this.contentNode.y=180,this._trophySpriteFrame=this._playSceneMgr.getContestKindTrophy(),this.trophySprite.spriteFrame=this._trophySpriteFrame,this.titleBgSprite.spriteFrame=this._playSceneMgr.getContestKindSprite(),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.initData(),this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},initData:function(){this._beforeTrophyCount=s.getTrophy(),this._contestLv=Math.floor(this._beforeTrophyCount/100+1),this._rewardTable=s.getContestRewardTable(),this.createDummyData(),this.setRankObj(),this.setMyRank(),this.getReward(),this.setNextLv(),this._playSceneMgr.setContestKind(-1)},compareRankData:function(t,e){return e.score-t.score},createDummyData:function(){this._catRankArr=[],this._catNameArr=[];var t=this._rareCatMgr.getRareCatDataGrade(this._catGrade).getUnitNameTextKey();this._myCatName=r.getString(t),this._catRankArr.push(new h(this._myCatName,this._myScore));for(var e=0;e<this._DUMMY_CAT_COUNT;e++){var i=Math.floor(Math.random()*(this._MAX_SCORE-this._MIN_DUMMY_SCORE+1)+this._MIN_DUMMY_SCORE);this._catRankArr.push(new h("",i))}this._catRankArr.sort(this.compareRankData);for(e=a.RARE_CAT_MIN;e<=a.TOTAL_CAT_NUMBER;e++)if(e!=this._catGrade){var s=this._rareCatMgr.getRareCatDataGrade(e).getUnitNameTextKey();this._catNameArr.push(r.getString(s))}for(e=0;e<this._MAX_MARK_NUM;e++){var n=Math.floor(Math.random()*this._catNameArr.length),c=this._catNameArr[n];this._catNameArr.splice(n,1),""==this._catRankArr[e].name&&(this._catRankArr[e].name=c)}},setRankObj:function(){this._rankObjArr=[];for(var t=0;t<this._MAX_MARK_NUM;t++){var e=null;this._rankObjArr.length-1<t?(e=cc.instantiate(this.contestRankObj),this.rankObjNode.addChild(e),this._rankObjArr.push(e)):(e=this._rankObjArr[t],this._rankObjArr[t].active=!0);var i=0;i=t<3?this._rewardTable[t].getRewardValue(0):this._rewardTable[3].getRewardValue(0),e.getComponent("ContestRankObj").initData(t+1,this._catRankArr[t],i,this._trophySpriteFrame)}},setMyRank:function(){for(var t=0;t<this._DUMMY_CAT_COUNT+1;t++)if(this._catRankArr[t].name==this._myCatName){this._myRank=t+1;break}this._myRank<=10?(this.myRankBg.active=!0,this.myRankBg.y=this._MYRANK_DEFAULT-this._MYRANK_DISTANCE*(this._myRank-1),this._rankObjArr[this._myRank-1].getComponent("ContestRankObj").setmyColor()):this.myRankBg.active=!1;var e=0;e=this._myRank-1<3?this._rewardTable[this._myRank-1].getRewardValue(0):this._myRank-1<10?this._rewardTable[3].getRewardValue(0):this._rewardTable[4].getRewardValue(0),this.myRank.getComponent("ContestRankObj").initData(this._myRank,this._catRankArr[this._myRank-1],e,this._trophySpriteFrame),this.myRank.getComponent("ContestRankObj").setmyColor()},getReward:function(){if(this._myRank-1<3)var t=this._rewardTable[this._myRank-1];else if(this._myRank-1<10)t=this._rewardTable[3];else t=this._rewardTable[4];for(var e=s.getContestReward(t,this._contestLv),i=0;i<this.rewardLabel.length;i++)this.rewardLabel[i].string=a.getNumToType(e[i+1].count)},setNextLv:function(){this._afterTrophyCount=s.getTrophy(),this._contestLv=Math.floor(this._afterTrophyCount/100+1),this.nextTrophyLabel.string=this._afterTrophyCount+" / "+this._contestLv*a.CONTEST_LV_STANDARD,this.nextProgress.progress=(this._afterTrophyCount-100*(this._contestLv-1))/a.CONTEST_LV_STANDARD;var t=this._contestLv%a.CONTEST_GRADE_STANDARD,e=(this._contestLv+1)%a.CONTEST_GRADE_STANDARD;0==t&&(t=10),0==e&&(e=10);var i=Math.floor(this._contestLv/a.CONTEST_GRADE_STANDARD),n=Math.floor((this._contestLv+1)/a.CONTEST_GRADE_STANDARD);this.beforeLvLabel.string=t,this.afterLvLabel.string=e,this.beforeLvSprite.spriteFrame=this._playSceneMgr.getContestGradeSprite(i),this.afterLvSprite.spriteFrame=this._playSceneMgr.getContestGradeSprite(n)},OnCatArrowBtn:function(t,e){var i=e,a=this._catGrade;this._catGrade=s.getNextCat(this._catGrade,i),a!=this._catGrade&&this.initData()},OnOkBtn:function(){this.hidePopupHandler()},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this.scheduleOnce(this.endHideAni,.3)},endHideAni:function(){n.instance.nextPopup()},destroyPopup:function(){for(var t=0;t<this._rankObjArr.length;t++)this._rankObjArr[t].active=!1;this.myRankBg.active=!1,this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_CONTEST_RESULT))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr"}],PopupContest:[function(t,e,i){"use strict";cc._RF.push(e,"1347bg33mtMR6Ut2mCydWUe","PopupContest");var a=t("Global"),s=t("DataMgr"),n=t("PopupMgr"),r=t("LocaleMgr"),c=t("PlaySceneMgr"),o=t("RareCatMgr"),h=t("AccessoryMgr"),u=t("SoundMgr");cc.Class({extends:cc.Component,properties:{allNode:cc.Node,catStatNode:cc.Node,restBalloonNode:cc.Node,titleLabel:cc.Label,subTitleLabel:cc.Label,startBtnLabel:cc.Label,joinFailLabel:cc.Label,restLabel:cc.Label,titleBgSprite:cc.Sprite,accHatSprite:cc.Sprite,accHatGradeSprite:cc.Sprite,accNeckSprite:cc.Sprite,accNeckGradeSprite:cc.Sprite,catName:cc.Label,catRankSprite:cc.Sprite,contestLvLabel:cc.Label,trophyLabel:cc.Label,trophySprite:cc.Sprite,catSkeleton:sp.Skeleton,catStatHealthLabel:cc.Label,catStatCharmLabel:cc.Label,catStatIntLabel:cc.Label,okBtn:cc.Button,_okBtnImage:cc.SpriteFrame,_grayBtnImage:cc.SpriteFrame,_titleLabel:"",_titleHealth:"",_titleCharm:"",_titleInt:"",_joinFailLabel:"",_catGrade:0,_aniName:"",_accSlotHat:"",_accSlotNeck:"",_HatAccArr:null,_NeckAccArr:null,_hatCount:0,_neckCount:0,_accHatData:null,_accNeckData:null,_btnLockFlag:!0,_contestCatFlag:!0,_rareCatMgr:null,_accessoryMgr:null,_playSceneMgr:null,_accState:0,_HAT_ACC:0,_NECK_ACC:1},start:function(){},showPopup:function(t,e){this._rareCatMgr=o.instance,this._accessoryMgr=h.instance,this._catGrade=t,this._playSceneMgr=c.instance,""==this._titleLabel&&(this._titleLabel=r.getString(3073),this._titleHealth=r.getString(1104),this._titleCharm=r.getString(1103),this._titleInt=r.getString(1105),this.startBtnLabel.string=r.getString(1069),this._joinFailLabel=r.getString(1071),this.restLabel.string=r.getString(1072)),this._okBtnImage=this._playSceneMgr.getSpriteToUI("btn1"),this._grayBtnImage=this._playSceneMgr.getSpriteToUI("btn2"),this.trophySprite.spriteFrame=this._playSceneMgr.getContestKindTrophy(),this.titleBgSprite.spriteFrame=this._playSceneMgr.getContestKindSprite(),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.initData(),this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},initData:function(t){null!=t&&(this._catGrade=t),null==this._playSceneMgr&&(this._playSceneMgr=c.instance),null==this._accessoryMgr&&(this._accessoryMgr=h.instance),null==this._rareCatMgr&&(this._rareCatMgr=o.instance),this._contestCatFlag=s.chkContestCat(this._catGrade),this._contestCatFlag?(this.okBtn.interactable=!0,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._okBtnImage,this.catStatNode.active=!0,this.joinFailLabel.node.active=!1,this.restBalloonNode.active=!1):(this.okBtn.interactable=!1,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtnImage,this.catStatNode.active=!1,this.joinFailLabel.node.active=!0,this.restBalloonNode.active=!0);var e=s.getTrophy();this.trophyLabel.string=e,this.contestLvLabel.string=Math.floor(e/100+1);var i=this._playSceneMgr.getContestKind();switch(i){case 0:this.titleLabel.string=this._titleHealth+" "+this._titleLabel;break;case 1:this.titleLabel.string=this._titleCharm+" "+this._titleLabel;break;case 2:this.titleLabel.string=this._titleInt+" "+this._titleLabel}switch(Math.floor(e/1e3)){case 0:switch(i){case 0:this.subTitleLabel.string=r.getString(3075,"<br/>","\n");break;case 1:this.subTitleLabel.string=r.getString(3074,"<br/>","\n");break;case 2:this.subTitleLabel.string=r.getString(3076,"<br/>","\n")}break;case 1:switch(i){case 0:this.subTitleLabel.string=r.getString(3078,"<br/>","\n");break;case 1:this.subTitleLabel.string=r.getString(3077,"<br/>","\n");break;case 2:this.subTitleLabel.string=r.getString(3079,"<br/>","\n")}break;case 2:switch(i){case 0:this.subTitleLabel.string=r.getString(3081,"<br/>","\n");break;case 1:this.subTitleLabel.string=r.getString(3080,"<br/>","\n");break;case 2:this.subTitleLabel.string=r.getString(3082,"<br/>","\n")}break;case 3:switch(i){case 0:this.subTitleLabel.string=r.getString(3084,"<br/>","\n");break;case 1:this.subTitleLabel.string=r.getString(3083,"<br/>","\n");break;case 2:this.subTitleLabel.string=r.getString(3085,"<br/>","\n")}}var a=s.getRareCatData(this._catGrade),n=this._rareCatMgr.getRareCatDataGrade(this._catGrade),u=a.getAccHatPK(),l=a.getAccNeckPK();this._accHatData=s.getUserHatAccData(u),this._accNeckData=s.getUserNeckAccData(l);var _=n.getUnitNameTextKey();this.catName.string=r.getString(_);var p=n.getRank();if(this.catRankSprite.spriteFrame=this._rareCatMgr.getUnitRankSprite(p),this.catSkeleton.skeletonData=n.getSpineData(),this.catSkeleton.setSkin(n.getSpineSkin()),this._aniName=n.getSpineAni(),this._accSlotHat=n.getSpineAccSlotHat(),null!=this._accNeckData?this._accSlotNeck=n.getSpineAccSlotNeck(this._accNeckData.getIdx()):(this.catSkeleton.setAttachment("neck_front","none"),this.catSkeleton.setAttachment("neck_back","none")),this.catSkeleton.setAnimation(0,"idle",!0),null==this._accHatData)this.catSkeleton.setAttachment(this._accSlotHat,"none"),this.accHatSprite.spriteFrame=null,this.accHatGradeSprite.spriteFrame=null;else{var d=(S=this._accHatData.getAccType())+"_"+(T=this._accHatData.getIdx()),g=this._accHatData.getAccGrade();this.catSkeleton.setAttachment(this._accSlotHat,d),this.accHatSprite.spriteFrame=this._accessoryMgr.getAccSprite(S,T),this.accHatGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(g)}if(null==this._accNeckData)this.accNeckSprite.spriteFrame=null,this.accNeckGradeSprite.spriteFrame=null;else{var S,T;d=(S=this._accNeckData.getAccType())+"_"+(T=this._accNeckData.getIdx()),g=this._accNeckData.getAccGrade();this.catSkeleton.setAttachment(this._accSlotNeck,d),this.accNeckSprite.spriteFrame=this._accessoryMgr.getAccSprite(S,T),this.accNeckGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(g)}var A=a.getStatHealth(),C=a.getStatCharm(),f=a.getStatInt();if(null!=this._accHatData){var m=this._accHatData.getStatType(),b=this._accHatData.getStat();switch(m){case"Health":A+=parseInt(b);break;case"Charm":C+=parseInt(b);break;case"Int":f+=parseInt(b)}}if(null!=this._accNeckData){var M=this._accNeckData.getStatType(),y=this._accNeckData.getStat();switch(M){case"Health":A+=parseInt(y);break;case"Charm":C+=parseInt(y);break;case"Int":f+=parseInt(y)}}switch(i){case 0:this.catStatHealthLabel.node.color=cc.color(66,211,179),this.catStatCharmLabel.node.color=cc.color(56,26,3),this.catStatIntLabel.node.color=cc.color(56,26,3);break;case 1:this.catStatHealthLabel.node.color=cc.color(56,26,3),this.catStatCharmLabel.node.color=cc.color(66,211,179),this.catStatIntLabel.node.color=cc.color(56,26,3);break;case 2:this.catStatHealthLabel.node.color=cc.color(56,26,3),this.catStatCharmLabel.node.color=cc.color(56,26,3),this.catStatIntLabel.node.color=cc.color(66,211,179)}this.catStatHealthLabel.string=A,this.catStatCharmLabel.string=C,this.catStatIntLabel.string=f,this.unschedule(this.updateCatTime),this.updateCatTime(),this.schedule(this.updateCatTime,1)},updateCatTime:function(){if(this.joinFailLabel.node.activeInHierarchy){var t=s.getUserContestCatTime(this._catGrade);if(t>0){var e=Math.floor(t/3600);e<10&&(e="0"+e),t-=3600*e;var i=Math.floor(t/60);i<10&&(i="0"+i);var a=t-=60*i;a<10&&(a="0"+a),this.joinFailLabel.string=this._joinFailLabel+" ( "+e+":"+i+":"+a+" )"}else this.initData()}},OnCatArrowBtn:function(t,e){u.playSound(u.audioBtn0);var i=e,a=this._catGrade;this._catGrade=s.getNextCat(this._catGrade,i),a!=this._catGrade&&this.initData()},OnHelpBtn:function(){n.instance.showPopup(n.POPUP_HELP,a.HELP_CONTEST)},OnStartBtn:function(){this._contestCatFlag&&(this._playSceneMgr.startContest(this._catGrade),s.useContestTime(),this.hidePopupHandler(),s.setContestCat(this._catGrade),this._playSceneMgr.chkGuide(a.GUIDE_CAT_CONTEST_JOIN),s.incQuestCount(a.QUEST_CAT_CONTEST_JOIN,1))},OnAccBtn:function(){n.instance.showPopup(n.POPUP_DRESS_ROOM,this._catGrade)},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this.scheduleOnce(this.endHideAni,.3)},endHideAni:function(){n.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_CONTEST),u.playSound(u.audioCancel))}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr"}],PopupCoupon:[function(t,e,i){"use strict";cc._RF.push(e,"a3340RtbsRFL7UzfN/bOqS+","PopupCoupon");t("PopupMgr"),t("SoundMgr");var a=t("DataMgr"),s=t("LocaleMgr");cc.Class({extends:cc.Component,properties:{explainLabel:cc.Label,okLabel:cc.Label,editBox:cc.EditBox},start:function(){this.explainLabel.string=s.getString(9004),this.okLabel.string=s.getString(1001)},OnOkBtn:function(){var t=this.editBox.string;a.isValidCoupon(t,this.hideLoadingHandler.bind(this))},hideLoadingHandler:function(){this.editBox.string=""},OnXBtn:function(){this.editBox.string="",this.node.active=!1}}),cc._RF.pop()},{DataMgr:"DataMgr",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupDailyAccess:[function(t,e,i){"use strict";var a;function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"6d6cbwygIBLhYdE2f3xxDYx","PopupDailyAccess");var n=t("PopupMgr"),r=t("SoundMgr"),c=t("DataMgr"),o=t("Global"),h=t("LocaleMgr"),u=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:(a={ribbonAni:sp.Skeleton,allNode:cc.Node,titleLabel:cc.Label,okLabel:cc.Label,explainLabel:cc.Label,rewardNode0:cc.Node,rewardIcon0:cc.Sprite,rewardValue0:cc.Label,rewardLabel0:cc.Label,rewardNode1:cc.Node,rewardIcon1:cc.Sprite,rewardValue1:cc.Label,rewardLabel1:cc.Label,adsBtn:cc.Button,okBtn:cc.Button},s(a,"titleLabel",cc.Label),s(a,"descLabel",cc.Label),s(a,"okLabel",cc.Label),s(a,"adsRewardMul",cc.Label),s(a,"_okBtnImage",cc.SpriteFrame),s(a,"_adsBtnImage",cc.SpriteFrame),s(a,"_grayBtnImage",cc.SpriteFrame),s(a,"_nextRewardLabel",""),s(a,"_rewardLabel",""),s(a,"_btnLockFlag",!1),s(a,"_playSceneMgr",null),a),onLoad:function(){this.titleLabel.string=h.getString(3065),this.titleLabel.fontSize=h.getRibbonFontSize(),this.okLabel.string=h.getString(1002),this._rewardLabel=h.getString(3054),this._nextRewardLabel=h.getString(3053),this.adsRewardMul.string="x"+o.ADS_REWARD_MUL,this._playSceneMgr=u.instance,this._okBtnImage=this._playSceneMgr.getSpriteToUI("btn1"),this._adsBtnImage=this._playSceneMgr.getSpriteToUI("btn4"),this._grayBtnImage=this._playSceneMgr.getSpriteToUI("btn2")},showPopup:function(){this._playSceneMgr=u.instance,this._okBtnImage=this._playSceneMgr.getSpriteToUI("btn1"),this._adsBtnImage=this._playSceneMgr.getSpriteToUI("btn4"),this._grayBtnImage=this._playSceneMgr.getSpriteToUI("btn2"),this.node.active=!0,this.allNode.scale=.5,this._btnLockFlag=!0,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),this.updateReward(),this.schedule(this.updateDesc,1)},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_DAILY_ACCESS))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.unschedule(this.updateDesc),this.ribbonAni.clearTrack(0),this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},updateReward:function(){var t=c.getDailyReward();0==t.length?(this.rewardNode0.active=!1,this.rewardNode1.active=!1):1==t.length?(this.rewardNode0.active=!0,this.rewardNode0.x=0,this.rewardNode1.active=!1,this.rewardIcon0.spriteFrame=this._playSceneMgr.getCurrencySprite(t[0].reward),this.rewardValue0.string=o.getNumToType(t[0].count),this.rewardLabel0.string=c.getPaymentName(t[0].reward)):(this.rewardNode0.active=!0,this.rewardNode0.x=-110,this.rewardNode1.active=!0,this.rewardNode1.x=110,this.rewardIcon0.spriteFrame=this._playSceneMgr.getCurrencySprite(t[0].reward),this.rewardValue0.string=o.getNumToType(t[0].count),this.rewardLabel0.string=c.getPaymentName(t[0].reward),this.rewardIcon1.spriteFrame=this._playSceneMgr.getCurrencySprite(t[1].reward),this.rewardValue1.string=o.getNumToType(t[1].count),this.rewardLabel1.string=c.getPaymentName(t[1].reward)),this.updateDesc()},updateDesc:function(){var t=c.getDailyRewardLeftTime();if(-1==t)this.descLabel.string=h.getString(3050),this.okBtn.interactable=!1,this.adsBtn.interactable=!1,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtnImage,this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtnImage;else if(0==t)this.descLabel.string=this._rewardLabel,this.okBtn.interactable=!0,this.adsBtn.interactable=!0,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._okBtnImage,this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._adsBtnImage;else{var e=Math.floor(t/60),i=t%60;i<10&&(i="0"+i),e<10&&(e="0"+e),this.descLabel.string=this._nextRewardLabel+"\n"+e+":"+i,this.okBtn.interactable=!1,this.adsBtn.interactable=!1,this.okBtn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtnImage,this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtnImage}},OnRewardOk:function(){if(!this._btnLockFlag){r.playSound(r.audioBtn0);var t=[];if(0==(a=c.getDailyReward()).length);else if(1==a.length){var e=a[0].reward,i=a[0].count,a=c.setRewardData(e,i);t.push(a),c.addDailyRewardLv(),this._playSceneMgr.chkGuide(o.GUIDE_PLAYTIME_REWARD),c.incQuestCount(o.QUEST_PLAYTIME_REWARD,1)}else{var s=a[0].reward,h=a[0].count,u=c.setRewardData(s,h);t.push(u);var l=a[1].reward,_=a[1].count,p=c.setRewardData(l,_);t.push(p),c.addDailyRewardLv(),this._playSceneMgr.chkGuide(o.GUIDE_PLAYTIME_REWARD),c.incQuestCount(o.QUEST_PLAYTIME_REWARD,1)}n.instance.showPopup(n.POPUP_REWARD,t,0),this._playSceneMgr.viewAllCoin(),this.updateReward()}},OnAdsBtn:function(){if(!this._btnLockFlag){r.playSound(r.audioBtn0);var t=[];if(0==(a=c.getDailyReward()).length);else if(1==a.length){var e=a[0].reward,i=a[0].count,a=c.setRewardData(e,i*o.ADS_REWARD_MUL);t.push(a),c.addDailyRewardLv(),this._playSceneMgr.chkGuide(o.GUIDE_PLAYTIME_REWARD),c.incQuestCount(o.QUEST_PLAYTIME_REWARD,1)}else{var s=a[0].reward,h=a[0].count,u=c.setRewardData(s,h*o.ADS_REWARD_MUL);t.push(u);var l=a[1].reward,_=a[1].count,p=c.setRewardData(l,_*o.ADS_REWARD_MUL);t.push(p),c.addDailyRewardLv(),this._playSceneMgr.chkGuide(o.GUIDE_PLAYTIME_REWARD),c.incQuestCount(o.QUEST_PLAYTIME_REWARD,1)}n.instance.showPopup(n.POPUP_REWARD,t,0),this._playSceneMgr.viewAllCoin(),this.updateReward()}},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupDecoCat:[function(t,e,i){"use strict";cc._RF.push(e,"dfd2dcYFktPNq+RKYCMOujO","PopupDecoCat");t("DataMgr");var a=t("PopupMgr");t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,levelLabel:cc.Label,LevelUpExplain:cc.Label,coinLabel:cc.Label,cashLabel:cc.Label,_btnLockFlag:!0,_rewardCoin:0,_rewardCash:0},start:function(){},showPopup:function(t,e){this.initData(t),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(t){},hidePopup:function(){this._btnLockFlag||(this._btnLockFlag=!0,this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this.scheduleOnce(this.endHideAni,.3))},endHideAni:function(){a.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){a.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,a.instance.hidePopup(a.POPUP_SHOP),SoundMgr.playSound(SoundMgr.audioCancel))}}),cc._RF.pop()},{DataMgr:"DataMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],PopupDressRoom:[function(t,e,i){"use strict";cc._RF.push(e,"b282f70BRdM/otAr24LVAcj","PopupDressRoom");var a=t("Global"),s=t("DataMgr"),n=t("PopupMgr"),r=t("LocaleMgr"),c=t("PlaySceneMgr"),o=t("RareCatMgr"),h=t("AccessoryMgr"),u=t("SoundMgr");cc.Class({extends:cc.Component,properties:{accSlotPrefab:cc.Prefab,allNode:cc.Node,cateContent:[cc.Node],cateScrollview:[cc.Node],accHatSprite:cc.Sprite,accHatGradeSprite:cc.Sprite,accNeckSprite:cc.Sprite,accNeckGradeSprite:cc.Sprite,catName:cc.Label,catRankSprite:cc.Sprite,catSkeleton:sp.Skeleton,catStatHealthLabel:cc.Label,catStatCharmLabel:cc.Label,catStatIntLabel:cc.Label,catLvLabel:cc.Label,catGetCoinLabel:cc.Label,catGetRareLabel:cc.Label,spriteHatAcc:cc.Sprite,spriteNeckAcc:cc.Sprite,spriteTapHatAcc:cc.Sprite,spriteTapNeckAcc:cc.Sprite,spriteFrameTap1:cc.SpriteFrame,spriteFrameTap2:cc.SpriteFrame,spriteFrameTapHatAcc1:cc.SpriteFrame,spriteFrameTapHatAcc2:cc.SpriteFrame,spriteFrameTapNeckAcc1:cc.SpriteFrame,spriteFrameTapNeckAcc2:cc.SpriteFrame,equipHat:cc.Node,equipNeck:cc.Node,accStat:cc.Node,accStatNode:[cc.Node],accStatSprite:[cc.Sprite],accStatLabel:[cc.Label],accBuffNode:cc.Node,accBuffSprite:cc.Sprite,accBuffLabel:cc.Label,hatAccStatSprite:cc.Sprite,hatAccStatLabel:cc.Label,neckAccStatSprite:cc.Sprite,neckAccStatLabel:cc.Label,buffCoinLabel:cc.Label,buffRareCoinLabel:cc.Label,mergeBtnLabel:cc.Label,_catGrade:0,_aniName:"",_accSlotHat:"",_accSlotNeck:"",_playSceneMgr:null,_HatAccArr:null,_NeckAccArr:null,_hatCount:0,_neckCount:0,_accHatData:null,_accNeckData:null,_btnLockFlag:!0,_rareCatMgr:null,_accessoryMgr:null,_accState:0,_HAT_ACC:0,_NECK_ACC:1},onLoad:function(){this.mergeBtnLabel.string=r.getString(1107)},start:function(){},showPopup:function(t,e){this._rareCatMgr=o.instance,this._accessoryMgr=h.instance,this._catGrade=t,this._playSceneMgr=c.instance,this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.popupView,.5),this.scheduleOnce(this.fadeOut,.5),this.allNode.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.unsetBtnLock,this))),this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_FULL_SCREEN),this._btnLockFlag=!0},fadeIn:function(){this._playSceneMgr.fadeIn(.5)},fadeOut:function(){this._playSceneMgr.fadeOut(.5)},popupView:function(){this.node.active=!0,this.initAllAccSlot(),this.initData()},initData:function(){var t=s.getRareCatData(this._catGrade),e=this._rareCatMgr.getRareCatDataGrade(this._catGrade),i=t.getAccHatPK(),n=t.getAccNeckPK();this._accHatData=s.getUserHatAccData(i),this._accNeckData=s.getUserNeckAccData(n);var c=e.getUnitNameTextKey();this.catName.string=r.getString(c);var o=e.getRank();if(this.catRankSprite.spriteFrame=this._rareCatMgr.getUnitRankSprite(o),this.catSkeleton.skeletonData=e.getSpineData(),this.catSkeleton.setSkin(e.getSpineSkin()),this._aniName=e.getSpineAni(),this._accSlotHat=e.getSpineAccSlotHat(),null!=this._accNeckData?this._accSlotNeck=e.getSpineAccSlotNeck(this._accNeckData.getIdx()):(this.catSkeleton.setAttachment("neck_front","none"),this.catSkeleton.setAttachment("neck_back","none")),this.catSkeleton.setAnimation(0,"idle",!0),null==this._accHatData)this.catSkeleton.setAttachment(this._accSlotHat,"none"),this.accHatSprite.spriteFrame=null,this.accHatGradeSprite.spriteFrame=null;else{var h=(l=this._accHatData.getAccType())+"_"+(_=this._accHatData.getIdx()),u=this._accHatData.getAccGrade();this.catSkeleton.setAttachment(this._accSlotHat,h),this.accHatSprite.spriteFrame=this._accessoryMgr.getAccSprite(l,_),this.accHatGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(u)}if(null==this._accNeckData)this.accNeckSprite.spriteFrame=null,this.accNeckGradeSprite.spriteFrame=null;else{var l,_;h=(l=this._accNeckData.getAccType())+"_"+(_=this._accNeckData.getIdx()),u=this._accNeckData.getAccGrade();this.catSkeleton.setAttachment(this._accSlotNeck,h),this.accNeckSprite.spriteFrame=this._accessoryMgr.getAccSprite(l,_),this.accNeckGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(u)}var p=t.getStatHealth(),d=t.getStatCharm(),g=t.getStatInt();if(null!=this._accHatData){var S=this._accHatData.getStatType(),T=this._accHatData.getStat();switch(this.hatAccStatSprite.node.active=!0,this.hatAccStatLabel.node.active=!0,this.hatAccStatSprite.spriteFrame=this._accessoryMgr.getAccStatSprite(S),this.hatAccStatLabel.string="+"+T,S){case"Health":p+=parseInt(T);break;case"Charm":d+=parseInt(T);break;case"Int":g+=parseInt(T)}}else this.hatAccStatSprite.node.active=!1,this.hatAccStatLabel.node.active=!1;if(null!=this._accNeckData){var A=this._accNeckData.getStatType(),C=this._accNeckData.getStat();switch(this.neckAccStatSprite.node.active=!0,this.neckAccStatLabel.node.active=!0,this.neckAccStatSprite.spriteFrame=this._accessoryMgr.getAccStatSprite(A),this.neckAccStatLabel.string="+"+C,A){case"Health":p+=parseInt(C);break;case"Charm":d+=parseInt(C);break;case"Int":g+=parseInt(C)}}else this.neckAccStatSprite.node.active=!1,this.neckAccStatLabel.node.active=!1;this.catStatHealthLabel.string=p,this.catStatCharmLabel.string=d,this.catStatIntLabel.string=g;var f=parseFloat(e.getGetCoin()),m=parseFloat(e.getGetRareCoin()),b=0,M=0;if(null!=this._accHatData){var y=this._accHatData.getBuffType(),P=parseFloat(this._accHatData.getbuffEffect());switch(y){case"Coin":b+=P;break;case"Rare":M+=P}}if(null!=this._accNeckData){var R=this._accNeckData.getBuffType(),N=parseFloat(this._accNeckData.getbuffEffect());switch(R){case"Coin":b+=N;break;case"Rare":M+=N}}0==b?this.buffCoinLabel.node.active=!1:(this.buffCoinLabel.node.active=!0,this.buffCoinLabel.string="(+"+Math.ceil(100*b)+"%)"),0==M?this.buffRareCoinLabel.node.active=!1:(this.buffRareCoinLabel.node.active=!0,this.buffRareCoinLabel.string="(+"+M+")"),this.catGetCoinLabel.string=a.getNumToType(Math.ceil(f*(1+b))),this.catGetRareLabel.string=m+M;var L=t.getFriendshipLv();this.catLvLabel.string="Lv. "+L},initAllAccSlot:function(){this.initHatAccSlot(),this.initNeckAccSlot()},initHatAccSlot:function(){this._HatAccArr=new Array;var t=s.getUserHatAccDataTable();t.sort(this.accSortIdxDes);for(var e=0;e<t.length;e++){var i=t[e];if(!i.getEquip()){var a=cc.instantiate(this.accSlotPrefab);this.cateContent[0].addChild(a),a.getComponent("AccSlotObj").initUserAcc(i,this),this._HatAccArr[e]=a,this._hatCount++}}},initNeckAccSlot:function(){this._NeckAccArr=new Array;var t=s.getUserNeckAccDataTable();t.sort(this.accSortIdxDes);for(var e=0;e<t.length;e++){var i=t[e];if(!i.getEquip()){var a=cc.instantiate(this.accSlotPrefab);this.cateContent[1].addChild(a),a.getComponent("AccSlotObj").initUserAcc(i,this),this._NeckAccArr[e]=a,this._neckCount++}}},accSortIdxDes:function(t,e){return t.getIdx()>e.getIdx()?-1:t.getIdx()<e.getIdx()?1:void 0},accSortIdxAsc:function(t,e){return t.getIdx()<e.getIdx()?-1:t.getIdx()>e.getIdx()?1:void 0},destroyAllAcc:function(){this.destroyHatAcc(),this.destroyNeckAcc(),this._hatCount=0,this._neckCount=0},destroyHatAcc:function(){this.cateContent[0].destroyAllChildren()},destroyNeckAcc:function(){this.cateContent[1].destroyAllChildren()},refreshAllAcc:function(){this.refreshHatAcc(),this.refreshNeckAcc()},refreshHatAcc:function(){this.destroyHatAcc(),this._hatCount=0,this.initHatAccSlot()},refreshNeckAcc:function(){this.destroyNeckAcc(),this._neckCount=0,this.initNeckAccSlot()},OnTransTap:function(t,e){cc.log(e);for(var i,a=parseInt(e),s=0;i=this.cateContent[s];s++)a==s?(i.active=!0,this.cateScrollview[s].active=!0):(i.active=!1,this.cateScrollview[s].active=!1);switch(a){case this._HAT_ACC:cc.log("\uba38\ub9ac \uc545\uc138\uc11c\ub9ac"),this.spriteHatAcc.spriteFrame=this.spriteFrameTapHatAcc1,this.spriteTapHatAcc.spriteFrame=this.spriteFrameTap1,this.spriteNeckAcc.spriteFrame=this.spriteFrameTapNeckAcc2,this.spriteTapNeckAcc.spriteFrame=this.spriteFrameTap2;break;case this._NECK_ACC:cc.log("\ubaa9 \uc545\uc138\uc11c\ub9ac"),this.spriteHatAcc.spriteFrame=this.spriteFrameTapHatAcc2,this.spriteTapHatAcc.spriteFrame=this.spriteFrameTap2,this.spriteNeckAcc.spriteFrame=this.spriteFrameTapNeckAcc1,this.spriteTapNeckAcc.spriteFrame=this.spriteFrameTap1}u.playSound(u.audioBtn0),this._accState=a},OnCatArrowBtn:function(t,e){u.playSound(u.audioBtn0);var i=e,a=this._catGrade;this._catGrade=s.getNextCat(this._catGrade,i),a!=this._catGrade&&(this.initData(),this.refreshAllAcc())},OnAccMergeBtn:function(){n.instance.showPopup(n.POPUP_ACC_MERGE,this)},tutoOpenPopupEquip:function(){this._HatAccArr[0].getComponent("AccSlotObj").touchStartHandler()},openPopupAccEquip:function(t,e){u.playSound(u.audioBtn0);var i={};"hat"==e?(i.beforeData=this._accHatData,i.afterData=t):(i.beforeData=this._accNeckData,i.afterData=t),i.catGrade=this._catGrade,n.instance.showPopup(n.POPUP_ACC_EQUIP,i)},hatStatOn:function(){},hatStatOff:function(){},neckStatOn:function(){},neckStatOff:function(){},hidePopup:function(){this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.fadeOut,.5),this.scheduleOnce(this.destroyPopup,.5),this.scheduleOnce(this.endHideAni,.5)},endHideAni:function(){n.instance.nextPopup()},destroyPopup:function(){this.destroyAllAcc(),this.allNode.stopAllActions(),this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_PLAY),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_DRESS_ROOM))}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr"}],PopupFurnitureUp:[function(t,e,i){"use strict";cc._RF.push(e,"20713jrMNpPdJ7FyneqjE9k","PopupFurnitureUp");var a=t("DataMgr"),s=t("PlaySceneMgr"),n=t("LocaleMgr"),r=t("PopupMgr"),c=t("SoundMgr"),o=t("Global"),h=cc.Class({extends:cc.Component,properties:{allNode:cc.Node,titleLabel:cc.Label,priceLabel:cc.Label,furnitureSprite:cc.Sprite,currencySprite:cc.Sprite,priceSprite:cc.Sprite,furnitureName:cc.Label,furnitureLv1:cc.Label,furnitureLv2:cc.Label,saveMax:cc.RichText,produceCount:cc.RichText,produceTime:cc.RichText,_slotIdx:-1,_priceType:-1,_price:0,_saveMaxStr:"",_produceCountStr:"",_produceTimeStr:"",_successText:"",_rareCoinEmpty:"",_cashCoinEmpty:"",_userFurnitureData:null,_playSceneMgr:null},statics:{SUCCESS:0,RARE_COIN_FAIL:1,CASH_COIN_FAIL:2},onLoad:function(){this.titleLabel.string=n.getString(1095),this._saveMaxStr=n.getString(1092),this._produceCountStr=n.getString(1093),this._produceTimeStr=n.getString(1094),this._successText=n.getString(3117),this._rareCoinEmpty=n.getString(3007),this._cashCoinEmpty=n.getString(3008),this._playSceneMgr=s.instance},showPopup:function(t){this._playSceneMgr=s.instance,this._slotIdx=parseInt(t),this.node.active=!0,this.allNode.scale=.5,this._btnLockFlag=!0,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.initData()},initData:function(){this._userFurnitureData=a.getUserFurnitureData(this._slotIdx);var t=a.getFurnitureData(this._slotIdx),e=t.getNameTextKey(),i=this._userFurnitureData.getLv(),s=t.getProduceType(),r=t.getPriceType();this._priceType=r;var c=a.getFurnitureUpgradeData(this._slotIdx,i),o=a.getFurnitureUpgradeData(this._slotIdx,i+1);this._price=c.getPrice();var h=c.getSaveMax(),u=c.getProductionCount(),l=c.getProductionTime(),_=o.getSaveMax(),p=o.getProductionCount(),d=o.getProductionTime(),g=this.transTimeStr(l,!1),S=this.transTimeStr(l-d,!0);this.furnitureSprite.spriteFrame=this._playSceneMgr.getFurnitureShopSprite(this._slotIdx),this.currencySprite.spriteFrame=this._playSceneMgr.getCurrencySprite(s),this.priceSprite.spriteFrame=this._playSceneMgr.getCurrencySprite(r),this.priceLabel.string=this._price,this.furnitureName.string=n.getString(e),this.furnitureLv1.string="Lv."+i,this.furnitureLv2.string="Lv."+(i+1),this.saveMax.string=this._saveMaxStr+"   "+h+" <color=#0072ff>(+"+(_-h)+")</c>",this.produceCount.string=this._produceCountStr+"   "+u+" <color=#0072ff>(+"+(p-u)+")</c>",this.produceTime.string=this._produceTimeStr+"   "+g+" <color=#DD1212>("+S+")</c>"},transTimeStr:function(t,e){var i="";t>0&&e&&(i="-");var a=Math.floor(t/3600);t-=3600*a;var s=Math.floor(t/60);t-=60*s;var n="";return a>0&&(n+=t+"\uc2dc\uac04"),s>0&&(n+=s+"\ubd84"),n=i+(n+=t+"\ucd08")},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,r.instance.hidePopup(r.POPUP_FURNITURE_UP))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){r.instance.hideLoading(),this._btnLockFlag=!1},OnOk:function(){if(!this._btnLockFlag)if(c.playSound(c.audioBtn0),a.getCurrency(this._priceType)>this._price){var t=this._userFurnitureData.getLv();t++,this._userFurnitureData.setLv(t),a.minusCurrency(this._priceType,this._price),this.initData(),this.showAlarm(h.SUCCESS)}else switch(this._priceType){case o.PAYMENT_RARE_COIN:this.showAlarm(h.RARE_COIN_FAIL);break;case o.PAYMENT_CASH_COIN:this.showAlarm(h.CASH_COIN_FAIL)}},showAlarm:function(t){var e="",i=!1;switch(t){case h.SUCCESS:e=this._successText,i=!0,c.playSound(c.audioShopBuyItem);break;case h.RARE_COIN_FAIL:e=this._rareCoinEmpty,c.playSound(c.audioWarning);break;case h.CASH_COIN_FAIL:e=this._cashCoinEmpty,c.playSound(c.audioWarning)}this._playSceneMgr.showAlarm(e,i,0,this._playSceneMgr.OVERLAY)},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)}});cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupGallery:[function(t,e,i){"use strict";cc._RF.push(e,"3ec6eGEXMlNn45UYv5h53PY","PopupGallery");var a=t("Global"),s=(t("UnitMgr"),t("DataMgr")),n=t("PopupMgr"),r=t("SoundMgr"),c=t("LocaleMgr");cc.Class({extends:cc.Component,properties:{galleryCatSlotPrefab:cc.Prefab,galleryAccSlotPrefab:cc.Prefab,galleryHouseSlotPrefab:cc.Prefab,popupCatInfo:cc.Node,popupAccInfo:cc.Node,popupHouseInfo:cc.Node,catNewNode:cc.Node,accNewNode:cc.Node,houseNewNode:cc.Node,allNode:cc.Node,titleLabel:cc.Label,spriteCat:cc.Sprite,spriteAcc:cc.Sprite,spriteHouse:cc.Sprite,spriteTapCat:cc.Sprite,spriteTapAcc:cc.Sprite,spriteTapHouse:cc.Sprite,spriteFrameTap1:cc.SpriteFrame,spriteFrameTap2:cc.SpriteFrame,spriteFrameTapCat1:cc.SpriteFrame,spriteFrameTapCat2:cc.SpriteFrame,spriteFrameTapAcc1:cc.SpriteFrame,spriteFrameTapAcc2:cc.SpriteFrame,spriteFrameTapHouse1:cc.SpriteFrame,spriteFrameTapHouse2:cc.SpriteFrame,cateScrollview:[cc.Node],cateContent:[cc.Node],_playSceneMgr:null,_topUIMgr:null,_BotUIMgr:null,_rareBoardMgr:null,_popupCatInfo:null,_popupAccInfo:null,_popupHouseInfo:null,_catSlotObjArr:null,_accSlotObjArr:null,_houseSlotObjArr:null,_catSlotCompleteArr:null,_accSlotCompleteArr:null,_houseSlotCompleteArr:null,_slotIdx:-1,_nowCate:0,_btnLockFlag:!1,_GALLERY_TAP_CAT:0,_GALLERY_TAP_ACC:1,_GALLERY_TAP_HOUSE:2},start:function(){this.titleLabel.string=c.getString(3070),this.titleLabel.fontSize=c.getTitleFontSize()},init:function(t,e,i,s){this._playSceneMgr=t,this._topUIMgr=e,this._BotUIMgr=i,this._rareBoardMgr=s,this._popupCatInfo=this.popupCatInfo.getComponent("PopupCatInfo"),this._popupAccInfo=this.popupAccInfo.getComponent("PopupAccInfo"),this._popupHouseInfo=this.popupHouseInfo.getComponent("PopupHouseInfo"),this._catSlotObjArr=new Array;for(var n=0;n<a.GALLERY_CAT_MAX;n++){var r=cc.instantiate(this.galleryCatSlotPrefab);this.cateContent[this._GALLERY_TAP_CAT].addChild(r),this._catSlotObjArr[n]=r}this._accSlotObjArr=new Array;for(n=0;n<a.GALLERY_ACC_MAX;n++){var c=cc.instantiate(this.galleryAccSlotPrefab);this.cateContent[this._GALLERY_TAP_ACC].addChild(c),this._accSlotObjArr[n]=c}this._houseSlotObjArr=new Array;for(n=0;n<a.GALLERY_HOUSE_MAX;n++){var o=cc.instantiate(this.galleryHouseSlotPrefab);this.cateContent[this._GALLERY_TAP_HOUSE].addChild(o),this._houseSlotObjArr[n]=o}this._btnLockFlag=!0,this.updateSlot()},updateSlot:function(){for(var t=0;t<this.cateContent.length;t++)this.cateContent[t].y=340;this._playSceneMgr.setGalleryNew(0),this._catSlotCompleteArr=new Array,this._accSlotCompleteArr=new Array,this._houseSlotCompleteArr=new Array;for(t=0;t<a.GALLERY_CAT_MAX;t++){var e=this._catSlotObjArr[t];e.getComponent("GalleryCatSlotObj").init(s.getGalleryCatTabel(t),this),this._catSlotCompleteArr[t]=e.getComponent("GalleryCatSlotObj").getNewBool()}for(t=0;t<a.GALLERY_ACC_MAX;t++){var i=this._accSlotObjArr[t];i.getComponent("GalleryAccSlotObj").init(s.getGalleryAccTabel(t),this),this._accSlotCompleteArr[t]=i.getComponent("GalleryAccSlotObj").getNewBool()}for(t=0;t<a.GALLERY_HOUSE_MAX;t++){var n=this._houseSlotObjArr[t];n.getComponent("GalleryHouseSlotObj").init(s.getGalleryHouseTabel(t),this),this._houseSlotCompleteArr[t]=n.getComponent("GalleryHouseSlotObj").getNewBool()}this.updateTapNew(),this.sortSlot(),this._playSceneMgr.updateGalleryNew()},sortSlot:function(){for(var t=0;t<a.GALLERY_CAT_MAX;t++)this.cateContent[this._GALLERY_TAP_CAT].removeChild(this._catSlotObjArr[t]);for(t=0;t<a.GALLERY_CAT_MAX;t++)this._catSlotCompleteArr[t]&&this.cateContent[this._GALLERY_TAP_CAT].addChild(this._catSlotObjArr[t]);for(t=0;t<a.GALLERY_CAT_MAX;t++)this._catSlotCompleteArr[t]||this.cateContent[this._GALLERY_TAP_CAT].addChild(this._catSlotObjArr[t]);for(t=0;t<a.GALLERY_ACC_MAX;t++)this.cateContent[this._GALLERY_TAP_ACC].removeChild(this._accSlotObjArr[t]);for(t=0;t<a.GALLERY_ACC_MAX;t++)this._accSlotCompleteArr[t]&&this.cateContent[this._GALLERY_TAP_ACC].addChild(this._accSlotObjArr[t]);for(t=0;t<a.GALLERY_ACC_MAX;t++)this._accSlotCompleteArr[t]||this.cateContent[this._GALLERY_TAP_ACC].addChild(this._accSlotObjArr[t]);for(t=0;t<a.GALLERY_HOUSE_MAX;t++)this.cateContent[this._GALLERY_TAP_HOUSE].removeChild(this._houseSlotObjArr[t]);for(t=0;t<a.GALLERY_HOUSE_MAX;t++)this._houseSlotCompleteArr[t]&&this.cateContent[this._GALLERY_TAP_HOUSE].addChild(this._houseSlotObjArr[t]);for(t=0;t<a.GALLERY_HOUSE_MAX;t++)this._houseSlotCompleteArr[t]||this.cateContent[this._GALLERY_TAP_HOUSE].addChild(this._houseSlotObjArr[t])},updateTapNew:function(){this.catNewNode.active=!1,this.accNewNode.active=!1,this.houseNewNode.active=!1;for(var t=0;t<a.GALLERY_CAT_MAX;t++)if(this._catSlotCompleteArr[t]){this.catNewNode.active=!0;break}for(t=0;t<a.GALLERY_ACC_MAX;t++)if(this._accSlotCompleteArr[t]){this.accNewNode.active=!0;break}for(t=0;t<a.GALLERY_HOUSE_MAX;t++)if(this._houseSlotCompleteArr[t]){this.houseNewNode.active=!0;break}},OnTransTap:function(t,e){cc.log(e);for(var i,a=parseInt(e),s=0;i=this.cateContent[s];s++)a==s?(i.active=!0,this.cateScrollview[s].active=!0):(i.active=!1,this.cateScrollview[s].active=!1);switch(a){case this._GALLERY_TAP_CAT:cc.log("\uace0\uc591\uc774"),this.spriteCat.spriteFrame=this.spriteFrameTapCat1,this.spriteTapCat.spriteFrame=this.spriteFrameTap1,this.spriteAcc.spriteFrame=this.spriteFrameTapAcc2,this.spriteTapAcc.spriteFrame=this.spriteFrameTap2,this.spriteHouse.spriteFrame=this.spriteFrameTapHouse2,this.spriteTapHouse.spriteFrame=this.spriteFrameTap2;break;case this._GALLERY_TAP_ACC:cc.log("\uc545\uc138\uc11c\ub9ac"),this.spriteCat.spriteFrame=this.spriteFrameTapCat2,this.spriteTapCat.spriteFrame=this.spriteFrameTap2,this.spriteAcc.spriteFrame=this.spriteFrameTapAcc1,this.spriteTapAcc.spriteFrame=this.spriteFrameTap1,this.spriteHouse.spriteFrame=this.spriteFrameTapHouse2,this.spriteTapHouse.spriteFrame=this.spriteFrameTap2;break;case this._GALLERY_TAP_HOUSE:cc.log("\ucea3 \ud558\uc6b0\uc2a4"),this.spriteCat.spriteFrame=this.spriteFrameTapCat2,this.spriteTapCat.spriteFrame=this.spriteFrameTap2,this.spriteAcc.spriteFrame=this.spriteFrameTapAcc2,this.spriteTapAcc.spriteFrame=this.spriteFrameTap2,this.spriteHouse.spriteFrame=this.spriteFrameTapHouse1,this.spriteTapHouse.spriteFrame=this.spriteFrameTap1}r.playSound(r.audioBtn0)},showCatInfo:function(t){this._popupCatInfo.showPopup(t)},showAccInfo:function(t){this._popupAccInfo.showPopup(t)},showHouseInfo:function(t){this._popupHouseInfo.showPopup(t)},showPopup:function(t){this.updateSlot(),this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_GALLERY))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},showAlarm:function(t){var e="",i=!1;switch(t){case this._SUCCESS:e=c.getString(3005),i=!0,r.playSound(r.audioShopBuyItem);break;case this._RARE_COIN_FAIL:e=c.getString(3007),r.playSound(r.audioWarning);break;case this._CASH_COIN_FAIL:e=c.getString(3008),r.playSound(r.audioWarning)}this._playSceneMgr.showAlarm(e,i,0,this._playSceneMgr.OVERLAY)},tutoGallery:function(){this._catSlotObjArr[1].getComponent("GalleryCatSlotObj").OngetBtn()},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],PopupGoodsShop:[function(t,e,i){"use strict";cc._RF.push(e,"ef04aHX9jhFNqmV9oGAl3Wt","PopupGoodsShop");var a=t("Global"),s=(t("UnitMgr"),t("DataMgr")),n=t("PopupMgr"),r=t("SoundMgr"),c=t("LocaleMgr");cc.Class({extends:cc.Component,properties:{_playSceneMgr:null,_topUIMgr:null,_BotUIMgr:null,_rareBoardMgr:null,shopHouseSlotPrefab:cc.Prefab,shopCareSlotPrefab:cc.Prefab,shopFurnitureSlotPrefab:cc.Prefab,_houseSlotObjArr:null,_careSlotObjArr:null,_furnitureSlotObjArr:null,_slotIdx:-1,allNode:cc.Node,titleLabel:cc.Label,spriteHouse:cc.Sprite,spriteCare:cc.Sprite,spriteRoom:cc.Sprite,spriteTapHouse:cc.Sprite,spriteTapCare:cc.Sprite,spriteTapRoom:cc.Sprite,spriteFrameTap1:cc.SpriteFrame,spriteFrameTap2:cc.SpriteFrame,spriteFrameTapHouse1:cc.SpriteFrame,spriteFrameTapHouse2:cc.SpriteFrame,spriteFrameTapCare1:cc.SpriteFrame,spriteFrameTapCare2:cc.SpriteFrame,spriteFrameTapRoom1:cc.SpriteFrame,spriteFrameTapRoom2:cc.SpriteFrame,cateScrollview:[cc.Node],cateContent:[cc.Node],_nowCate:0,_tempShopData:null,_tempAdsUnitGrade:-1,_btnLockFlag:!1,_USLOT_H:200,_SSLOT_H:160,_TAP_HOUSE:0,_TAP_CARE:1,_TAP_FURNITURE:2,_SUCCESS:0,_RARE_COIN_FAIL:1,_CASH_COIN_FAIL:2},start:function(){this.titleLabel.string=c.getString(3057),this.titleLabel.fontSize=c.getTitleFontSize()},init:function(t,e,i,n){this._playSceneMgr=t,this._topUIMgr=e,this._BotUIMgr=i,this._rareBoardMgr=n,this._houseSlotObjArr=new Array;for(var r=0;r<a.GOODS_HOUSE_MAX;r++){var c=cc.instantiate(this.shopHouseSlotPrefab);this.cateContent[this._TAP_HOUSE].addChild(c),c.getComponent("ShopCatHouseObj").init(r+1,s.getCatHouseData(r+1),this),this._houseSlotObjArr[r]=c}this._careSlotObjArr=new Array;for(r=0;r<a.GOODS_CARE_ITEM_MAX;r++){var o=cc.instantiate(this.shopCareSlotPrefab);this.cateContent[this._TAP_CARE].addChild(o),o.getComponent("ShopCareObj").init(s.getCareItemData(r),this),this._careSlotObjArr[r]=o}this._furnitureSlotObjArr=new Array;for(r=0;r<a.GOODS_FURNITURE_MAX;r++){var h=cc.instantiate(this.shopFurnitureSlotPrefab);this.cateContent[this._TAP_FURNITURE].addChild(h),h.getComponent("ShopFurnitureObj").init(s.getFurnitureData(r),this),this._furnitureSlotObjArr[r]=h}this._btnLockFlag=!0},OnTransTap:function(t,e){cc.log(e);var i=parseInt(e);this.transTap(i)},transTap:function(t){for(var e,i=0;e=this.cateContent[i];i++)t==i?(e.active=!0,this.cateScrollview[i].active=!0):(e.active=!1,this.cateScrollview[i].active=!1);switch(t){case this._TAP_HOUSE:cc.log("\ucea3 \ud558\uc6b0\uc2a4"),this.spriteHouse.spriteFrame=this.spriteFrameTapHouse1,this.spriteTapHouse.spriteFrame=this.spriteFrameTap1,this.spriteCare.spriteFrame=this.spriteFrameTapCare2,this.spriteTapCare.spriteFrame=this.spriteFrameTap2,this.spriteRoom.spriteFrame=this.spriteFrameTapRoom2,this.spriteTapRoom.spriteFrame=this.spriteFrameTap2;break;case this._TAP_CARE:cc.log("\uace0\uc591\uc774 \uce90\uc5b4\uc6a9\ud488"),this.spriteHouse.spriteFrame=this.spriteFrameTapHouse2,this.spriteTapHouse.spriteFrame=this.spriteFrameTap2,this.spriteCare.spriteFrame=this.spriteFrameTapCare1,this.spriteTapCare.spriteFrame=this.spriteFrameTap1,this.spriteRoom.spriteFrame=this.spriteFrameTapRoom2,this.spriteTapRoom.spriteFrame=this.spriteFrameTap2;break;case this._TAP_FURNITURE:cc.log("\ucea3 \ub8f8"),this.spriteHouse.spriteFrame=this.spriteFrameTapHouse2,this.spriteTapHouse.spriteFrame=this.spriteFrameTap2,this.spriteCare.spriteFrame=this.spriteFrameTapCare2,this.spriteTapCare.spriteFrame=this.spriteFrameTap2,this.spriteRoom.spriteFrame=this.spriteFrameTapRoom1,this.spriteTapRoom.spriteFrame=this.spriteFrameTap1}r.playSound(r.audioBtn0)},showPopup:function(t){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0,this.transTap(t)},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_GOODS_SHOP))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},tutoBuyHouse:function(){this._slotIdx=1,s.getUserCatHouseData(this._slotIdx).setCollect(1);var t=s.getUserCatSlotNum();t++,s.setUserCatSlotNum(t),this.scheduleOnce(this.updateCatHouse,.3),this.hidePopupHandler(),this._playSceneMgr.chkGalleryNew(),this._houseSlotObjArr[0].getComponent("ShopCatHouseObj").setblind(),this.showAlarm(this._SUCCESS),s.saveData()},buyHouse:function(t,e,i,a){this._slotIdx=e.getHouseIndex();if(i<=(a==t._RARE_TYPE?s.getRareCoin():s.getCashCoin())){a==t._RARE_TYPE?s.minusRareCoin(i):s.minusCashCoin(i),this._topUIMgr.viewAllCoin(),s.getUserCatHouseData(this._slotIdx).setCollect(1);var n=s.getUserCatSlotNum();n++,s.setUserCatSlotNum(n),this.scheduleOnce(this.updateCatHouse,.3),this.hidePopupHandler(),this._playSceneMgr.chkGalleryNew(),t.setblind(),this.showAlarm(this._SUCCESS),s.saveData()}else a==t._RARE_TYPE?this.showAlarm(this._RARE_COIN_FAIL):this.showAlarm(this._CASH_COIN_FAIL)},buyCareItem:function(t,e,i){if(e<=(i==a.PAYMENT_RARE_COIN?s.getRareCoin():s.getCashCoin())){i==a.PAYMENT_RARE_COIN?s.minusRareCoin(e):s.minusCashCoin(e),this._topUIMgr.viewAllCoin();var r=s.getCareItemCount(t);r++,s.setCareItemCount(t,r),1==t&&this._playSceneMgr.chkGuide(a.GUIDE_GOODSHOP_FEED_BUY);var c=n.instance.getPopup(n.POPUP_CARE);c.node.activeInHierarchy&&c.updateItemCount(),this.showAlarm(this._SUCCESS),s.saveData()}else i==a.PAYMENT_RARE_COIN?this.showAlarm(this._RARE_COIN_FAIL):this.showAlarm(this._CASH_COIN_FAIL)},buyFuniture:function(t,e,i,n){this._slotIdx=e.getFurnitureIndex();i<=(n==a.PAYMENT_RARE_COIN?s.getRareCoin():s.getCashCoin())?(n==a.PAYMENT_RARE_COIN?s.minusRareCoin(i):s.minusCashCoin(i),this._topUIMgr.viewAllCoin(),s.getUserFurnitureData(this._slotIdx).setLv(1),s.setFurnitureTime(this._slotIdx,this._slotIdx),this.scheduleOnce(this.updateFurniture,.3),this.hidePopup(),this._playSceneMgr.chkGalleryNew(),t.setblind(),this.showAlarm(this._SUCCESS),s.saveData()):n==a.PAYMENT_RARE_COIN?this.showAlarm(this._RARE_COIN_FAIL):this.showAlarm(this._CASH_COIN_FAIL)},updateCatHouse:function(){this._playSceneMgr.updateCatHouse(this._slotIdx-1)},updateFurniture:function(){this._playSceneMgr.updateFurniture(this._slotIdx)},showAlarm:function(t){var e="",i=!1;switch(t){case this._SUCCESS:e=c.getString(3005),i=!0,r.playSound(r.audioShopBuyItem);break;case this._RARE_COIN_FAIL:e=c.getString(3007),r.playSound(r.audioWarning);break;case this._CASH_COIN_FAIL:e=c.getString(3008),r.playSound(r.audioWarning)}this._playSceneMgr.showAlarm(e,i,0,this._playSceneMgr.OVERLAY)},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],PopupHelp:[function(t,e,i){"use strict";cc._RF.push(e,"9054b+WqONGkaxghjD30o9X","PopupHelp");t("DataMgr");var a=t("PopupMgr"),s=t("SoundMgr"),n=(t("Global"),t("LocaleMgr"));cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,helpNode:[cc.Node],titleLabel:cc.Label,normalSubTitle1:cc.Label,normalExplain1:cc.Label,normalCatGet:cc.Label,normalCoolTime:cc.Label,normalSubTitle2:cc.Label,normalExplain2:cc.Label,normalDrag:cc.Label,normalGet:cc.Label,rareSubTitle1:cc.Label,rareExplain1:cc.Label,rareSubTitle2:cc.Label,rareExplain2:cc.Label,contestSubTitle1:cc.Label,contestExplain1:cc.Label,contestSubTitle2:cc.Label,contestExplain2:cc.Label,contestSubTitle3:cc.Label,contestExplain3:cc.Label,_playSceneMgr:null,_btnLockFlag:!0},start:function(){this.titleLabel.string=n.getString(9036),this.normalSubTitle1.string=n.getString(9038),this.normalExplain1.string=n.getString(9044,"<br/>","\n"),this.normalCatGet.string=n.getString(9041),this.normalCoolTime.string=n.getString(9042),this.normalSubTitle2.string=n.getString(9037),this.normalExplain2.string=n.getString(9043,"<br/>","\n"),this.normalDrag.string=n.getString(9039),this.normalGet.string=n.getString(9040),this.rareSubTitle1.string=n.getString(9045),this.rareExplain1.string=n.getString(9047,"<br/>","\n"),this.rareSubTitle2.string=n.getString(9046),this.rareExplain2.string=n.getString(9048,"<br/>","\n"),this.contestSubTitle1.string=n.getString(9049),this.contestExplain1.string=n.getString(9052,"<br/>","\n"),this.contestSubTitle2.string=n.getString(9050),this.contestExplain2.string=n.getString(9053,"<br/>","\n","<br/>","\n"),this.contestSubTitle3.string=n.getString(9051),this.contestExplain3.string=n.getString(9054,"<br/>","\n")},showPopup:function(t,e){this.initData(t),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.node.opacity=255,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(t){for(var e=0;e<this.helpNode.length;e++)this.helpNode[e].active=!1;this.helpNode[t].active=!0},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.endHideAni,.3),this.scheduleOnce(this.destroyPopup,.3)},endHideAni:function(){a.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){a.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,a.instance.hidePopup(a.POPUP_HELP),s.playSound(s.audioCancel))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupHouseInfo:[function(t,e,i){"use strict";cc._RF.push(e,"0295aCntQNHOoGJADoYN8Vq","PopupHouseInfo");var a=t("LocaleMgr"),s=t("DataMgr"),n=t("PlaySceneMgr");t("PopupMgr"),t("Global");cc.Class({extends:cc.Component,properties:{houseSprite:cc.Sprite,houseName:cc.Label,houseExplain:cc.Label,_playSceneMgr:null},showPopup:function(t){this._playSceneMgr=n.instance,this.node.active=!0;var e=s.getCatHouseData(t),i=e.getNameTextKey(),r=e.getExplainTextKey();this.houseName.string=a.getString(i),this.houseExplain.string=a.getString(r,"<br/>","\n"),this.houseSprite.spriteFrame=this._playSceneMgr.getShopHouseSprite(t)},hidePopup:function(){this.node.active=!1}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],PopupLimitProduct:[function(t,e,i){"use strict";cc._RF.push(e,"26794qGNHJBfZ0GjA/dHlHB","PopupLimitProduct");var a=t("DataMgr"),s=t("PopupMgr"),n=t("Global"),r=t("PlaySceneMgr"),c=t("RareCatMgr"),o=(t("SoundMgr"),t("LocaleMgr"));cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,remainTimeNode:cc.Node,bestNode:cc.Node,productCountNode:cc.Node,newNode:cc.Node,catTitleSprite:cc.Sprite,catSprite:cc.Sprite,catGradeSprite:cc.Sprite,catNameLabel:cc.Label,productCountSprite:cc.Sprite,itemNode:[cc.Node],itemSprite:[cc.Sprite],itemLabel:[cc.Label],productNameLabel:cc.Label,bonusLabel:cc.Label,remainTimeLabel:cc.Label,priceLabel:cc.Label,_idx:0,_limitItemCount:0,_buyLimit:0,_nameTextKey:0,_catGrade:0,_rewardArr:null,_playSceneMgr:null,_rareCatMgr:null,_ITEM_COUNT_MAX:6,_mergeRareState:0,_MERGE_NEW_RARE_BOARD:0,_MERGE_NEW_RARE_HOTEL:1,_MERGE_OLD_RARE:2,_MERGE_FAIL_FULL:3},showPopup:function(){this._playSceneMgr=r.instance,this._rareCatMgr=c.instance,this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0,this.initData(),this.ribbonAni.addAnimation(0,"ribbon",!1)},initData:function(){var t=a.getLimitProductData();switch(this._rewardArr=[],this._idx=t.getIdx(),this._limitItemCount=a.getShopLimitItemData(this._idx),t.getEventType()){case 0:this.remainTimeNode.active=!1}this._nameTextKey=t.getTextKey();var e=t.getWeekType();switch(this._buyLimit=t.getbuyLimit(),this._buyLimit){case 1:this.productCountNode.active=!0,this.productCountSprite.spriteFrame=1==e?this._playSceneMgr.getSpriteToUI("shop_daily1"):this._playSceneMgr.getSpriteToUI("shop_only1"),this.productNameLabel.string=o.getString(this._nameTextKey);break;case 3:this.productCountNode.active=!0,this.productCountSprite.spriteFrame=1==e?this._playSceneMgr.getSpriteToUI("shop_daily3"):this._playSceneMgr.getSpriteToUI("shop_only3"),this.productNameLabel.string=o.getString(this._nameTextKey);break;default:this.productCountNode.active=!1,this.productNameLabel.string=o.getString(this._nameTextKey)}var i=t.getBest();this.bestNode.active=1==i;var s=t.getNewProduct();this.newNode.active=1==s;for(var r=0;r<this._ITEM_COUNT_MAX;r++){var c=t.getRewardType(r),h=t.getRewardValue(r);if(c==n.PAYMENT_NONE)this.itemNode[r].active=!1;else if(c==n.PAYMENT_CAT){var u=parseInt(h);this._catGrade=u;var l=this._rareCatMgr.getRareCatDataGrade(u),_=l.getUnitNameTextKey(),p=l.getRank();this.itemNode[r].active=!1,this.catSprite.spriteFrame=this._rareCatMgr.getUnitSpriteForGrade(u),this.catTitleSprite.spriteFrame=this._rareCatMgr.getUnitSpriteForGrade(u),this.catGradeSprite.spriteFrame=this._rareCatMgr.getUnitRankSprite(p),this.catNameLabel.string=o.getString(_)}else{this.itemNode[r].active=!0;var d={};d.type=c,d.count=h,this._rewardArr.push(d)}this.itemSprite[r].spriteFrame=this._playSceneMgr.getCurrencySprite(c),this.itemLabel[r].string=n.getNumToType(h)}var g=t.getBonusRate();this.bonusLabel.string=g+"%";var S=t.getPrice();this.priceLabel.string="\\"+S},OnbuyBtn:function(){for(var t=0;t<this._rewardArr.length;t++)a.setRewardData(this._rewardArr[t].type,this._rewardArr[t].count);s.instance.schedulePopup(s.POPUP_REWARD,this._rewardArr,0),this.getCat();var e=a.getShopLimitItemData(this._idx);e++,a.setShopLimitItemData(this._idx,e),this._playSceneMgr.updateLimitProductBtn(),this.hidePopupHandler()},getCat:function(){var t=this._catGrade,e=a.getEnabledSlot(),i=e[0],n=e[1],r=a.getNewCatBool(t),c=!1;switch(c=null!=i,!r&&c?this._mergeRareState=this._MERGE_NEW_RARE_BOARD:r||c?r&&(this._mergeRareState=this._MERGE_OLD_RARE):this._mergeRareState=this._MERGE_NEW_RARE_HOTEL,this._mergeRareState){case this._MERGE_NEW_RARE_BOARD:a.setRareSlotNum(i,n.houseIndex,t),a.setRareCat(t,i),this._playSceneMgr.updateRareBoard(i),this.successMergeNew(t),this.successMergeCommon(t);break;case this._MERGE_NEW_RARE_HOTEL:this._playSceneMgr.getNewRareCat(t),this.successMergeNew(t),this.successMergeCommon(t);break;case this._MERGE_OLD_RARE:var o=this._rareCatMgr.getRareCatDataGrade(t);s.instance.schedulePopup(s.POPUP_OVERLAP,o,.8)}},successMergeNew:function(t){this._playSceneMgr.viewNewCatIcon(),a.setNewCatBool(t);var e=this._rareCatMgr.getRareCatDataGrade(t);s.instance.schedulePopup(s.POPUP_NEWCAT,e,.8),this._playSceneMgr.chkGalleryNew()},successMergeCommon:function(t){var e=this._rareCatMgr.getRareCatDataGrade(t);a.addCoin(e.getNewRewardCoin()),a.addCashCoin(e.getNewRewardCash()),a.getNowMaxUnitGrade()<t&&a.setNowMaxUnitGrade(t)},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_LIMIT_PRODUCT))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr"}],PopupLvReward:[function(t,e,i){"use strict";cc._RF.push(e,"e18bf4Qrj5Pk4wbiO22aRFy","PopupLvReward");var a=t("DataMgr"),s=t("PopupMgr"),n=t("PlaySceneMgr"),r=t("LocaleMgr"),c=t("Global"),o=t("TutoMgr"),h=t("SoundMgr");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,titleLabel:cc.Label,okLabel:cc.Label,levelLabel:cc.Label,LevelUpExplain:cc.Label,coinLabel:cc.Label,cashLabel:cc.Label,adsRewardMul:cc.Label,_btnLockFlag:!0,_rewardCoin:0,_rewardCash:0,_playSceneMgr:null},start:function(){this.titleLabel.string=r.getString(3059),this.titleLabel.fontSize=r.getRibbonFontSize(),this.okLabel.string=r.getString(1001),this.LevelUpExplain.string=r.getString(3030),this.adsRewardMul.string="x"+c.ADS_REWARD_MUL},showPopup:function(t,e){this._playSceneMgr=n.instance,this.initData(t),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),h.playSound(h.audioNewCat),this._btnLockFlag=!0},initData:function(t){var e=t;this._rewardCoin=e.coin,this._rewardCash=e.cash,this._rewardLv=e.lv,this.coinLabel.string=this._rewardCoin,this.cashLabel.string=this._rewardCash,this.levelLabel.string=this._rewardLv},OnAdsBtn:function(){if(!this._btnLockFlag){var t=this._rewardCoin*c.ADS_REWARD_MUL,e=this._rewardCash*c.ADS_REWARD_MUL;a.addCoin(this._rewardCoin*(c.ADS_REWARD_MUL-1)),a.addCashCoin(this._rewardCash*(c.ADS_REWARD_MUL-1)),n.instance.viewAllCoin();var i=[],r={};r.type=c.PAYMENT_COIN,r.count=t,i.push(r);var o={};o.type=c.PAYMENT_CASH_COIN,o.count=e,i.push(o),s.instance.preSchedulePopup(s.POPUP_REWARD,i,.8),this.hidePopupHandler()}},OnGetBtn:function(){this._btnLockFlag||(this.hidePopupHandler(),n.instance.viewAllCoin())},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this.scheduleOnce(this.endHideAni,.3)},endHideAni:function(){var t=s.instance.nextPopup(),e=this._playSceneMgr.getTutoRareBool();!t&&e&&(o.instance.startTutorial(o.TUTO_TYPE_RARE_CAT_FIRST,a.getTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST)),this._playSceneMgr.setTutoRareBool(!1),this._playSceneMgr.updateTransBtn());var i=this._playSceneMgr.getContentOpenIdx();t||-1==i||s.instance.showPopup(s.POPUP_CONTENT,i,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_LVUP))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr"}],PopupMgr:[function(t,e,i){"use strict";cc._RF.push(e,"0c98eqvLDNBhYsqcWAWP92q","PopupMgr");var a=t("SoundMgr"),s=(t("Global"),cc.Class({extends:cc.Component,properties:{popupHelp:cc.Node,popupQuest:cc.Node,popupShop:cc.Node,popupLvup:cc.Node,popupComback:cc.Node,popupReward:cc.Node,popupBossReward:cc.Node,popupMsg:cc.Node,popupMsg2:cc.Node,popupNewCat:cc.Node,popupSetup:cc.Node,popupCatHotel:cc.Node,popupSlotPlus:cc.Node,popupGoodsShop:cc.Node,popupAdsCat:cc.Node,popupOfflineReward:cc.Node,popupMouseReward:cc.Node,popupRandomBox:cc.Node,popupDressRoom:cc.Node,popupAccEquip:cc.Node,popupDailyAccess:cc.Node,popupAttend:cc.Node,popupPost:cc.Node,popupContest:cc.Node,popupContestResult:cc.Node,popupGallery:cc.Node,popupCare:cc.Node,popupOverlap:cc.Node,popupContent:cc.Node,popupCashShop:cc.Node,popupFurnitureUp:cc.Node,popupAccMerge:cc.Node,popupLimitProduct:cc.Node,rareCatBtn:cc.Node,topAlert:cc.Node,loadingMask:cc.Node,_playSceneMgr:null,_popupHelp:null,_popupQuest:null,_popupShop:null,_popupLvup:null,_popupCatHotel:null,_popupSlotPlus:null,_popupGoodsShop:null,_popupAdsCat:null,_popupOfflineReward:null,_popupMouseReward:null,_popupRandomBox:null,_popupDressRoom:null,_popupAccEquip:null,_popupDailyAccess:null,_popupAttend:null,_popupPost:null,_popupContest:null,_popupContestResult:null,_popupGallery:null,_popupCare:null,_popupOverlap:null,_popupContent:null,_popupCashShop:null,_popupFurnitureUp:null,_popupAccMerge:null,_popupLimitProduct:null,_rareCatBtn:null,_popupComback:null,_popupReward:null,_popupBossReward:null,_popupMsg:null,_popupMsg2:null,_popupNewCat:null,_popupSetup:null,_scheduleList:null,_luckyboxData:0,_rareLuckyboxData:0,_uniqueLuckyboxData:0,_luckyboxRewardObj:null,_specialArtifactTicketData:0,_dataMgr:null},statics:{instance:null,POPUP_HELP:0,POPUP_QUEST:2,POPUP_SHOP:3,POPUP_LVUP:4,POPUP_COMBACK:5,POPUP_REWARD:6,POPUP_MSG:7,POPUP_NEWCAT:8,POPUP_SETUP:9,POPUP_HOTEL:10,POPUP_SLOT_PLUS:11,POPUP_GOODS_SHOP:12,POPUP_ADS_CAT:13,POPUP_OFFLINE_REWARD:14,POPUP_MOUSE_REWARD:15,POPUP_RANDOM_BOX:16,POPUP_DRESS_ROOM:17,POPUP_ACC_EQUIP:18,POPUP_DAILY_ACCESS:19,POPUP_ATTEND:20,POPUP_POST:21,POPUP_CONTEST:22,POPUP_CONTEST_RESULT:23,POPUP_GALLERY:24,POPUP_CARE:25,POPUP_OVERLAP:26,POPUP_CONTENT:27,POPUP_CASHSHOP:28,POPUP_FURNITURE_UP:29,POPUP_ACC_MERGE:30,POPUP_LIMIT_PRODUCT:31,ALERT_HERO_FULL:0,ALERT_BATTLE_FULL:1,ALERT_NO_GOLD:2,ALERT_NO_RUNE:3,ALERT_NO_GEM:4,ALERT_NO_HEART:5,ALERT_NO_GHEART:6,ALERT_NO_HERO_DRAG:7,ALERT_BUY_HERO:8,ALERT_NO_SOULSTONE:9,ALERT_NO_LSOULSTONE:10,ALERT_LIMIT_SOULSTONE:11,ALERT_MAX_UNIT_GRADE:12,ALERT_LIMIT_LV:13,MSG_BUY_CONFIRM:0,MSG_SPEED_BUF:1,MSG_REM_SKILL_COOL:2,MSG_NOT_READY:3,MSG_NOT_ADS:4,MSG_BUY_SUCC:5,MSG_BUY_FAIL:6,MSG_EXCHANGE_SUCC:7,MSG_EXCHANGE_RESET:8,MSG_BUY_ADS_HERO:9,MSG_COUPON_EXPIRED:10,MSG_COUPON_USED:11,MSG_COUPON_ERROR:12,MSG_DEVELOP:13,MSG_RATING_APP:14,MSG_REM_RAID_LIMIT:15,MSG_RAID_NOT_READY:16,MSG_NOT_LOGIN:17,MSG_CLOUD_SAVE_SUCC:18,MSG_CLOUD_SAVE_FAIL:19,MSG_CLOUD_LOAD_SUCC:20,MSG_CLOUD_LOAD_FAIL:21,MSG_WATING:22,MSG_LOGIN_FAIL:23,MSG_ASK_LOAD_DATA:24,MSG_TUTO_END:25,MSG_TERMS:26,MSG_EXCHANGE_RESET_SUCC:27,MSG_FORCE_UPDATE:28,MSG_UPDATE:29,MSG_MAINTENANCE:30,MSG_SVR_TIME_SYNC_FAIL:31,MSG_READY_WORLD_BOSS:32,MSG_RESULT_WORLD_BOSS:33,MSG_NOT_READY_WORLD_BOSS:34,MSG_USE_SANDGLASS:35,MSG_USED_SANDGLASS:36,MSG_DRAGON_LV_LOW:37,MSG_CONFIRM_TRASH:38,MSG_CONFIRM_TRASH_E:39,MSG_EVENT_REWARD:40,MSG_CONFIRM_ELITE_MERGE:41,MSG_INTERNET_ERROR_IN_GUEST:42,MSG_LOGIN_ERROR_IN_GUEST:43,MSG_NO_DATA_FOUND:44,MSG_NO_GUEST:45,MSG_CONNECTION_ERROR:46,MSG_SET_LANG:47,MSG_QUEST_REFRESH:48,MSG_NICK_INPUT_ERROR:49,MSG_NICK_DUPLICATE:50,MSG_CHANGE_NICK_COMFIRM:51,MSG_MIG_CANCEL_CONTINUE:52,MSG_MIG_NEWGAME:53,MSG_MIG_ALREADY_MOVED:54,MIGRATION_INFO:0,MIGRATION_SAVE:1,MIGRATION_SAVE_CONFIRM:2,MIGRATION_SAVE_CONFIRM2:3,MIGRATION_FIND_SAMEDATA:4,MIGRATION_LOAD:5,MIGRATION_LOAD_CONFIRM:6},onLoad:function(){s.instance=this,this._popupHelp=this.popupHelp.getComponent("PopupHelp"),this._popupShop=this.popupShop.getComponent("PopupShop"),this._popupLvup=this.popupLvup.getComponent("PopupLvReward"),this._popupNewCat=this.popupNewCat.getComponent("PopupNewCat"),this._popupCatHotel=this.popupCatHotel.getComponent("PopupCatHotel"),this._popupSlotPlus=this.popupSlotPlus.getComponent("PopupSlotPlus"),this._popupGoodsShop=this.popupGoodsShop.getComponent("PopupGoodsShop"),this._popupAdsCat=this.popupAdsCat.getComponent("PopupAdsCat"),this._popupReward=this.popupReward.getComponent("PopupReward"),this._popupOfflineReward=this.popupOfflineReward.getComponent("PopupOfflineReward"),this._popupMouseReward=this.popupMouseReward.getComponent("PopupMouseReward"),this._popupRandomBox=this.popupRandomBox.getComponent("PopupRandomBox"),this._popupDressRoom=this.popupDressRoom.getComponent("PopupDressRoom"),this._popupAccEquip=this.popupAccEquip.getComponent("PopupAccEquip"),this._popupDailyAccess=this.popupDailyAccess.getComponent("PopupDailyAccess"),this._popupAttend=this.popupAttend.getComponent("PopupAttend"),this._popupSetup=this.popupSetup.getComponent("PopupSetup"),this._popupPost=this.popupPost.getComponent("PopupPost"),this._popupContest=this.popupContest.getComponent("PopupContest"),this._popupContestResult=this.popupContestResult.getComponent("PopupContestResult"),this._popupGallery=this.popupGallery.getComponent("PopupGallery"),this._popupCare=this.popupCare.getComponent("PopupCare"),this._popupOverlap=this.popupOverlap.getComponent("PopupOverlap"),this._popupContent=this.popupContent.getComponent("PopupContent"),this._popupCashShop=this.popupCashShop.getComponent("PopupCashShop"),this._popupFurnitureUp=this.popupFurnitureUp.getComponent("PopupFurnitureUp"),this._popupQuest=this.popupQuest.getComponent("PopupQuest"),this._popupAccMerge=this.popupAccMerge.getComponent("PopupAccMerge"),this._popupLimitProduct=this.popupLimitProduct.getComponent("PopupLimitProduct"),this._rareCatBtn=this.rareCatBtn.getComponent("rareCatBtn"),this._scheduleList=[]},start:function(){},setLink:function(t){this._playSceneMgr=t},init:function(t){this._dataMgr=t},updateQuestAchivement:function(){this._popupQuest&&this._popupQuest.updateQuestAchivement()},nextPopup:function(){return this._scheduleList.shift(),this._scheduleList.length>0&&(this.showPopup(this._scheduleList[0][0],this._scheduleList[0][1],this._scheduleList[0][2]),!0)},schedulePopup:function(t,e,i){this._scheduleList.push([t,e,0]),1==this._scheduleList.length&&this.showPopup(t,e,i)},preSchedulePopup:function(t,e,i){this._scheduleList.unshift([t,e,0]),this.swapSchedulePopup(),1==this._scheduleList.length&&this.showPopup(t,e,i)},swapSchedulePopup:function(){var t=this._scheduleList[0];this._scheduleList[0]=this._scheduleList[1],this._scheduleList[1]=t},currencyUp:function(){this._playSceneMgr.currencyUp()},currencyDown:function(){this._playSceneMgr.currencyDown()},getPopup:function(t){switch(t){case s.POPUP_SHOP:return this._popupShop;case s.POPUP_GOODS_SHOP:return this._popupGoodsShop;case s.POPUP_CASHSHOP:return this._popupCashShop;case s.POPUP_HOTEL:return this._popupCatHotel;case s.POPUP_DRESS_ROOM:return this._popupDressRoom;case s.POPUP_RANDOM_BOX:return this._popupRandomBox;case s.POPUP_CARE:return this._popupCare;case s.POPUP_ADS_CAT:return this._popupAdsCat;case s.POPUP_GALLERY:return this._popupGallery;case s.POPUP_POST:return this._popupPost;case s.POPUP_ACC_EQUIP:return this._popupAccEquip;case s.POPUP_CONTEST:return this._popupContest;case s.POPUP_QUEST:return this._popupQuest}},getPopupHotel:function(){return this._popupCatHotel},getPopupDressRoom:function(){return this._popupDressRoom},getPopupRandomBox:function(){return this._popupRandomBox},showPopup:function(t,e,i){switch(a.playSound(a.audioPopupOpen),this.showLoading(),t){case s.POPUP_HELP:this._popupHelp.showPopup(e);break;case s.POPUP_QUEST:this._popupQuest.showPopup();break;case s.POPUP_SHOP:this._popupShop.showPopup(e),this.currencyUp();break;case s.POPUP_CASHSHOP:this._popupCashShop.showPopup(e),this.currencyUp();break;case s.POPUP_LVUP:this._popupLvup.showPopup(e,i);break;case s.POPUP_COMBACK:this._popupComback.showPopup(e);break;case s.POPUP_REWARD:this._popupReward.showPopup(e,i);break;case s.POPUP_HOTEL:this._popupCatHotel.showPopup(e);break;case s.POPUP_SLOT_PLUS:this._popupSlotPlus.showPopup(e);break;case s.POPUP_NEWCAT:this._popupNewCat.showPopup(e,i);break;case s.POPUP_SETUP:this._popupSetup.showPopup(e);break;case s.POPUP_GOODS_SHOP:this._popupGoodsShop.showPopup(e),this.currencyUp();break;case s.POPUP_ADS_CAT:this._popupAdsCat.showPopup();break;case s.POPUP_OFFLINE_REWARD:this._popupOfflineReward.showPopup(e,i);break;case s.POPUP_MOUSE_REWARD:this._popupMouseReward.showPopup(e);break;case s.POPUP_RANDOM_BOX:this._popupRandomBox.showPopup();break;case s.POPUP_DRESS_ROOM:this._popupDressRoom.showPopup(e,i);break;case s.POPUP_ACC_EQUIP:this._popupAccEquip.showPopup(e);break;case s.POPUP_DAILY_ACCESS:this._popupDailyAccess.showPopup(e);break;case s.POPUP_CONTEST:this._popupContest.showPopup(e);break;case s.POPUP_CONTEST_RESULT:this._popupContestResult.showPopup(e,i);break;case s.POPUP_GALLERY:this._popupGallery.showPopup();break;case s.POPUP_CARE:this._popupCare.showPopup(e);break;case s.POPUP_OVERLAP:this._popupOverlap.showPopup(e);break;case s.POPUP_CONTENT:this._popupContent.showPopup(e,i);break;case s.POPUP_FURNITURE_UP:this._popupFurnitureUp.showPopup(e);break;case s.POPUP_ACC_MERGE:this._popupAccMerge.showPopup(e);break;case s.POPUP_LIMIT_PRODUCT:this._popupLimitProduct.showPopup(e);break;case s.POPUP_LEGEND:this._popupLegend.showPopup();break;case s.POPUP_DRAW:this._popupDraw.showPopup(e);break;case s.POPUP_OWL:this._popupOwl.showPopup(e);break;case s.POPUP_MSG2:this._popupMsg2.showPopup(e);break;case s.POPUP_RAID:this._popupRaid.showPopup(e,i);break;case s.POPUP_POST:this._popupPost.showPopup(e);break;case s.POPUP_INFO:this._popupInfo.showPopup(e);break;case s.POPUP_COUPON:this._popupCoupon.showPopup(e);break;case s.POPUP_PRODUCT:this._popupProduct.showPopup(e);break;case s.POPUP_GETREWARD:this._popupGetReward.showPopup(e);break;case s.POPUP_GETUNIT:this._popupGetUnit.showPopup(e);break;case s.POPUP_WREADY:this._popupWReady.showPopup(e);break;case s.POPUP_WRESULT:this._popupWResult.showPopup(e);break;case s.POPUP_SELECTDRAW:this._popupSelectDraw.showPopup(e);break;case s.POPUP_LUCKYBOX:this._popupLuckybox.showPopup(e);break;case s.POPUP_TOWER:this._popupTower.showPopup(e);break;case s.POPUP_MIGRATION:this._popupMigration.showPopup(e);break;case s.POPUP_ATTEND:this._popupAttend.showPopup(e);break;case s.POPUP_SELECT_TOWER:this._popupSelectTower.showPopup(e);break;case s.POPUP_CHANGE_NICK:this._popupChangeNick.showPopup(e);break;case s.POPUP_SOUND:this._popupSound.showPopup(e)}this.hideRareCatBtn()},hidePopup:function(t,e){switch(a.playSound(a.audioPopupOpen),t){case s.POPUP_HELP:this._popupHelp.hidePopup();break;case s.POPUP_QUEST:this._popupQuest.hidePopup();break;case s.POPUP_SHOP:this._popupShop.hidePopup(),this.currencyDown();break;case s.POPUP_CASHSHOP:this._popupCashShop.hidePopup(),this.currencyDown();break;case s.POPUP_LVUP:this._popupLvup.hidePopup();break;case s.POPUP_COMBACK:this._popupComback.hidePopup();break;case s.POPUP_REWARD:this._popupReward.hidePopup();break;case s.POPUP_HOTEL:this._popupCatHotel.hidePopup();break;case s.POPUP_SLOT_PLUS:this._popupSlotPlus.hidePopup();break;case s.POPUP_NEWCAT:this._popupNewCat.hidePopup();break;case s.POPUP_SETUP:this._popupSetup.hidePopup();break;case s.POPUP_GOODS_SHOP:this._popupGoodsShop.hidePopup(),this.currencyDown();break;case s.POPUP_ADS_CAT:this._popupAdsCat.hidePopup();break;case s.POPUP_OFFLINE_REWARD:this._popupOfflineReward.hidePopup();break;case s.POPUP_MOUSE_REWARD:this._popupMouseReward.hidePopup();break;case s.POPUP_RANDOM_BOX:this._popupRandomBox.hidePopup();break;case s.POPUP_DRESS_ROOM:this._popupDressRoom.hidePopup();break;case s.POPUP_ACC_EQUIP:this._popupAccEquip.hidePopup();break;case s.POPUP_DAILY_ACCESS:this._popupDailyAccess.hidePopup();break;case s.POPUP_CONTEST:this._popupContest.hidePopup();break;case s.POPUP_CONTEST_RESULT:this._popupContestResult.hidePopup();break;case s.POPUP_GALLERY:this._popupGallery.hidePopup();break;case s.POPUP_CARE:this._popupCare.hidePopup();break;case s.POPUP_OVERLAP:this._popupOverlap.hidePopup();break;case s.POPUP_CONTENT:this._popupContent.hidePopup();break;case s.POPUP_FURNITURE_UP:this._popupFurnitureUp.hidePopup();break;case s.POPUP_ACC_MERGE:this._popupAccMerge.hidePopup();break;case s.POPUP_LIMIT_PRODUCT:this._popupLimitProduct.hidePopup();break;case s.POPUP_LEGEND:this._popupLegend.hidePopup();break;case s.POPUP_DRAW:this._popupDraw.hidePopup();break;case s.POPUP_OWL:this._popupOwl.hidePopup();break;case s.POPUP_MSG2:this._popupMsg2.hidePopup();break;case s.POPUP_RAID:this._popupRaid.hidePopup();break;case s.POPUP_POST:this._popupPost.hidePopup();break;case s.POPUP_INFO:this._popupInfo.hidePopup();break;case s.POPUP_COUPON:this._popupCoupon.hidePopup();break;case s.POPUP_PRODUCT:this._popupProduct.hidePopup();break;case s.POPUP_GETREWARD:this._popupGetReward.hidePopup();break;case s.POPUP_GETUNIT:this._popupGetUnit.hidePopup();break;case s.POPUP_WREADY:this._popupWReady.hidePopup();break;case s.POPUP_WRESULT:this._popupWResult.hidePopup();break;case s.POPUP_SELECTDRAW:this._popupSelectDraw.hidePopup();break;case s.POPUP_LUCKYBOX:this._popupLuckybox.hidePopup();break;case s.POPUP_TOWER:this._popupTower.hidePopup(e);break;case s.POPUP_MIGRATION:this._popupMigration.hidePopup(e);break;case s.POPUP_ATTEND:this._popupAttend.hidePopup();break;case s.POPUP_SELECT_TOWER:this._popupSelectTower.hidePopup();break;case s.POPUP_CHANGE_NICK:this._popupChangeNick.hidePopup();break;case s.POPUP_SOUND:this._popupSound.hidePopup()}},hideRareCatBtn:function(){this.rareCatBtn.activeInHierarchy&&this._rareCatBtn.closeAni()},showAlert:function(t,e){this._topAlert.showAlert(t,e)},isActive:function(t){switch(t){case s.POPUP_BOSSREWARD:return this.popupBossReward.active;case s.POPUP_REWARD:return this.popupReward.active}return!1},showLoading:function(){this.loadingMask.active=!0},hideLoading:function(){this.loadingMask.active=!1},actBackKey:function(){return!this.loadingMask.active&&(!!this._popupMsg2.actBackKey()||(!!this._popupComback.actBackKey()||(!!this._popupMsg.actBackKey()||(!!this._popupMigration.actBackKey()||(!!this._popupLuckybox.actBackKey()||(!!this._popupDraw.actBackKey()||(!!this._popupContent.actBackKey()||(!!this._popupGetReward.actBackKey()||(!!this._popupBossReward.actBackKey()||(!!this._popupReward.actBackKey()||(!!this._popupOwl.actBackKey()||(!!this._popupNewCat.actBackKey()||(!!this._popupLvup.actBackKey()||(!!this._popupCashShop.actBackKey()||(!!this._popupShop.actBackKey()||(!!this._popupSelectDraw.actBackKey()||(!!this._popupWResult.actBackKey()||(!!this._popupWReady.actBackKey()||(!!this._popupAttend.actBackKey()||(!!this._popupDailyAccess.actBackKey()||(!!this._popupLegend.actBackKey()||(!!this._popupMana.actBackKey()||(!!this._popupProduct.actBackKey()||(!!this._popupQuest.actBackKey()||(!!this._popupSelectTower.actBackKey()||(!!this._popupTower.actBackKey()||(!!this._popupRaid.actBackKey()||(!!this._popupGetUnit.actBackKey()||(!!this._popupCoupon.actBackKey()||(!!this._popupChangeNick.actBackKey()||(!!this._popupInfo.actBackKey()||(!!this._popupPost.actBackKey()||(!!this._popupHelp.actBackKey()||(!!this._popupSound.actBackKey()||!!this._popupSetup.actBackKey()))))))))))))))))))))))))))))))))))}}));e.exports=s,cc._RF.pop()},{Global:"Global",SoundMgr:"SoundMgr"}],PopupMouseReward:[function(t,e,i){"use strict";cc._RF.push(e,"939d1pYhB5GEoFw6DTKsUhg","PopupMouseReward");var a=t("DataMgr"),s=t("PopupMgr"),n=t("LocaleMgr"),r=t("PlaySceneMgr"),c=(t("SoundMgr"),t("UnitMgr")),o=t("Global");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,catNode:cc.Node,rewardNode:cc.Node,okBtn:cc.Node,titleLabel:cc.Label,okLabel:cc.Label,explainLabel:cc.Label,nameLabel:cc.Label,catSprite:cc.Sprite,gradeLabel:cc.Label,nameLabel2:cc.Label,catSprite2:cc.Sprite,gradeLabel2:cc.Label,rewardName:cc.Label,rewardValue:cc.Label,rewardSprite:cc.Sprite,_mouseRewardText:"",_rewardCoin:0,_rewardRareCoin:0,_rewardType:"",_catGrade:-1,_catSlot:-1,_unitSc:null,_createBool:!1},start:function(){this.titleLabel.string=n.getString(3064),this.titleLabel.fontSize=n.getRibbonFontSize(),this.okLabel.string=n.getString(1002),this._mouseRewardText=n.getString(3072)},showPopup:function(t,e){this.initData(t),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.node.opacity=255,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(t){if(this._rewardType=t.ItemType,this._rewardValue=t.ItemValue,"MOUSE_CAT"==this._rewardType){this.catNode.active=!0,this.rewardNode.active=!1,this.explainLabel.string=n.getString(3003,"<br/>","\n"),this._catGrade=this._rewardValue;var e=c.instance.getUnitDataGrade(this._catGrade).getUnitTextKey(),i=n.getString(e);this.catSprite.spriteFrame=c.instance.getUnitSpriteForGrade(this._catGrade),this.nameLabel.string=i,this.gradeLabel.string=this._catGrade;e=c.instance.getUnitDataGrade(this._catGrade+2).getUnitTextKey(),i=n.getString(e);this.catSprite2.spriteFrame=c.instance.getUnitSpriteForGrade(this._catGrade+2),this.nameLabel2.string=i,this.gradeLabel2.string=this._catGrade+2,this._catSlot=a.getEmptyMergeSlot(),r.instance.mouseReward(this._catGrade),this._unitSc=r.instance.getUnitSc(this._catSlot)}else{this.catNode.active=!1,this.rewardNode.active=!0,this.explainLabel.string=n.getString(3112,"<br/>","\n");var s=a.getPaymentType(this._rewardType);this.rewardName.string=a.getPaymentName(s),this.rewardValue.string=o.getNumToType(this._rewardValue),this.rewardSprite.spriteFrame=r.instance.getCurrencySprite(s)}},OnAdsBtn:function(){this._btnLockFlag||("MOUSE_CAT"==this._rewardType?this.scheduleOnce(this.upgradeUnit,.3):this.scheduleOnce(this.rewardAdsGet,.3),this.hidePopupHandler())},OnGetBtn:function(){this._btnLockFlag||("MOUSE_CAT"!=this._rewardType&&this.scheduleOnce(this.rewardGet,.3),this.hidePopupHandler())},upgradeUnit:function(){this._unitSc.createObj(this._catGrade+2),a.setMergeSlotGradeData(this._catSlot,this._catGrade+2),r.instance.showAlarm(this._mouseRewardText,!0,0,r.instance.UNDER)},rewardGet:function(){var t=a.getPaymentType(this._rewardType),e=[],i=a.setRewardData(t,this._rewardValue);e.push(i),s.instance.showPopup(s.POPUP_REWARD,e,0);var n=a.getMouseRewardCount();n++,a.setMouseRewardCount(n)},rewardAdsGet:function(){var t=a.getPaymentType(this._rewardType),e=[],i=a.setRewardData(t,4*this._rewardValue);e.push(i),s.instance.showPopup(s.POPUP_REWARD,e,0);var n=a.getMouseRewardCount();n++,a.setMouseRewardCount(n)},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.endHideAni,.3),this.scheduleOnce(this.destroyPopup,.3)},endHideAni:function(){s.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_MOUSE_REWARD))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],PopupNewCat:[function(t,e,i){"use strict";cc._RF.push(e,"54c1als4P9AXZbpoClnokOk","PopupNewCat");var a=t("DataMgr"),s=t("PopupMgr"),n=t("UnitMgr"),r=t("RareCatMgr"),c=t("LocaleMgr"),o=t("PlaySceneMgr"),h=t("SoundMgr"),u=t("Global"),l=t("TutoMgr");cc.Class({extends:cc.Component,properties:{backAni:sp.Skeleton,ribbonAni:sp.Skeleton,newCatAni:sp.Skeleton,backStarAni:sp.Skeleton,allNode:cc.Node,bgNode:cc.Node,catGradeNode:cc.Node,titleLabel:cc.Label,okLabel:cc.Label,nameLabel:cc.Label,coinLabel:cc.Label,cashLabel:cc.Label,explainLabel:cc.Label,adsRewardMul:cc.Label,catGradeLabel:cc.Label,catGradeSprite:cc.Sprite,catSprite:cc.Sprite,iconGradeSpriteFrame:[cc.SpriteFrame],_topUIMgr:null,_playSceneMgr:null,_btnLockFlag:!0,_rewardCoin:0,_rewardCash:0,_catGrade:0},start:function(){this.titleLabel.string=c.getString(3058),this.titleLabel.fontSize=c.getRibbonFontSize(),this.okLabel.string=c.getString(1001),this.explainLabel.string=c.getString(3029),this.adsRewardMul.string="x"+u.ADS_REWARD_MUL},showPopup:function(t,e){this.initData(t),this._playSceneMgr=o.instance,this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.node.opacity=255,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),h.playSound(h.audioNewCat),this._btnLockFlag=!0},initData:function(t){this.node.opacity=0,this.node.active=!0;var e=t.getUnitGrade();if(this._catGrade=e,cc.log("newCat Grade : "+e),e>10){switch(this.catSprite.spriteFrame=r.instance.getUnitSpriteForGrade(e),this.catGradeNode.active=!1,t.getRank()){case"R":this.catGradeSprite.spriteFrame=this.iconGradeSpriteFrame[1];break;case"SR":this.catGradeSprite.spriteFrame=this.iconGradeSpriteFrame[2];break;case"UR":this.catGradeSprite.spriteFrame=this.iconGradeSpriteFrame[3]}var i=t.getUnitNameTextKey();cc.log("textIdx : "+i),this.nameLabel.string=c.getString(i),this._rewardCoin=t.getNewRewardCoin(),this._rewardCash=t.getNewRewardCash(),this.coinLabel.string=u.getNumToType(this._rewardCoin),this.cashLabel.string=u.getNumToType(this._rewardCash),this.bgNode.active=!1,this.explainLabel.node.color=new cc.Color(255,255,255),this.backAni.addAnimation(0,"cat_back_eff_rare",!0)}else{this.catGradeNode.active=!0,this.catGradeLabel.string=e,this.catSprite.spriteFrame=n.instance.getUnitSpriteForGrade(e),this.catGradeSprite.spriteFrame=this.iconGradeSpriteFrame[0];i=t.getUnitTextKey();this.nameLabel.string=c.getString(i),this._rewardCoin=t.getNewRewardCoin(),this._rewardCash=t.getNewRewardCash(),this.coinLabel.string=u.getNumToType(this._rewardCoin),this.cashLabel.string=u.getNumToType(this._rewardCash),this.bgNode.active=!0,this.explainLabel.node.color=new cc.Color(61,17,17),this.backAni.addAnimation(0,"cat_back_eff_nomal",!0)}this.backStarAni.addAnimation(0,"popup_eff",!0)},OnAdsBtn:function(){if(!this._btnLockFlag){var t=this._rewardCoin*u.ADS_REWARD_MUL,e=this._rewardCash*u.ADS_REWARD_MUL;a.addCoin(this._rewardCoin*(u.ADS_REWARD_MUL-1)),a.addCashCoin(this._rewardCash*(u.ADS_REWARD_MUL-1)),o.instance.viewAllCoin();var i=[],n={};n.type=u.PAYMENT_COIN,n.count=t,i.push(n);var r={};r.type=u.PAYMENT_CASH_COIN,r.count=e,i.push(r),s.instance.preSchedulePopup(s.POPUP_REWARD,i,.8),this.hidePopupHandler()}},OnGetBtn:function(){this._btnLockFlag||this.hidePopupHandler()},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.endHideAni,.3),this.scheduleOnce(this.destroyPopup,.3),this.newCatAni.setAnimation(0,"null",!1),o.instance.viewAllCoin()},endHideAni:function(){this.chkTuto();var t=s.instance.nextPopup(),e=this._playSceneMgr.getTutoRareBool();if(!t&&e)return l.instance.startTutorial(l.TUTO_TYPE_RARE_CAT_FIRST,a.getTutoProc(l.TUTO_TYPE_RARE_CAT_FIRST)),this._playSceneMgr.setTutoRareBool(!1),void this._playSceneMgr.updateTransBtn();this.chkOpenContent();var i=this._playSceneMgr.getContentOpenIdx();t||-1==i||s.instance.showPopup(s.POPUP_CONTENT,i,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.newCatAni.clearTrack(0),this.newCatAni.active=!1,this.node.active=!1},chkTuto:function(){0==a.getTutoProc(l.TUTO_TYPE_RARE_CAT_FIRST)&&this._catGrade>10&&this._playSceneMgr.setTutoRareBool(!0)},chkOpenContent:function(){for(var t=0;t<a.getContentTableLength();t++)if(!a.chkContentOpen(t)){var e=a.getContentData(t);if(e.getOpenType()==u.CONTENT_OPEN_TYPE_CATGRADE&&a.getNowMaxUnitGrade()>=e.getOpenValue()){this._playSceneMgr.setContentOpenIdx(t);break}if(e.getOpenType()==u.CONTENT_OPEN_TYPE_RARE_CAT_COUNT&&a.getRareCatCount()>=e.getOpenValue()){this._playSceneMgr.setContentOpenIdx(t);break}}},unsetBtnLock:function(){s.instance.hideLoading(),this.newCatAni.active=!0,this.newCatAni.setAnimation(0,"pawpad_eff",!1),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_NEWCAT))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr",UnitMgr:"UnitMgr"}],PopupOfflineReward:[function(t,e,i){"use strict";cc._RF.push(e,"879239DdZxNyZD2yTYTxj99","PopupOfflineReward");var a=t("DataMgr"),s=t("PopupMgr"),n=t("LocaleMgr"),r=t("PlaySceneMgr"),c=(t("SoundMgr"),t("Global"));cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,titleLabel:cc.Label,okLabel:cc.Label,coinLabel:cc.Label,rareCoinLabel:cc.Label,explainLabel:cc.Label,adsRewardMul:cc.Label,_rewardCoin:0,_rewardRareCoin:0},start:function(){this.titleLabel.string=n.getString(3063),this.titleLabel.fontSize=n.getRibbonFontSize(),this.okLabel.string=n.getString(1001),this.explainLabel.string=n.getString(3032,"<br/>","\n"),this.adsRewardMul.string="x"+c.ADS_REWARD_MUL},showPopup:function(t,e){this.initData(t),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.node.opacity=255,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(t){this._rewardCoin=t.rewardCoin+t.bonusCoin,this._rewardRareCoin=t.rewardRareCoin+t.bonusRareCoin,this.coinLabel.string=c.getNumToType(t.rewardCoin)+"(+"+c.getNumToType(t.bonusCoin)+")",this.rareCoinLabel.string=c.getNumToType(t.rewardRareCoin)+"(+"+c.getNumToType(t.bonusRareCoin)+")"},OnAdsBtn:function(){if(!this._btnLockFlag){var t=this._rewardCoin*c.ADS_REWARD_MUL,e=this._rewardRareCoin*c.ADS_REWARD_MUL;a.addCoin(this._rewardCoin*(c.ADS_REWARD_MUL-1)),a.addRareCoin(this._rewardRareCoin*(c.ADS_REWARD_MUL-1)),r.instance.viewAllCoin();var i=[],n={};n.type=c.PAYMENT_COIN,n.count=t,i.push(n);var o={};o.type=c.PAYMENT_RARE_COIN,o.count=e,i.push(o),s.instance.preSchedulePopup(s.POPUP_REWARD,i,.8),this.hidePopupHandler()}},OnGetBtn:function(){this._btnLockFlag||(this.hidePopupHandler(),r.instance.viewAllCoin())},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.endHideAni,.3),this.scheduleOnce(this.destroyPopup,.3)},endHideAni:function(){s.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_OFFLINE_REWARD))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupOverlap:[function(t,e,i){"use strict";cc._RF.push(e,"4f4f0cbaeBDtIl04d2o5VxL","PopupOverlap");var a=t("DataMgr"),s=t("PopupMgr"),n=(t("UnitMgr"),t("RareCatMgr")),r=t("LocaleMgr"),c=t("PlaySceneMgr"),o=t("SoundMgr");t("Global");cc.Class({extends:cc.Component,properties:{backAni:sp.Skeleton,ribbonAni:sp.Skeleton,backStarAni:sp.Skeleton,lvUpEff:sp.Skeleton,allNode:cc.Node,mergeNode:cc.Node,unit0:cc.Node,unit1:cc.Node,mergeEff:sp.Skeleton,expNode:cc.Node,expLabel:cc.Label,catLvLabel:cc.Label,catExpLabel:cc.Label,catExpProgress:cc.ProgressBar,titleLabel:cc.Label,okLabel:cc.Label,nameLabel:cc.Label,coinLabel:cc.Label,cashLabel:cc.Label,explainLabel:cc.Label,catGradeSprite:cc.Sprite,catSprite:cc.Sprite,_catSpriteFrame:null,_topUIMgr:null,_playSceneMgr:null,_btnLockFlag:!0,_oldCatLv:0,_newCatLv:0,_newExp:0,_rewardCoin:0,_rewardCash:0,_catGrade:0,_exp:0},start:function(){var t=this;this.titleLabel.string=r.getString(3105),this.titleLabel.fontSize=r.getRibbonFontSize(),this.okLabel.string=r.getString(1001),this.explainLabel.string=r.getString(3046,"<br/>","\n"),this.lvUpEff.setCompleteListener(function(e){t.lvUpEff.node.active=!1})},showPopup:function(t,e){this._playSceneMgr=c.instance,this.initData(t),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.node.opacity=255,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(t){this.node.opacity=0,this.node.active=!0,this.backAni.node.active=!1,this.backStarAni.node.active=!1;var e=t.getUnitGrade();this._catGrade=e,this._userCatData=a.getRareCatData(this._catGrade),cc.log("newCat Grade : "+e),this._catSpriteFrame=n.instance.getUnitSpriteForGrade(e),this.catSprite.spriteFrame=this._catSpriteFrame,this.catSprite.node.active=!1;var i=t.getRank();this.catGradeSprite.spriteFrame=n.instance.getUnitRankSprite(i);var s=t.getUnitNameTextKey();this.nameLabel.string=r.getString(s),this._exp=t.getSumExp(),this._rewardCash=t.getSumCash(),this.cashLabel.string=this._rewardCash,a.addCashCoin(this._rewardCash),this._playSceneMgr.viewAllCoin(),a.saveData(),this.explainLabel.node.color=new cc.Color(255,255,255);var c=a.addRareCatExp(this._catGrade,0),o=this._userCatData.getFriendshipLv();this.catLvLabel.string="Lv. "+o,this.catExpLabel.string=(100*c).toFixed(1)+"%",this.catExpProgress.progress=c},OnGetBtn:function(){this._btnLockFlag||this.hidePopupHandler()},actAni:function(){this.mergeNode.active=!0,this.unit0.active=!0,this.unit1.active=!0,this.unit0.getComponent(cc.Sprite).spriteFrame=this._catSpriteFrame,this.unit1.getComponent(cc.Sprite).spriteFrame=this._catSpriteFrame,this.unit0.x=0,this.unit0.y=0,this.unit1.x=0,this.unit1.y=0,this.unit0.runAction(cc.sequence(cc.moveTo(.2,-120,0).easing(cc.easeCircleActionOut()),cc.delayTime(.15),cc.moveTo(.2,0,0).easing(cc.easeCircleActionIn()))),this.unit1.runAction(cc.sequence(cc.moveTo(.2,120,0).easing(cc.easeCircleActionOut()),cc.delayTime(.15),cc.moveTo(.2,0,0).easing(cc.easeCircleActionIn()),cc.callFunc(this.effAni,this))),this.scheduleOnce(this.hideAni,.8)},effAni:function(){this.catSprite.node.active=!0,this.unit0.active=!1,this.unit1.active=!1,this.backAni.node.active=!0,this.backStarAni.node.active=!0,this.backAni.addAnimation(0,"cat_back_eff_rare",!0),this.backStarAni.addAnimation(0,"popup_eff",!0),this.mergeEff.node.active=!0,this.mergeEff.setAnimation(0,"merge_eff",!1);cc.v2(this.mergeNode.x,this.mergeNode.y);this.expUp()},expUp:function(){this.updateCatExp(this._exp)},updateCatExp:function(t){void 0==t&&(t=0),this._oldCatLv=this._userCatData.getFriendshipLv(),this._newExp=a.addRareCatExp(this._catGrade,t),this._newCatLv=this._userCatData.getFriendshipLv(),this._oldCatLv==this._newCatLv?(this.progressExpUp(),this.scheduleOnce(this.expUpAni,.5)):(this.progressLvUp(),this.scheduleOnce(this.lvUpAni,.5))},progressLvUp:function(){var t=this;cc.tween(this.catExpProgress).to(1,{progress:1}).call(function(){t.chkLvUp()}).call(function(){t.resetExp()}).start()},progressExpUp:function(){var t=this;cc.tween(this.catExpProgress).to(1,{progress:this._newExp}).call(function(){t.updateCatLv(t._oldCatLv,t._newExp)}).start()},chkLvUp:function(){this._oldCatLv++,this._oldCatLv<this._newCatLv?this.progressLvUp():this.progressExpUp()},resetExp:function(){this.catExpProgress.progress=0,this.updateCatLv(this._oldCatLv,this._newExp)},updateCatLv:function(t,e){this.catLvLabel.string="Lv. "+t,this.catExpLabel.string=(100*e).toFixed(1)+"%"},expUpAni:function(){this.expNode.stopAllActions(),this.expNode.y=160,this.expNode.opacity=0,this.expLabel.string="+"+this._exp,this.expNode.active=!0,this.expNode.runAction(cc.moveBy(1.5,cc.v2(0,30)).easing(cc.easeBackOut())),this.expNode.runAction(cc.sequence(cc.fadeIn(.3),cc.delayTime(.9),cc.fadeOut(.3),cc.callFunc(this.expUpAniEnd,this)))},expUpAniEnd:function(){this.expNode.active=!1},lvUpAni:function(){o.playSound(o.audioNewCat),this.lvUpEff.node.active=!0,this.lvUpEff.setAnimation(0,"levelup",!1)},hideAni:function(){this.unit1.stopAllActions(),this.mergeEff.node.active=!1,this.mergeNode.active=!1},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this.scheduleOnce(this.endHideAni,.3)},endHideAni:function(){s.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.lvUpEff.clearTrack(0),this.lvUpEff.node.active=!1,this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this.actAni(),o.playSound(o.audioNewCat),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_OVERLAP))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",RareCatMgr:"RareCatMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],PopupPost:[function(t,e,i){"use strict";cc._RF.push(e,"8b6256Tf4ZPrIkFpjWUJx4H","PopupPost");var a=t("PopupMgr"),s=(t("SoundMgr"),t("DataMgr")),n=t("LocaleMgr"),r=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,topUIMgr:cc.Node,postObjPrefab:cc.Prefab,allNode:cc.Node,scrollViewNode:cc.Node,titleLabel:cc.Label,_btnLockFlag:!1,_postObjArr:null},start:function(){this.titleLabel.string=n.getString(9001),this.titleLabel.fontSize=n.getRibbonFontSize()},showPopup:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0,null==this._postObjArr&&this.updatePostObj(),this.ribbonAni.addAnimation(0,"ribbon",!1)},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,a.instance.hidePopup(a.POPUP_POST))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){a.instance.hideLoading(),this._btnLockFlag=!1},updatePostObj:function(){if(s.updatePostInfo(),this._postObjArr)for(var t=0;t<this._postObjArr.length;++t)this._postObjArr[t].destroy();this._postObjArr=[];var e=s.getPostCnt();for(t=0;t<e;++t){var i=cc.instantiate(this.postObjPrefab);i.getComponent("PostRewardObj").init(this,s.getPostInfo(t)),this.scrollViewNode.addChild(i),this._postObjArr.push(i)}0==e&&this.hidePopupHandler(),this.scrollViewNode.y=-30},chkPostObj:function(){this.updatePostObj(),this._postObjArr.length>0?r.instance.updatePostNew(!0):r.instance.updatePostNew(!1)},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)}}),cc._RF.pop()},{DataMgr:"DataMgr",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupQuest:[function(t,e,i){"use strict";cc._RF.push(e,"9054awNqbFP/pkRhVMK869s","PopupQuest");var a=t("Global"),s=t("DataMgr"),n=t("PopupMgr"),r=t("SoundMgr"),c=t("LocaleMgr"),o=t("PlaySceneMgr"),h=cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,questSlotArr:[cc.Node],warningNode:cc.Node,resetNode:cc.Node,titleLabel:cc.Label,rewardNumLabel:cc.Label,refreshBtn:cc.Button,adsBtn:cc.Button,cashBtn:cc.Button,resetBtn:cc.Button,adsBtnBg:cc.Node,refreshLabel:cc.Label,adsRefreshIcon:cc.Node,adsTimeLabel:cc.Label,cashLabel:cc.Label,descLabel:cc.Label,descLabel2:cc.Label,timeNode:cc.Node,warningLabel:cc.Label,okLabel:cc.Label,cancleLabel:cc.Label,resetLabel:cc.Label,resetOkLabel:cc.Label,resetCancleLabel:cc.Label,resetTicketCountLabel:cc.Label,_slotObjArr:null,_refreshKind:-1,_cashfailLabel:"",_resetFailLabel:"",_grayBtn:cc.SpriteFrame,_blueBtn:cc.SpriteFrame,_grayRoundBtn:cc.SpriteFrame,_blueRoundBtn:cc.SpriteFrame,_playSceneMgr:null,_firstFlag:!0,_btnLockFlag:!1},statics:{FREE:0,ADS:1,CASH:2},start:function(){this.titleLabel.string=c.getString(1096),this.refreshLabel.string=c.getString(1099),this.descLabel2.string=c.getString(3124),this.warningLabel.string=c.getString(3115,"<br/>","\n"),this.okLabel.string=c.getString(1001),this.cancleLabel.string=c.getString(1100),this.resetLabel.string=c.getString(3123,"<br/>","\n"),this.resetOkLabel.string=c.getString(1001),this.resetCancleLabel.string=c.getString(1100),this._cashfailLabel=c.getString(3008),this._resetFailLabel=c.getString(3118,"<br/>","\n")},init:function(){this._playSceneMgr=o.instance,this._blueBtn=this._playSceneMgr.getSpriteToUI("btn1"),this._grayBtn=this._playSceneMgr.getSpriteToUI("btn2"),this._grayRoundBtn=this._playSceneMgr.getSpriteToUI("btn_round2"),this._blueRoundBtn=this._playSceneMgr.getSpriteToUI("btn_round3");for(var t=0;t<this.questSlotArr.length;++t)this.questSlotArr[t].getComponent("QuestObj").init(t,this);this.cashLabel.string=a.QUEST_REFRESH_PRICE},showPopup:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0,s.chkDailyQuestRewardReset()&&(this._firstFlag=!0),this._firstFlag?(this._firstFlag=!1,this.updateQuestSlot()):this.updateQuestAchivement(),this.updateBtn(),this.updateResetBtn(),this.resetTicketCountLabel.string=s.getQuestResetTicket(),this.schedule(this.updateBtn,1),this.ribbonAni.addAnimation(0,"ribbon",!1)},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_QUEST),r.playSound(r.audioCancel))},hidePopup:function(){this.unschedule(this.updateBtn),this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)},updateQuestSlot:function(){if(this.rewardNumLabel.string=c.getString(1097)+" : "+s.getDailyQuestRewardNum()+" / "+a.MAX_QUEST_REWARD,s.getDailyQuestRewardNum()<a.MAX_QUEST_REWARD){this.descLabel2.node.active=!1;for(var t=0;t<this.questSlotArr.length;++t)this.questSlotArr[t].active=!0,this.questSlotArr[t].getComponent("QuestObj").updateInfo(),this.questSlotArr[t].getComponent("QuestObj").updateAchivement()}else{this.descLabel2.node.active=!0;for(t=0;t<this.questSlotArr.length;++t)this.questSlotArr[t].active=!1}s.getTopUIMgr().updateQuestNewMark()},updateQuestAchivement:function(){for(var t=0;t<this.questSlotArr.length;++t)this.questSlotArr[t].getComponent("QuestObj").updateAchivement()},updateBtn:function(){if(s.getDailyQuestRewardNum()<a.MAX_QUEST_REWARD){var t=s.getQuestRefreshMaxTime(),e=Math.floor(cc.sys.now()/1e3);if(0==t||e>=t)this.refreshBtn.node.active=!0,this.adsBtn.node.active=!1,this.cashBtn.node.active=!1,this.timeNode.active=!1;else{if(this.refreshBtn.node.active=!1,this.adsBtn.node.active=!0,this.cashBtn.node.active=!0,s.getAdsQuestTime()>0){var i=s.getAdsQuestTime(),n=Math.floor(i/60)>=10?Math.floor(i/60):"0"+Math.floor(i/60),r=i%60>=10?i%60:"0"+i%60;this.adsTimeLabel.string=n+":"+r,this.adsRefreshIcon.active=!1,this.adsBtn.interactable=!1,this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtn}else this.adsTimeLabel.string="",this.adsRefreshIcon.active=!0,this.adsBtn.interactable=!0,this.adsBtn.node.getComponent("cc.Sprite").spriteFrame=this._blueBtn;s.getCashCoin()>=a.QUEST_REFRESH_PRICE?(this.cashBtn.node.opacity=255,this.cashBtn.interactable=!0):(this.cashBtn.node.opacity=100,this.cashBtn.interactable=!1),this.timeNode.active=!0,this.descLabel.string=c.getString(1098)+" "+s.getQuestRefreshTimeStr(e)}}else this.refreshBtn.node.active=!1,this.adsBtn.node.active=!1,this.cashBtn.node.active=!1,this.timeNode.active=!1},updateResetBtn:function(){s.getQuestResetTicket()>0?(this.resetBtn.node.getComponent("cc.Sprite").spriteFrame=this._blueRoundBtn,this.resetBtn.interactable=!0):(this.resetBtn.node.getComponent("cc.Sprite").spriteFrame=this._grayRoundBtn,this.resetBtn.interactable=!1)},OnFreeBtn:function(){this._btnLockFlag||(this._refreshKind=h.FREE,this.warningNode.active=!0)},OnAdsBtn:function(){this._btnLockFlag||(this._refreshKind=h.ADS,this.warningNode.active=!0)},OnCashBtn:function(){this._btnLockFlag||(this._refreshKind=h.CASH,this.warningNode.active=!0)},OnResetBtn:function(){this._btnLockFlag||(s.getDailyQuestRewardNum()>0?this.resetNode.active=!0:this._playSceneMgr.showAlarm(this._resetFailLabel,!1,0,this._playSceneMgr.OVERLAY))},OnOkBtn:function(){switch(this._refreshKind){case h.FREE:this.actFreeRefresh();break;case h.ADS:this.succAdHandler();break;case h.CASH:this.actGemRefresh()}this.warningNode.active=!1},OnCancleBtn:function(){this.warningNode.active=!1},OnResetOk:function(){s.getQuestResetTicket()>0&&(s.useQuestResetTicket(),s.resetQuestCount(),this.updateQuestSlot(),this.updateResetBtn(),this.updateBtn(),this.resetTicketCountLabel.string=s.getQuestResetTicket()),this.resetNode.active=!1},OnResetCancle:function(){this.resetNode.active=!1},actFreeRefresh:function(){s.resetQuestRefreshMaxTime(),s.getQuestList(),this.updateQuestSlot(),this.updateBtn(),s.saveData()},succAdHandler:function(){s.resetAdsQuestTime(),s.getQuestList(),this.updateQuestSlot(),this.updateBtn(),s.saveData(),this._btnLockFlag=!1},actGemRefresh:function(){s.getCashCoin()>=a.QUEST_REFRESH_PRICE?(s.minusCashCoin(a.QUEST_REFRESH_PRICE),this._playSceneMgr.viewCashCoin(),s.getQuestList(),this.updateQuestSlot(),this.updateBtn(),s.saveData()):this._playSceneMgr.showAlarm(this._cashfailLabel,!1,0,this._playSceneMgr.OVERLAY)}});cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupRandomBox:[function(t,e,i){"use strict";cc._RF.push(e,"05eb4+NzBpMQqRNPEHsSQjV","PopupRandomBox");var a=t("DataMgr"),s=t("PopupMgr"),n=t("LocaleMgr"),r=t("PlaySceneMgr"),c=t("SoundMgr"),o=t("UnitMgr"),h=t("AccessoryMgr"),u=t("AccessoryUserData"),l=t("Global");cc.Class({extends:cc.Component,properties:{explainCatLabel:cc.Label,explainAccLabel:cc.Label,okCatLabel:cc.Label,okAccLabel:cc.Label,retryLabel:cc.Label,titleSkeleton:sp.Skeleton,boxSkeleton:sp.Skeleton,backEffectSkeleton:sp.Skeleton,starEffectSkeleton1:sp.Skeleton,starEffectSkeleton2:sp.Skeleton,allNode:cc.Node,blackBlockNode:cc.Node,whiteMask:cc.Node,accTapNode:cc.Node,catResultNode:cc.Node,accResultNode:cc.Node,effectNode:cc.Node,newCat:cc.Node,newAcc:cc.Node,adsNode:cc.Node,freeNode:cc.Node,rareCoinBtnNode:cc.Node,randomBoxTimeNode:cc.Node,freeLabel:cc.Label,adsLabel:cc.Label,rareCoinLabel:cc.Label,randomBoxTimeLabel:cc.Label,ticketLabel:cc.Label,btnTicketSprite:cc.Sprite,rareCoinNode:cc.Node,ticketSprite:cc.Sprite,ticketCountLabel:cc.Label,rareCoinCountLabel:cc.Label,catTicketSprite:cc.SpriteFrame,accTicketSprite:cc.SpriteFrame,catGradeLabel:cc.Label,catSprite:cc.Sprite,catNameLabel:cc.Label,accSprite:cc.Sprite,accGradeSprite:cc.Sprite,accNameLabel:cc.Label,accStatNodeArr:cc.Node,accBuffNode:cc.Node,spriteStatArr:cc.Sprite,spriteBuff:cc.Sprite,statLabelArr:cc.Label,buffLabel:cc.Label,spriteCat:cc.Sprite,spriteAcc:cc.Sprite,spriteTapCat:cc.Sprite,spriteTapAcc:cc.Sprite,spriteFrameTap1:cc.SpriteFrame,spriteFrameTap2:cc.SpriteFrame,spriteFrameTapCat1:cc.SpriteFrame,spriteFrameTapCat2:cc.SpriteFrame,spriteFrameTapAcc1:cc.SpriteFrame,spriteFrameTapAcc2:cc.SpriteFrame,cateContent:[cc.Node],_freeText:"",_randomBoxState:0,_CAT_BOX:0,_ACC_BOX:1,_timeLabel:"",_playSceneMgr:null,_accessoryMgr:null,_ticketBool:!1,_retryBool:!1,_SLOT_FAIL:0,_CAT_TICKET_FAIL:1,_ACC_TICKET_FAIL:2,_RARE_COIN_FAIL:3,_ADS_NEED_FAIL:4,_ADS_TIME_FAIL:5},start:function(){var t=this;this.explainCatLabel.string=n.getString(3029),this.okCatLabel.string=n.getString(1001),this.okAccLabel.string=n.getString(1001),this.retryLabel.string=n.getString(1061),this._timeLabel=n.getString(3068),this._freeText=n.getString(1068),this.checkBoxCount(),this.boxSkeleton.setEventListener(function(e,i){switch(i.data.name){case"endAni":t.actOpenBox(),t.boxSkeleton.node.active=!1;break;case"shake":c.playSound(c.audioBoxShake);break;case"light":c.playSound(c.audioNewCat)}})},showPopup:function(){this._playSceneMgr=r.instance,this._accessoryMgr=h.instance,this.showAni()},showAni:function(){this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.popupView,.5),this.scheduleOnce(this.fadeOut,.5),this.allNode.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.unsetBtnLock,this))),this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_FULL_SCREEN),this._btnLockFlag=!0},fadeIn:function(){this._playSceneMgr.fadeIn(.5)},fadeOut:function(){this._playSceneMgr.fadeOut(.5)},popupView:function(){this.node.active=!0,this.initData()},initData:function(){this.checkBoxCount(),this.boxSkeleton.node.active=!0,this._randomBoxState==this._CAT_BOX?this.ticketCountLabel.string=a.getCatTicket():this._randomBoxState==this._ACC_BOX&&(this.ticketCountLabel.string=a.getAccTicket()),a.getNowMaxUnitGrade()>=l.RARE_CAT_MIN?this.accTapNode.active=!0:this.accTapNode.active=!1,this.boxSkeleton.setAnimation(0,"randombox_idle",!0)},updateRareCoin:function(){this.rareCoinCountLabel.string=l.getNumToType(a.getRareCoin())},updateNewCat:function(t){this.newCat.active=t},updateNewAcc:function(t){this.newAcc.active=t},tutoTransTap:function(){this._randomBoxState=this._ACC_BOX,this.spriteAcc.spriteFrame=this.spriteFrameTapAcc1,this.spriteTapAcc.spriteFrame=this.spriteFrameTap1,this.spriteCat.spriteFrame=this.spriteFrameTapCat2,this.spriteTapCat.spriteFrame=this.spriteFrameTap2,this.boxSkeleton.setSkin("box_acc"),this.ticketSprite.spriteFrame=this.accTicketSprite,this.ticketCountLabel.string=a.getAccTicket(),this.rareCoinCountLabel.string=l.getNumToType(a.getRareCoin()),this.btnTicketSprite.spriteFrame=this.accTicketSprite,this.checkBoxCount(),c.playSound(c.audioBtn0)},OnTransTap:function(t,e){cc.log(e);var i=parseInt(e);switch(this._randomBoxState=i,i){case this._CAT_BOX:this.spriteCat.spriteFrame=this.spriteFrameTapCat1,this.spriteTapCat.spriteFrame=this.spriteFrameTap1,this.spriteAcc.spriteFrame=this.spriteFrameTapAcc2,this.spriteTapAcc.spriteFrame=this.spriteFrameTap2,this.boxSkeleton.setSkin("box_cat"),this.ticketSprite.spriteFrame=this.catTicketSprite,this.ticketCountLabel.string=a.getCatTicket(),this.btnTicketSprite.spriteFrame=this.catTicketSprite,this.checkBoxCount();break;case this._ACC_BOX:this.spriteAcc.spriteFrame=this.spriteFrameTapAcc1,this.spriteTapAcc.spriteFrame=this.spriteFrameTap1,this.spriteCat.spriteFrame=this.spriteFrameTapCat2,this.spriteTapCat.spriteFrame=this.spriteFrameTap2,this.boxSkeleton.setSkin("box_acc"),this.ticketSprite.spriteFrame=this.accTicketSprite,this.ticketCountLabel.string=a.getAccTicket(),this.rareCoinCountLabel.string=l.getNumToType(a.getRareCoin()),this.btnTicketSprite.spriteFrame=this.accTicketSprite,this.checkBoxCount()}c.playSound(c.audioBtn0)},OnRetryBtn:function(){switch(c.playSound(c.audioBtn0),this._randomBoxState){case this._CAT_BOX:this.catResultNode.active=!1;break;case this._ACC_BOX:this.accResultNode.active=!1}this._retryBool=!0,this.blackBlockNode.active=!1,this.effectNode.active=!1,this.boxSkeleton.node.active=!0,this.boxSkeleton.setAnimation(0,"randombox_idle",!0),this._btnLockFlag=!1,this.openSelect()},OnOkBtn:function(){switch(c.playSound(c.audioBtn0),this._randomBoxState){case this._CAT_BOX:this.catResultNode.active=!1;break;case this._ACC_BOX:this.accResultNode.active=!1}this.blackBlockNode.active=!1,this.effectNode.active=!1,this.boxSkeleton.node.active=!0,this.boxSkeleton.setAnimation(0,"randombox_idle",!0),this._btnLockFlag=!1},OnFreeBtn:function(){this._btnLockFlag||(this._btnLockFlag=!0,this._ticketBool=!1,this._retryBool=!1,this.openSelect(),c.playSound(c.audioBtn0))},OnTicketBtn:function(){this._btnLockFlag||(this._btnLockFlag=!0,this._ticketBool=!0,this._retryBool=!1,this.openSelect(),c.playSound(c.audioBtn0))},openSelect:function(){switch(this._randomBoxState){case this._CAT_BOX:this.openCatBox();break;case this._ACC_BOX:this.openAccBox()}},openCatBox:function(){if(-1!=this._playSceneMgr.getEmptyMergeSlot())if(this._ticketBool){var t=a.getCatTicket();if(!(t>0))return this.showAlarm(this._CAT_TICKET_FAIL),void(this._btnLockFlag=!1);a.useCatTicket(),this.ticketCountLabel.string=t-1;var e=this._playSceneMgr.getBoxRewardTicketGrade()}else if(a.getUserRandomBoxCount()>0){e=this._playSceneMgr.getBoxRewardGrade();a.useRandomBoxCount(),this.checkBoxCount()}else{if(!(a.getRandomBoxAdsTime()<=0))return this._retryBool&&this.showAlarm(this._ADS_TIME_FAIL),void(this._btnLockFlag=!1);if(this._retryBool)return this.showAlarm(this._ADS_NEED_FAIL),void(this._btnLockFlag=!1);e=this._playSceneMgr.getBoxRewardGrade();a.useRandomBoxAdsTime(),this.checkBoxCount()}else this.showAlarm(this._SLOT_FAIL),this._btnLockFlag=!1;if(this._playSceneMgr.createCat(e)){this.catSprite.spriteFrame=o.instance.getUnitSpriteForGrade(e),this.catGradeLabel.string=e;var i=o.instance.getUnitDataGrade(e),s=i.getUnitTextKey(),r=i.getExplainTextKey();this.catNameLabel.string=n.getString(s),this.explainCatLabel.string=n.getString(r,"<br/>"," "),this.openCommonAction(),this._playSceneMgr.chkGuide(l.GUIDE_RANDOMBOX_NORMAL_CAT),a.incQuestCount(l.QUEST_RANDOMBOX_NORMAL_CAT,1)}else this.showAlarm(this._SLOT_FAIL),this._btnLockFlag=!1},openAccBox:function(){var t=null;if(this._ticketBool){var e=a.getAccTicket();if(!(e>0))return this.showAlarm(this._ACC_TICKET_FAIL),void(this._btnLockFlag=!1);a.useAccTicket(),this.ticketCountLabel.string=e-1,t=this._playSceneMgr.getBoxRewardTicketAcc()}else if(a.getUserRandomBoxAccCount()>0)t=this._playSceneMgr.getBoxRewardAcc(),a.useRandomBoxAccCount(),this.checkBoxCount();else{if(!(a.getRandomBoxAccAdsTime()<=0))return this._retryBool&&this.showAlarm(this._ADS_TIME_FAIL),void(this._btnLockFlag=!1);if(this._retryBool)return this.showAlarm(this._ADS_NEED_FAIL),void(this._btnLockFlag=!1);t=this._playSceneMgr.getBoxRewardAcc(),a.useRandomBoxAccAdsTime(),this.checkBoxCount()}this.accStatNodeArr.active=!1,this.accBuffNode.active=!1;var i=t.getIdx(),s=t.getNameTextKey(),r=t.getExplainTextKey(),c=t.getAccType(),o=t.getAccGrade();0==a.getAccCollectBool(i)&&this._playSceneMgr.chkGalleryNew(),this.accSprite.spriteFrame=this._accessoryMgr.getAccSprite(c,i),this.accGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(o),this.accNameLabel.string=n.getString(s),this.explainAccLabel.string=n.getString(r);var h,_=this._accessoryMgr.getOptionStat(o),p=this._accessoryMgr.getStatType(),d=parseInt(_.getOpMin()),g=parseInt(_.getOpMax());h=Math.floor(Math.random()*(g-d)+d),this.accStatNodeArr.active=!0,this.spriteStatArr.spriteFrame=this._accessoryMgr.getAccStatSprite(p),this.statLabelArr.string=h;var S="",T=0;if("A"==o||"S"==o){this.accBuffNode.active=!0;var A=this._accessoryMgr.getOptionBuff(o),C=parseFloat(A.getOpMin()),f=parseFloat(A.getOpMax());T=Math.random()*(f-C)+C,"S"==o?(T=parseInt(T),this.buffLabel.string=T,S="Rare"):(this.buffLabel.string=Math.floor(100*T)+"%",S="Coin"),this.spriteBuff.spriteFrame=this._accessoryMgr.getAccBuffSprite(S)}var m=new u,b=a.getUserAccPK();switch(m.initUserAccData(t,b,p,h,S,T),c){case"neck":a.setUserNeckAccData(m);break;case"hat":a.setUserHatAccData(m)}a.addUserAccPK(),a.saveData(),this.openCommonAction(),this._playSceneMgr.chkGuide(l.GUIDE_RAMDOMBOX_ACC_GET),a.incQuestCount(l.QUEST_RANDOMBOX_ACC_GET,1)},tutoAcc:function(){c.playSound(c.audioBtn0);var t=this._accessoryMgr.getAccDic()[1501];this.accStatNodeArr.active=!1,this.accBuffNode.active=!1;var e=t.getIdx(),i=t.getNameTextKey(),s=t.getExplainTextKey(),r=t.getAccType(),o=t.getAccGrade();0==a.getAccCollectBool(e)&&this._playSceneMgr.chkGalleryNew(),this.accSprite.spriteFrame=this._accessoryMgr.getAccSprite(r,e),this.accGradeSprite.spriteFrame=this._accessoryMgr.getAccGradeSprite(o),this.accNameLabel.string=n.getString(i),this.explainAccLabel.string=n.getString(s);var h,l=this._accessoryMgr.getOptionStat(o),_=this._accessoryMgr.getStatType(),p=parseInt(l.getOpMin()),d=parseInt(l.getOpMax());h=Math.floor(Math.random()*(d-p)+p),this.accStatNodeArr.active=!0,this.spriteStatArr.spriteFrame=this._accessoryMgr.getAccStatSprite(_),this.statLabelArr.string=h;var g="",S=0;if("A"==o||"S"==o){this.accBuffNode.active=!0;var T=this._accessoryMgr.getOptionBuff(o),A=parseFloat(T.getOpMin()),C=parseFloat(T.getOpMax());S=Math.random()*(C-A)+A,"S"==o?(S=parseInt(S),this.buffLabel.string=S,g="Rare"):(this.buffLabel.string=Math.floor(100*S)+"%",g="Coin"),this.spriteBuff.spriteFrame=this._accessoryMgr.getAccBuffSprite(g)}var f=new u,m=a.getUserAccPK();switch(f.initUserAccData(t,m,_,h,g,S),r){case"neck":a.setUserNeckAccData(f);break;case"hat":a.setUserHatAccData(f)}a.addUserAccPK(),a.saveData(),this.openCommonAction()},openCommonAction:function(){this.blackBlockNode.opacity=0,this.blackBlockNode.active=!0,this.blackBlockNode.runAction(cc.fadeTo(.3,240)),this.boxSkeleton.setAnimation(0,"randombox_action",!1)},showAlarm:function(t){var e="";switch(t){case this._SLOT_FAIL:e=n.getString(3069);break;case this._CAT_TICKET_FAIL:e=n.getString(3048);break;case this._ACC_TICKET_FAIL:e=n.getString(3049);break;case this._RARE_COIN_FAIL:e=n.getString(3007);break;case this._ADS_NEED_FAIL:e=n.getString(3114);break;case this._ADS_TIME_FAIL:e=n.getString(3119)}c.playSound(c.audioWarning),this._playSceneMgr.showAlarm(e,!1,0,this._playSceneMgr.OVERLAY)},actOpenBox:function(){this.whiteMask.active=!0,this.whiteMask.runAction(cc.sequence(cc.fadeTo(.2,255),cc.delayTime(.1),cc.callFunc(this.actShowItemMul,this),cc.fadeTo(.2,0)))},actShowItemMul:function(){switch(this._randomBoxState){case this._CAT_BOX:this.catResultNode.active=!0;break;case this._ACC_BOX:this.accResultNode.active=!0}this.effectNode.active=!0},transFreeBtn:function(){this._randomBoxState==this._CAT_BOX?this.freeLabel.string=this._freeText+" ("+a.getUserRandomBoxCount()+"/"+l.RANDOM_BOX_MAX_COUNT+")":this.freeLabel.string=this._freeText+" ("+a.getUserRandomBoxAccCount()+"/"+l.RANDOM_BOX_ACC_MAX_COUNT+")",this.freeNode.active=!0,this.adsNode.active=!1},transAdsBtn:function(){var t=0;if((t=this._randomBoxState==this._CAT_BOX?a.getRandomBoxAdsTime():a.getRandomBoxAccAdsTime())>0){var e=Math.floor(t/3600);t-=3600*e,e<10&&(e="0"+e);var i=Math.floor(t/60);t-=60*i,i<10&&(i="0"+i);var s=t;s<10&&(s="0"+s),this.adsLabel.string=e>0?e+":"+i+":"+s:i+" : "+s}else this.adsLabel.string=this._freeText;this.freeNode.active=!1,this.adsNode.active=!0},checkBoxCount:function(){var t=0;this._randomBoxState==this._CAT_BOX?(a.getUserRandomBoxCount()>0?this.transFreeBtn():this.transAdsBtn(),t=a.getRandomBoxTime()):(a.getUserRandomBoxAccCount()>0?this.transFreeBtn():this.transAdsBtn(),t=a.getRandomBoxAccTime());var e=Math.floor(t/3600);e<10&&(e="0"+e),t-=3600*e;var i=Math.floor(t/60);i<10&&(i="0"+i);var s=t-=60*i;s<10&&(s="0"+s),this.randomBoxTimeLabel.string=this._timeLabel+"  "+e+":"+i+":"+s},hidePopup:function(){this.scheduleOnce(this.fadeIn),this.scheduleOnce(this.fadeOut,.5),this.scheduleOnce(this.endHideAni,.5),this.scheduleOnce(this.destroyPopup,.5)},endHideAni:function(){s.instance.nextPopup()},destroyPopup:function(){this.allNode.stopAllActions(),this._playSceneMgr.setGameState(this._playSceneMgr.GAME_STATE_PLAY),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_RANDOM_BOX))}}),cc._RF.pop()},{AccessoryMgr:"AccessoryMgr",AccessoryUserData:"AccessoryUserData",DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],PopupReward:[function(t,e,i){"use strict";cc._RF.push(e,"2865d0q9LBCJ5/bj09WOWUO","PopupReward");var a=t("PopupMgr"),s=t("SoundMgr"),n=(t("Global"),t("DataMgr")),r=t("LocaleMgr"),c=t("PlaySceneMgr"),o=t("TutoMgr");cc.Class({extends:cc.Component,properties:{ribbonAni:sp.Skeleton,allNode:cc.Node,reward1Node:cc.Node,reward2Node:cc.Node,bgNode:cc.Node,xBtnNode:cc.Node,okBtnNode:cc.Node,titleLabel:cc.Label,okLabel:cc.Label,rewardPrefab:cc.Prefab,coinSpriteFrame:cc.SpriteFrame,rareCoinSpriteFrame:cc.SpriteFrame,cashCoinSpriteFrame:cc.SpriteFrame,_rewardCount:0,_rewardObjArr:null,_playSceneMgr:null},start:function(){this.titleLabel.string=r.getString(3062),this.titleLabel.fontSize=r.getRibbonFontSize(),this.okLabel.string=r.getString(1001)},showPopup:function(t,e){this._playSceneMgr=c.instance,this.initData(t),this.allNode.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(this.showAni,this)))},showAni:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.ribbonAni.addAnimation(0,"ribbon",!1),this._btnLockFlag=!0},initData:function(t){this._rewardCount=t.length,this._rewardCount>3?(this.reward2Node.active=!0,this.bgNode.height=600,this.ribbonAni.node.y=285,this.xBtnNode.y=277,this.okBtnNode.y=-220):(this.reward2Node.active=!1,this.bgNode.height=450,this.ribbonAni.node.y=210,this.xBtnNode.y=202,this.okBtnNode.y=-150),null==this._rewardObjArr&&(this._rewardObjArr=[]);for(var e=0;e<this._rewardCount;e++){var i=null;this._rewardObjArr.length-1<e?(i=cc.instantiate(this.rewardPrefab),e<3?this.reward1Node.addChild(i):this.reward2Node.addChild(i),this._rewardObjArr.push(i)):(i=this._rewardObjArr[e],this._rewardObjArr[e].active=!0);var a=n.getPaymentName(t[e].type),s=this._playSceneMgr.getCurrencySprite(t[e].type);i.getComponent("rewardObj").init(a,s,t[e].count)}},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.endHideAni,.3),this.scheduleOnce(this.destroyPopup,.3)},endHideAni:function(){var t=a.instance.nextPopup(),e=this._playSceneMgr.getTutoRareBool();!t&&e&&(o.instance.startTutorial(o.TUTO_TYPE_RARE_CAT_FIRST,n.getTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST)),this._playSceneMgr.setTutoRareBool(!1),this._playSceneMgr.updateTransBtn());var i=this._playSceneMgr.getContentOpenIdx();t||-1==i||a.instance.showPopup(a.POPUP_CONTENT,i,.3)},destroyPopup:function(){this.allNode.stopAllActions();for(var t=0;t<this._rewardObjArr.length;t++)this._rewardObjArr[t].active=!1;this.ribbonAni.clearTrack(0),this.node.active=!1},unsetBtnLock:function(){a.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,a.instance.hidePopup(a.POPUP_REWARD),s.playSound(s.audioCancel))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr"}],PopupSetup:[function(t,e,i){"use strict";cc._RF.push(e,"71855mM1NpNhJOOKAiA29wv","PopupSetup");var a=t("LocaleMgr"),s=t("DataMgr"),n=t("PopupMgr"),r=t("Global"),c=t("SoundMgr");cc.Class({extends:cc.Component,properties:{allNode:cc.Node,titleLabel:cc.Label,soundLabel:cc.Label,languageLabel:cc.Label,soundBtnSprite:cc.Sprite,musicBtnSprite:cc.Sprite,onSprite:cc.SpriteFrame,offSprite:cc.SpriteFrame,couponBalloon:cc.Node,_debugModeCnt:0},start:function(){this.titleLabel.string=a.getString(1067),this.titleLabel.fontSize=a.getTitleFontSize(),this.soundLabel.string=a.getString(1018),this.languageLabel.string=a.getString(1011),1==c.getSoundVol()?this.soundBtnSprite.spriteFrame=this.onSprite:this.soundBtnSprite.spriteFrame=this.offSprite,1==c.getMusicVol()?this.musicBtnSprite.spriteFrame=this.onSprite:this.musicBtnSprite.spriteFrame=this.offSprite},showPopup:function(){this.node.active=!0,this._debugModeCnt=0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},OnAttendBtn:function(){var t=s.chkAttend();n.instance.showPopup(n.POPUP_ATTEND,t)},OnCouponBtn:function(){c.playSound(c.audioBtn0),this.couponBalloon.active=!0},OnForumBtn:function(){c.playSound(c.audioBtn0)},OnLoginBtn:function(){c.playSound(c.audioBtn0)},OnRanking:function(){c.playSound(c.audioBtn0)},OnAchieveBtn:function(){c.playSound(c.audioBtn0)},OnPushBtn:function(){c.playSound(c.audioBtn0)},OnAdviceBtn:function(){var t=s.getPageIndex();n.instance.showPopup(n.POPUP_HELP,t)},OnTermsBtn:function(){c.playSound(c.audioBtn0),r.gotoTerms()},OnSoundBtn:function(){c.playSound(c.audioBtn0),1==c.getSoundVol()?(this.soundBtnSprite.spriteFrame=this.offSprite,c.setSoundVol(0)):(this.soundBtnSprite.spriteFrame=this.onSprite,c.setSoundVol(1)),s.saveOption()},OnMusicBtn:function(){c.playSound(c.audioBtn0),1==c.getMusicVol()?(this.musicBtnSprite.spriteFrame=this.offSprite,c.setMusicVol(0)):(this.musicBtnSprite.spriteFrame=this.onSprite,c.setMusicVol(1)),s.saveOption()},OnDebugBtn:function(){r.ACTIVE_DEBUG_MODE&&(this._debugModeCnt++,this._debugModeCnt>=10&&(c.stopMusic(),cc.director.loadScene("DebugScene")))},hidePopup:function(){this._btnLockFlag=!0,this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){n.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,n.instance.hidePopup(n.POPUP_SETUP))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PopupShop:[function(t,e,i){"use strict";var a;function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"24b5dThWm9B54csVHzsXbMO","PopupShop");var n=t("Global"),r=t("UnitMgr"),c=t("DataMgr"),o=t("PopupMgr"),h=t("SoundMgr"),u=t("LocaleMgr");cc.Class({extends:cc.Component,properties:(a={_playSceneMgr:null,_topUIMgr:null,_BotUIMgr:null,_mergeBoardMgr:null,shopUSlotPrefab:cc.Prefab,shopBuffSlotPrefab:cc.Prefab,shopCSlotPrefab:cc.Prefab,shopEXSlotPrefab:cc.Prefab,allNode:cc.Node,titleLabel:cc.Label,spriteCat:cc.Sprite,spriteNormal:cc.Sprite,spriteCusion:cc.Sprite,spriteTapCat:cc.Sprite,spriteTapNormal:cc.Sprite,spriteTapCusion:cc.Sprite,spriteFrameTap1:cc.SpriteFrame,spriteFrameTap2:cc.SpriteFrame,spriteFrameTapCat1:cc.SpriteFrame,spriteFrameTapCat2:cc.SpriteFrame,spriteFrameTapNormal1:cc.SpriteFrame,spriteFrameTapNormal2:cc.SpriteFrame,spriteFrameTapCusion1:cc.SpriteFrame,spriteFrameTapCusion2:cc.SpriteFrame,cateBtnArr:[cc.Button],cateScrollview:[cc.Node],cateContent:[cc.Node],exEventMark:cc.Node},s(a,"titleLabel",cc.Label),s(a,"_nowCate",0),s(a,"_uSlotObjArr",null),s(a,"_buffSlotObjArr",null),s(a,"_homeSlotObjArr",null),s(a,"_exSlotObjArr",null),s(a,"_tempShopData",null),s(a,"_tempAdsUnitGrade",-1),s(a,"_btnLockFlag",!1),s(a,"_USLOT_H",200),s(a,"_SSLOT_H",160),s(a,"_nowUnitSlotIdx",0),s(a,"_MAX_UNIT_SLOT_NUM",0),s(a,"_NOW_UNIT_SLOT_NUM",0),s(a,"_MIN_UNIT_SLOT_IDX",0),s(a,"_MAX_UNIT_SLOT_IDX",0),s(a,"_TAP_CAT",0),s(a,"_TAP_NORMAL",1),s(a,"_TAP_CUSION",2),s(a,"_SUCCESS",0),s(a,"_COIN_FAIL",1),s(a,"_CASH_COIN_FAIL",2),s(a,"_ALL_BUY_FAIL",3),s(a,"_FULL_SLOT_FAIL",4),s(a,"_CAT_MAKE_MAX_INC",2101),s(a,"_CAT_MAKE_TIME_INC",2102),s(a,"_CAT_COIN_INC",2103),s(a,"_CAT_BUFF_TIME_INC",2104),s(a,"_CAT_LV_TWO_CHANCE",2105),s(a,"_MERGE_LV_TWO_CHANCE",2106),s(a,"_OFFLINE_REWARD",2107),s(a,"_MOUSE_LV_UP",2108),a),statics:{},start:function(){this.titleLabel.string=u.getString(3056),this.titleLabel.fontSize=u.getTitleFontSize()},init:function(t,e,i,a){this._playSceneMgr=t,this._topUIMgr=e,this._BotUIMgr=i,this._mergeBoardMgr=a,this._MAX_UNIT_SLOT_NUM=n.MAX_UNIT_GRADE,this._NOW_UNIT_SLOT_NUM=8,this._MIN_UNIT_SLOT_IDX=0,this._MAX_UNIT_SLOT_IDX=this._MAX_UNIT_SLOT_NUM-this._NOW_UNIT_SLOT_NUM,this._uSlotObjArr=new Array;for(var s=0;s<this._NOW_UNIT_SLOT_NUM;++s){var o=cc.instantiate(this.shopUSlotPrefab);this.cateContent[n.CATE_UNIT].addChild(o),o.getComponent("ShopUSlotObj").init(s+1,r.instance.getUnitDataGrade(s+1),this),this._uSlotObjArr[s]=o}this._buffSlotObjArr=new Array;for(s=0;s<n.SHOP_BUFF_MAX;++s){var h=cc.instantiate(this.shopBuffSlotPrefab);this.cateContent[1].addChild(h),h.getComponent("ShopBuffSlotObj").init(s,c.getShopPassiveInfoTable(s+1),this),this._buffSlotObjArr[s]=h}this._btnLockFlag=!0},updateUnit:function(){var t=c.getNowMaxUnitGrade();t>=11&&(t=11);for(var e=0;e<this._NOW_UNIT_SLOT_NUM;++e)e<t-3?this._uSlotObjArr[e].getComponent("ShopUSlotObj").blindOnOff(!1):this._uSlotObjArr[e].getComponent("ShopUSlotObj").blindOnOff(!0),7==e&&c.getRareCatCount()>0&&this._uSlotObjArr[e].getComponent("ShopUSlotObj").blindOnOff(!1)},tutoTap:function(){for(var t,e=this._TAP_NORMAL,i=0;t=this.cateContent[i];i++)e==i?(t.active=!0,this.cateScrollview[i].active=!0):(t.active=!1,this.cateScrollview[i].active=!1);this.spriteCat.spriteFrame=this.spriteFrameTapCat2,this.spriteTapCat.spriteFrame=this.spriteFrameTap2,this.spriteNormal.spriteFrame=this.spriteFrameTapNormal1,this.spriteTapNormal.spriteFrame=this.spriteFrameTap1,this.spriteCusion.spriteFrame=this.spriteFrameTapCusion2,this.spriteTapCusion.spriteFrame=this.spriteFrameTap2,h.playSound(h.audioBtn0)},OnTransTap:function(t,e){cc.log(e);for(var i,a=parseInt(e),s=0;i=this.cateContent[s];s++)a==s?(i.active=!0,this.cateScrollview[s].active=!0):(i.active=!1,this.cateScrollview[s].active=!1);switch(a){case this._TAP_CAT:cc.log("\uace0\uc591\uc774"),this.spriteCat.spriteFrame=this.spriteFrameTapCat1,this.spriteTapCat.spriteFrame=this.spriteFrameTap1,this.spriteNormal.spriteFrame=this.spriteFrameTapNormal2,this.spriteTapNormal.spriteFrame=this.spriteFrameTap2,this.spriteCusion.spriteFrame=this.spriteFrameTapCusion2,this.spriteTapCusion.spriteFrame=this.spriteFrameTap2;break;case this._TAP_NORMAL:cc.log("\ub178\ub9d0"),this.spriteCat.spriteFrame=this.spriteFrameTapCat2,this.spriteTapCat.spriteFrame=this.spriteFrameTap2,this.spriteNormal.spriteFrame=this.spriteFrameTapNormal1,this.spriteTapNormal.spriteFrame=this.spriteFrameTap1,this.spriteCusion.spriteFrame=this.spriteFrameTapCusion2,this.spriteTapCusion.spriteFrame=this.spriteFrameTap2;break;case this._TAP_CUSION:cc.log("\ucfe0\uc158"),this.spriteCat.spriteFrame=this.spriteFrameTapCat2,this.spriteTapCat.spriteFrame=this.spriteFrameTap2,this.spriteNormal.spriteFrame=this.spriteFrameTapNormal2,this.spriteTapNormal.spriteFrame=this.spriteFrameTap2,this.spriteCusion.spriteFrame=this.spriteFrameTapCusion1,this.spriteTapCusion.spriteFrame=this.spriteFrameTap1}h.playSound(h.audioBtn0)},showPopup:function(t){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0,this.updateUnit()},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,o.instance.hidePopup(o.POPUP_SHOP))},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){o.instance.hideLoading(),this._btnLockFlag=!1},setCate:function(t){this._nowCate=t;for(var e=0;e<this.cateScrollview.length;++e)e==this._nowCate?(this.cateScrollview[e].active=!0,this.cateBtnArr[e].interactable=!1):(this.cateScrollview[e].active=!1,this.cateBtnArr[e].interactable=!0);this.updateCateAll(this._nowCate)},updateCateAll:function(t){switch(c.isExchangeEvt()?this.exEventMark.active=!0:this.exEventMark.active=!1,t){case n.CATE_UNIT:this.shopCashLabelNode.active=!0,this.exchangeLabelNode.active=!1,this.bpNode.active=!0,this.bpLabel.node.active=!0,this.goldNode.active=!0,this.goldLabel.node.active=!0,this.cashNode.active=!0,this.cashLabel.node.active=!0,this.runeNode.active=!1,this.runeLabel.node.active=!1,this.updateContentUnitSlot(null,!0),this.updateShopBuyBtnActive();break;case n.CATE_SKILL_RUNE:this.shopCashLabelNode.active=!0,this.exchangeLabelNode.active=!1,this.updateShopBuyBtnActive(),this.bpNode.active=!0,this.bpLabel.node.active=!0,this.goldNode.active=!1,this.goldLabel.node.active=!1,this.cashNode.active=!0,this.cashLabel.node.active=!0,this.runeNode.active=!0,this.runeLabel.node.active=!0;break;case n.CATE_SKILL_GEM:this.shopCashLabelNode.active=!0,this.exchangeLabelNode.active=!1,this.updateShopBuyBtnActive(),this.bpNode.active=!0,this.bpLabel.node.active=!0,this.goldNode.active=!1,this.goldLabel.node.active=!1,this.cashNode.active=!0,this.cashLabel.node.active=!0,this.runeNode.active=!0,this.runeLabel.node.active=!0,cc.log("\ubcf4\uc11d\uc2a4\ud0ac. Global.SKILL_CASH_HERO_SLOT="+n.SKILL_CASH_HERO_SLOT+" obj="+this._scSlotObjArr[n.SKILL_CASH_HERO_SLOT]),this._scSlotObjArr[n.SKILL_CASH_HERO_SLOT].getComponent("ShopSSlotObj").updateSlotObj();break;case n.CATE_EXCHANGE:this.shopCashLabelNode.active=!1,this.exchangeLabelNode.active=!0,this.updateExchangeContent()}},tutoBuyBuff:function(){c.addUserBuySlot(),this._BotUIMgr.setCatCreateBool(!0),c.getPageIndex()==c.CAT_MODE_NORMAL&&this._BotUIMgr.refreshGenerableLabel();var t=c.getNormalCatUpgradeTable(0).buyCountCat;c.minusCoin(t),this._buffSlotObjArr[0].getComponent("ShopBuffSlotObj").updateItemExplain(),this._buffSlotObjArr[0].getComponent("ShopBuffSlotObj").updateItemLv(),this._buffSlotObjArr[0].getComponent("ShopBuffSlotObj").updateCoinNum(),this.showAlarm(this._SUCCESS)},buyBuff:function(t,e,i){switch(e.getIdx()){case this._CAT_MAKE_MAX_INC:if(!(i<=c.getCoin()))return void this.showAlarm(this._COIN_FAIL);if(!(n.ADD_CAT_COUNT_MAX_TIME>c.getUserBuySlot()))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuySlot(),this._BotUIMgr.setCatCreateBool(!0),c.getPageIndex()==c.CAT_MODE_NORMAL&&this._BotUIMgr.refreshGenerableLabel(),this._playSceneMgr.chkGuide(n.GUIDE_PETSHOP_CAT_PRODUCTION_UP),c.minusCoin(i);break;case this._CAT_MAKE_TIME_INC:if(!(i<=c.getCoin()))return void this.showAlarm(this._COIN_FAIL);if(!(n.ADD_CAT_COUNT_MAX_NUM>c.getUserBuyTime()+n.ADD_CAT_COUNT_DEFAULT_NUM))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuyTime(),this._BotUIMgr.updateCatTime(),this._playSceneMgr.chkGuide(n.GUIDE_PETSHOP_CAT_PRODUCTION_TIME),c.minusCoin(i);break;case this._CAT_COIN_INC:if(!(i<=c.getCashCoin()))return void this.showAlarm(this._CASH_COIN_FAIL);if(!(50>c.getUserBuyCoinInc()))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuyCoinInc(),this._playSceneMgr.transCoinPerSecond(),c.minusCashCoin(i);break;case this._CAT_BUFF_TIME_INC:if(!(i<=c.getCashCoin()))return void this.showAlarm(this._CASH_COIN_FAIL);if(!(50>c.getUserBuyBuffInc()))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuyBuffInc(),this._topUIMgr.upgradeBuffTime(),c.minusCashCoin(i);break;case this._CAT_LV_TWO_CHANCE:if(!(i<=c.getCashCoin()))return void this.showAlarm(this._CASH_COIN_FAIL);if(!(50>c.getUserBuyCatLv2()))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuyCatLv2(),c.minusCashCoin(i);break;case this._MERGE_LV_TWO_CHANCE:if(!(i<=c.getCashCoin()))return void this.showAlarm(this._CASH_COIN_FAIL);if(!(50>c.getUserBuyMergeLv2()))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuyMergeLv2(),c.minusCashCoin(i);break;case this._OFFLINE_REWARD:if(!(i<=c.getCashCoin()))return void this.showAlarm(this._CASH_COIN_FAIL);if(!(50>c.getUserBuyOffline()))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuyOffline(),c.minusCashCoin(i);break;case this._MOUSE_LV_UP:if(!(i<=c.getCashCoin()))return void this.showAlarm(this._CASH_COIN_FAIL);if(!(50>c.getUserBuyMouseLvUp()))return void this.showAlarm(this._ALL_BUY_FAIL);c.addUserBuyMouseLvUp(),c.minusCashCoin(i)}this._topUIMgr.viewAllCoin(),t.updateItemExplain(),t.updateItemLv(),t.updateCoinNum(),this.showAlarm(this._SUCCESS)},showAlarm:function(t){var e="",i=!1;switch(t){case this._SUCCESS:e=u.getString(3005),i=!0,h.playSound(h.audioShopBuyItem);break;case this._COIN_FAIL:e=u.getString(3006),h.playSound(h.audioWarning);break;case this._CASH_COIN_FAIL:e=u.getString(3008),h.playSound(h.audioWarning);break;case this._ALL_BUY_FAIL:e=u.getString(3009),h.playSound(h.audioWarning);break;case this._FULL_SLOT_FAIL:e=u.getString(3010),h.playSound(h.audioWarning)}this._playSceneMgr.showAlarm(e,i,0,this._playSceneMgr.OVERLAY)},tutoBuyUnit:function(){var t=r.instance.getUnitDataGrade(1).getUnitPrice(c.getUnitLv(1));c.getEmptyMergeSlot()>-1?(this._mergeBoardMgr.makeUnit(1),c.minusCoin(t),this._topUIMgr.viewCoin(),c.incUnitLv(1),this._uSlotObjArr[0].getComponent("ShopUSlotObj").updateCoinNum(),this.showAlarm(this._SUCCESS)):(this.showAlarm(this._FULL_SLOT_FAIL),h.playSound(h.audioWarning))},buyUnit:function(t,e,i){var a=e.getUnitGrade(),s=e.getUnitPrice(c.getUnitLv(a));c.getEmptyMergeSlot()>-1?s<=c.getUserCoin()?(this._mergeBoardMgr.makeUnit(a),c.minusCoin(s),this._topUIMgr.viewCoin(),c.incUnitLv(a),t.updateCoinNum(),this.showAlarm(this._SUCCESS),this._playSceneMgr.chkGuide(n.GUIDE_PETSHOP_NORMAL_CAT_BUY)):(this.showAlarm(this._COIN_FAIL),h.playSound(h.audioWarning)):(this.showAlarm(this._FULL_SLOT_FAIL),h.playSound(h.audioWarning))},showAdsHanderForBuyHero:function(){AdMgr.isPreloadRewardVideo()?(this._btnLockFlag=!0,AdMgr.showRewardVideo(this.buyAdsHero.bind(this),this.failAdHandler.bind(this)),c.getAdsPassFlag()||c.getAdsPassTimeFlag()?c.getPlaySceneMgr().FBlogEvent(n.LOG_AD_PASS_BUYUNIT):c.getPlaySceneMgr().FBlogEvent(n.LOG_AD_VIEW_BUYUNIT)):this.failAdHandler()},updateShopBuyBtnActive:function(){if(1==this.node.active)switch(this._nowCate){case n.CATE_UNIT:for(var t=0;t<this._NOW_UNIT_SLOT_NUM;++t)this._uSlotObjArr[t].getComponent("ShopUSlotObj").updateBuyBtnActive();break;case n.CATE_SKILL_RUNE:for(t=0;t<this._srSlotObjArr.length;++t)this._srSlotObjArr[t].getComponent("ShopSSlotObj").updateBuyBtnActive();break;case n.CATE_SKILL_GEM:for(t=0;t<this._scSlotObjArr.length;++t)this._scSlotObjArr[t].getComponent("ShopSSlotObj").updateBuyBtnActive()}},showAdsHander:function(){AdMgr.isPreloadRewardVideo()?(this._btnLockFlag=!0,AdMgr.showRewardVideo(this.succAdHandler.bind(this),this.failAdHandler.bind(this)),c.getAdsPassFlag()||c.getAdsPassTimeFlag()?c.getPlaySceneMgr().FBlogEvent(n.LOG_AD_PASS_EXCHANGE_RESET):c.getPlaySceneMgr().FBlogEvent(n.LOG_AD_VIEW_EXCHANGE_RESET)):this.failAdHandler()},succAdHandler:function(){c.incQuestCount(n.QUEST_ADS_COUNT,1);for(var t=0;t<this._exSlotObjArr.length;++t){var e=this._exSlotObjArr[t].getComponent("ShopEXSlotObj").getExchangeData(),i=e.getItemCode();e.getResetFlag()&&c.setExchangeCount(i,0)}this.updateExchangeContent(),c.saveData(),this._btnLockFlag=!1;var a=u.getString(919);h.playSound(h.audioBtn0),o.instance.showPopup(o.POPUP_MSG,[o.MSG_EXCHANGE_RESET_SUCC,a]),c.getPlaySceneMgr().FBlogEvent(n.LOG_AD_EXCHANGE_RESET,["adspass",c.getAdsPassFlag()?1:0])},failAdHandler:function(){this._btnLockFlag=!1;var t=u.getString(900);o.instance.showPopup(o.POPUP_MSG,[o.MSG_NOT_ADS,t]),h.playSound(h.audioCancel)},debugNeedItem:function(){c.incMonDropItemNum(0,100),c.incMonDropItemNum(1,100),c.incMonDropItemNum(2,100),this.updateExchangeContent(),c.saveData()},actBackKey:function(){return!!this.node.active&&(this._btnLockFlag||this.hidePopupHandler(),!0)},finishTest:function(){SdkboxMgr.testFinishTransaction()},finishTest2:function(){SdkboxMgr.testFinishTransaction2()},finishTest3:function(){SdkboxMgr.testFinishTransaction3()}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],PopupSlotPlus:[function(t,e,i){"use strict";cc._RF.push(e,"9306fR+CcBOfqlCv4fMnfLp","PopupSlotPlus");var a=t("DataMgr"),s=t("PopupMgr"),n=t("PlaySceneMgr"),r=t("Global");cc.Class({extends:cc.Component,properties:{allNode:cc.Node,titleLabel:cc.Label,priceLabel:cc.Label,costTypeSprite:cc.Sprite,coinSprite:cc.SpriteFrame,rareCoinSprite:cc.SpriteFrame,cashCoinSprite:cc.SpriteFrame,_type:"",_price:0,_increase:0,_finalPrice:100,_title:"",_plusIdx:0,_SLOT_PLUS:0,_HOTEL_PLUS:1,_HOUSE_PLUS:2},showPopup:function(t){this.initData(t),this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this.node.active=!0,this.allNode.scale=.5,this._btnLockFlag=!0},initData:function(t){this._plusIdx=t;var e={},i=0;switch(t){case this._SLOT_PLUS:this.costTypeSprite.spriteFrame=this.coinSprite,e=a.getCatSlotInfo(),i=a.getUserCatSlotNum();break;case this._HOTEL_PLUS:this.costTypeSprite.spriteFrame=this.cashCoinSprite,e=a.getHotelSlotInfo(),i=a.getUserHotelSlotNum();break;case this._HOUSE_PLUS:this.costTypeSprite.spriteFrame=this.cashCoinSprite,e=a.getHouseSlotInfo(),i=a.getUserHouseSlotNum()}this._type=e.slotType,this._price=e.slotPrice,this._increase=e.slotIncrease,this._finalPrice=this._price+this._increase*i,this.titleLabel.string=this._type,this.priceLabel.string=this._finalPrice},OnBuyBtn:function(){var t=0,e=0;switch(this._plusIdx){case this._SLOT_PLUS:if(t=a.getCoin(),e=a.getUserCatSlotNum(),!this.chkCoin(t))return;a.minusCoin(this._finalPrice),e++,a.setUserCatSlotNum(e);var i=e+r.DEFAULT_RARE_SLOT;a.setRareSlotNum(i-1,2,0),n.instance.updateRareBoard(i-1),n.instance.updateCountLabel(),e<5&&n.instance.setPlusSlot();break;case this._HOTEL_PLUS:if(t=a.getCashCoin(),e=a.getUserHotelSlotNum(),!this.chkCoin(t))return;a.minusCashCoin(this._finalPrice),e++,a.setUserHotelSlotNum(e),(c=s.instance.getPopupHotel()).slotInit(),c.setCatSetBool(!0);break;case this._HOUSE_PLUS:if(t=a.getCashCoin(),e=a.getUserHouseSlotNum(),!this.chkCoin(t))return;var c;a.minusCashCoin(this._finalPrice),e++,a.setUserHouseSlotNum(e),(c=s.instance.getPopupHotel()).houseSlotInit(),c.createHousePlusSlot(),c.setHouseSetBool(!0)}n.instance.viewCoin(),this.hidePopup()},chkCoin:function(t){if(t>this._finalPrice)return cc.log("\uc2ac\ub86f \uad6c\ub9e4 \uac00\ub2a5!!!"),!0;cc.log("\ub3c8\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4");var e=n.instance;switch(this._plusIdx){case this._SLOT_PLUS:e.showAlarm("\ub0e5 \ucf54\uc778\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4",!1,0,e.OVERLAY);break;case this._HOTEL_PLUS:case this._HOUSE_PLUS:e.showAlarm("\uc2a4\ud2f1\uac04\uc2dd\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4",!1,0,e.OVERLAY)}return!1},OnCancle:function(){this.hidePopup()},hidePopup:function(){this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3)},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){s.instance.hideLoading(),this._btnLockFlag=!1},hidePopupHandler:function(){this._btnLockFlag||(this._btnLockFlag=!0,s.instance.hidePopup(s.POPUP_SHOP),SoundMgr.playSound(SoundMgr.audioCancel))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],PopupUseCareItem:[function(t,e,i){"use strict";cc._RF.push(e,"d7484P10H9PJ5/UN60tEmJ9","PopupUseCareItem");t("PopupMgr");var a=t("SoundMgr"),s=t("Global"),n=t("DataMgr"),r=t("LocaleMgr"),c=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{allNode:cc.Node,explainLabel:cc.RichText,itemNameLabel:cc.Label,yesLabel:cc.Label,expCount:cc.Label,careItemSprite:cc.Sprite,_rareCatUserData:null,_playSceneMgr:null,_popupCare:null,_itemIdx:0,_sumStat:0,_expPlusCount:0,_catWant:-1},start:function(){this.yesLabel.string=r.getString(1087)},showPopup:function(t,e,i,a){this._playSceneMgr=c.instance,this._popupCare=t,this._itemIdx=e,this._rareCatUserData=i,this._sumStat=a,this.initData(e),this.showAni()},showAni:function(){this.node.active=!0,this.allNode.scale=.5,this.allNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this.unsetBtnLock,this))),this._btnLockFlag=!0},initData:function(t){var e=n.getCareItemDataToIdx(t),i=e.getNameTextKey();this.itemNameLabel.string=r.getString(i),this.careItemSprite.spriteFrame=this._playSceneMgr.getCareItem(t);var a=this._rareCatUserData.getCatState(),c="";switch(a){case s.CARE_HUNGRY:c=r.getString(3090);break;case s.CARE_DIRTY:c=r.getString(3091);break;case s.CARE_SICK:c=r.getString(3092);break;case s.CARE_BORED:c=r.getString(3093)}a==s.CARE_NORMAL?(this._expPlusCount=e.getExpNormal(),this._catWant=s.CARE_CALM,this.explainLabel.string=r.getString(3094)):(this.explainLabel.string=r.getString(3098)+" [<color=#DB2525>"+c+"</c>]<br/>"+r.getString(3094),a==e.getCareType()?(this._catWant=s.CARE_HAPPY,this._expPlusCount=e.getExpRight(),this._expPlusCount+=this._sumStat):(this._expPlusCount=e.getExpDifferent(),this._catWant=s.CARE_ANGRY)),this.expCount.string=this._expPlusCount},OnOkBtn:function(){a.playSound(a.audioBtn0),this._popupCare.expUp(this._itemIdx,this._expPlusCount,this._catWant),this.hidePopup()},hidePopup:function(){this._btnLockFlag||(this._btnLockFlag=!0,this.allNode.runAction(cc.scaleTo(.3,.1).easing(cc.easeBackIn())),this.scheduleOnce(this.destroyPopup,.3),this._popupCare.setImoticonTransBool(!0),a.playSound(a.audioPopupOpen))},destroyPopup:function(){this.allNode.stopAllActions(),this.node.active=!1},unsetBtnLock:function(){this._btnLockFlag=!1}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],PostData:[function(t,e,i){"use strict";cc._RF.push(e,"810867AKWlJ7ZkcQeLi0QBn","PostData");var a=t("Global");cc.Class({properties:{_postIdx:0,_titleKey:0,_type1:0,_value1:0,_type2:0,_value2:0,_type3:0,_value3:0,_type4:0,_value4:0,_type5:0,_value5:0,_type6:0,_value6:0,_sdate:0,_edate:0,_eventType:"",_eventValue:0},initData:function(t,e,i,a,s,n,r,c,o,h,u,l,_,p,d,g,S,T){if(this._postIdx=t,this._titleKey=e,this._type1=i,this._value1=a,this._type2=s,this._value2=n,this._type3=r,this._value3=c,this._type4=o,this._value4=h,this._type5=u,this._value5=l,this._type6=_,this._value6=p,""!=d){var A=new Date(parseInt(d.substring(0,4)),parseInt(d.substring(4,6))-1,parseInt(d.substring(6,8)));this._sdate=Math.floor(A.getTime()/1e3)}""!=g&&(A=new Date(parseInt(g.substring(0,4)),parseInt(g.substring(4,6))-1,parseInt(g.substring(6,8))+1),this._edate=Math.floor(A.getTime()/1e3)),""!=S&&(this._eventType=S,this._eventValue=T)},getPostIdx:function(){return this._postIdx},getTitleKey:function(){return this._titleKey},getRewardType:function(t){switch(t){case 0:return this._type1;case 1:return this._type2;case 2:return this._type3;case 3:return this._type4;case 4:return this._type5;case 5:return this._type6;default:return a.PAYMENT_NONE}},getRewardValue:function(t){switch(t){case 0:return this._value1;case 1:return this._value2;case 2:return this._value3;case 3:return this._value4;case 4:return this._value5;case 5:return this._value6;default:return 0}},getEventType:function(){return this._eventType},getEventValue:function(){return this._eventValue},isValidDate:function(t){return t>=this._sdate&&t<=this._edate}}),cc._RF.pop()},{Global:"Global"}],PostRewardObj:[function(t,e,i){"use strict";cc._RF.push(e,"bb488AdsQ1HVLqMh81t2L7t","PostRewardObj");var a=t("LocaleMgr"),s=t("DataMgr"),n=t("PopupMgr"),r=t("Global"),c=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{_popupPost:null,titleLabel:cc.Label,getLabel:cc.Label,itemNodeArr:[cc.Node],btn:cc.Button,_postData:null,_playSceneMgr:null},start:function(){this.getLabel.string=a.getString(1002)},init:function(t,e){this._playSceneMgr=c.instance,this._popupPost=t,this._postData=e,this.titleLabel.string=a.getString(this._postData.getTitleKey());for(var i=0,s=0;s<6;++s)this._postData.getRewardType(s)>=0&&(this.itemNodeArr[i].active=!0,this.itemNodeArr[i].getChildByName("rewardSprite").getComponent(cc.Sprite).spriteFrame=this._playSceneMgr.getCurrencySprite(this._postData.getRewardType(s)),this.itemNodeArr[i].getChildByName("rewardLabel").getComponent(cc.Label).string=r.formatNumber(this._postData.getRewardValue(s)),++i);for(;i<6;++i)this.itemNodeArr[i].active=!1;this.btn.interactable=!0},OnGetReward:function(){this.btn.interactable=!1;for(var t=[],e=0;e<6;++e)if(this._postData.getRewardType(e)>=0){var i=s.setRewardData(this._postData.getRewardType(e),this._postData.getRewardValue(e));t.push(i)}n.instance.showPopup(n.POPUP_REWARD,t),s.saveGetPostData(this._postData.getPostIdx()),this._popupPost.chkPostObj()}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],QuestData:[function(t,e,i){"use strict";cc._RF.push(e,"9c4d7yVT0FFk5Rx9r8kDjrg","QuestData"),cc.Class({extends:cc.Component,properties:{_questKey:0,_questCode:0,_nameTextKey:0,_explainTextKey:0,_questCount:0,_rewardType:0,_rewardValue:0,_questOpenProbability:0,_questPoint:0},initData:function(t,e,i,a,s,n,r,c,o){this._questKey=t,this._questCode=e,this._nameTextKey=i,this._explainTextKey=a,this._questCount=s,this._rewardType=n,this._rewardValue=r,this._questOpenProbability=c,this._questPoint=o},getQuestKey:function(){return this._questKey},getQuestType:function(){return this._questCode},getNameTextKey:function(){return this._nameTextKey},getExplainTextKey:function(){return this._explainTextKey},getQuestCount:function(){return this._questCount},getRewardType:function(){return this._rewardType},getRewardCount:function(){return this._rewardValue},getQuestOpenProbability:function(){return this._questOpenProbability},getQuestPoint:function(){return this._questPoint}}),cc._RF.pop()},{}],QuestObj:[function(t,e,i){"use strict";cc._RF.push(e,"afa262GlldD8aPREuSg3Ycg","QuestObj");var a=t("LocaleMgr"),s=t("DataMgr"),n=t("PopupMgr"),r=t("Global"),c=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{_popupQuest:null,titleLabel:cc.Label,descLabel:cc.Label,rewardNumLabel:cc.Label,rewardIcon:cc.Sprite,btn:cc.Button,questNumLabel:cc.Label,questProgress:cc.ProgressBar,compStamp:cc.Node,_slotIdx:0,_playSceneMgr:null},init:function(t,e){this._slotIdx=t,this._popupQuest=e,this._playSceneMgr=c.instance,this._blueBtn=this._playSceneMgr.getSpriteToUI("btn1"),this._grayBtn=this._playSceneMgr.getSpriteToUI("btn2")},updateInfo:function(){var t=s.getDailyQuestData(this._slotIdx),e=s.getQuestData(t[0]),i=s.getQuestLv(t[0])+1;t[5]&&i--,this.titleLabel.string=a.getString(e.getNameTextKey())+" Lv."+i,this.descLabel.string=a.getString(e.getExplainTextKey(),"@value1@",r.getNumToType(t[2])),this.rewardIcon.spriteFrame=c.instance.getCurrencySprite(t[3]),this.rewardNumLabel.string=r.getNumToType(t[4])},updateAchivement:function(){var t=s.getDailyQuestData(this._slotIdx);this.questNumLabel.string=r.getNumToType(t[1])+"/"+r.getNumToType(t[2]),this.questProgress.progress=t[1]/t[2],t[5]?(this.btn.interactable=!1,this.btn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtn,this.compStamp.active=!0):(this.compStamp.active=!1,t[1]<t[2]||s.getDailyQuestRewardNum()>=r.MAX_QUEST_REWARD?(this.btn.interactable=!1,this.btn.node.getComponent("cc.Sprite").spriteFrame=this._grayBtn):(this.btn.interactable=!0,this.btn.node.getComponent("cc.Sprite").spriteFrame=this._blueBtn))},clickGetReward:function(){var t=s.getDailyQuestData(this._slotIdx),e=s.getQuestData(t[0]);t[5]=!0;var i=[],a=s.setRewardData(t[3],t[4]);i.push(a),n.instance.showPopup(n.POPUP_REWARD,i),s.incDailyQuestRewardNum(e.getQuestType()),s.incQuestPoint(e.getQuestPoint()),s.getTopUIMgr().updateQuestNewMark(),s.saveData(),this._popupQuest.updateQuestSlot()}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],QuestUserData:[function(t,e,i){"use strict";cc._RF.push(e,"93f7bIGinNId4R67s91K7Zl","QuestUserData"),cc.Class({extends:cc.Component,properties:{}}),cc._RF.pop()},{}],RareBoardMgr:[function(t,e,i){"use strict";cc._RF.push(e,"40c95ErD2tM9YEfR8n3znsu","RareBoardMgr");var a=t("Global"),s=t("DataMgr"),n=t("PopupMgr"),r=t("PlaySceneMgr"),c=t("SoundMgr");cc.Class({extends:cc.Component,properties:{equipEffSkeleton:sp.Skeleton,Blind:cc.Node,rareCatBtnNode:cc.Node,selectedCatNode:cc.Node,atlasItem:cc.SpriteAtlas,atlasUI:cc.SpriteAtlas,slotObjPrefab:cc.Prefab,slotObjArr:[cc.Node],catObjArr:[cc.Node],_slotPosArr:null,_catPosArr:null,_slotObjArr:null,_slotIdx:-1,_Blind:null,_rareCatBtnNode:null,_selectedCat:null},start:function(){this._Blind=this.Blind.getComponent("Blind"),this._rareCatBtnNode=this.rareCatBtnNode.getComponent("rareCatBtn"),this._selectedCat=this.selectedCatNode.getComponent("SelectedCat")},init:function(){this._slotObjArr={},this._slotPosArr={},this._catPosArr={};for(var t=0;t<a.PAGE_ONE_RARE_SLOT;t++)this._slotObjArr[t]=this.slotObjArr[t].getComponent("RareObj"),this._slotPosArr[t]=this.slotObjArr[t].position,this._catPosArr[t]=this.catObjArr[t].position;this.initSlot()},initSlot:function(){for(var t=0;t<a.PAGE_ONE_RARE_SLOT;t++){var e=s.getRareSlotNum(t);this._slotObjArr[t].initData(e,t)}this.setRarePageCoin()},setSlot:function(t){var e=s.getRareSlotNum(t);this._slotObjArr[t].initData(e,t),this._slotObjArr[t].houseAni()},setPlusSlot:function(){var t=s.getUserCatSlotNum()+a.DEFAULT_RARE_SLOT,e={houseIndex:1,catGrade:0};this._slotObjArr[t].initData(e)},settingCat:function(t){var e=s.getRareSlotNum(t);this._slotObjArr[t].initData(e),this.setRarePageCoin()},refreshState:function(t){this._slotObjArr[t].refreshState()},tutoDressRoomBtn:function(){this._rareCatBtnNode.OnAccBtn()},OnRareCatBtn:function(t){switch((a=r.instance).getDeployState()){case a.DEPLOY_STATE_PLAY:var e=s.getRareSlotNum(t).catGrade;if(this._slotIdx=t,a.setSelectedSlot(this._slotIdx),e>10){var i=cc.v2(this._slotPosArr[this._slotIdx].x+this._catPosArr[this._slotIdx].x,this._slotPosArr[this._slotIdx].y+this._catPosArr[this._slotIdx].y);c.playSound(c.audioRareCatMenu),this._rareCatBtnNode.init(this.slotObjArr[this._slotIdx],e,i,this.node)}else n.instance.showPopup(n.POPUP_HOTEL),this._selectedCat.moveUp(this.slotObjArr[t],this.node);break;case a.DEPLOY_STATE_CAT:var a=r.instance;(e=s.getRareSlotNum(t).catGrade)>10&&s.setRareCat(e,-1);var o=a.getSelectedCat();s.setRareSlotCat(t,o),this.initSlot(),a.updateCountLabel(),a.setSelectedCat(-1),a.setDeployState(a.DEPLOY_STATE_PLAY),this._slotIdx=-1,a.setSelectedSlot(this._slotIdx),this._selectedCat.endBlind(),c.playSound(c.audioBtn2);break;case a.DEPLOY_STATE_HOTEL:a=r.instance;(e=s.getRareSlotNum(t).catGrade)>10&&s.setRareCat(e,-1),s.setRareSlotCat(t,0),this.initSlot(),a.updateCatHotel(),a.updateCountLabel(),c.playSound(c.audioBtn2)}},setRareCatDirect:function(){var t=r.instance,e=s.getRareSlotNum(this._slotIdx).catGrade;e>10&&s.setRareCat(e,-1);var i=t.getSelectedCat();s.setRareSlotCat(this._slotIdx,i),this.initSlot(),t.updateCountLabel(),t.setSelectedCat(-1),t.setDeployState(t.DEPLOY_STATE_PLAY),this._slotIdx=-1,t.setSelectedSlot(this._slotIdx)},setCatHouseDirect:function(){var t=r.instance,e=s.getRareSlotNum(this._slotIdx).houseIndex;e>2&&s.setUserCatHouseData(e,-1),s.setRareSlotHouse(this._slotIdx,t.getSelectedHouse()),this.initSlot(),t.updateCatHouse(),t.setDeployState(t.DEPLOY_STATE_PLAY),t.setSelectedHouse(-1),this._slotIdx=-1,t.setSelectedSlot(this._slotIdx)},selectUsedSlot:function(){for(var t=Object.keys(this._slotObjArr).length,e=0;e<t;e++)this._slotObjArr[e].getUsedBool()&&this._selectedCat.startBlind(this.slotObjArr[e],this.node)},getHouseSprite:function(t){return this.atlasItem.getSpriteFrame("house_1_"+t)},getIconSprite:function(){return this.atlasUI.getSpriteFrame("icon_add_slot")},calSecondAddCoin:function(){for(var t={coin:0,rareCoin:0},e=0;e<a.PAGE_ONE_RARE_SLOT;e++)0!=this._slotObjArr[e].getCatGrade()&&(t.coin+=this._slotObjArr[e].getPerSecondGetCoin().coin,t.rareCoin+=this._slotObjArr[e].getPerSecondGetCoin().rareCoin);return t},setRarePageCoin:function(){r.instance.setRarePageCoin(this.calSecondAddCoin())},startEquipEff:function(t){this.equipEffSkeleton.node.position=this._slotPosArr[t],this.equipEffSkeleton.setAnimation(0,"equip_eff",!1)},startBuffFood:function(){for(var t=0;t<a.PAGE_ONE_RARE_SLOT;++t)this._slotObjArr[t].startBuffFood()},endBuffFood:function(){for(var t=0;t<a.PAGE_ONE_RARE_SLOT;++t)this._slotObjArr[t].endBuffFood()}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr"}],RareCatData:[function(t,e,i){"use strict";cc._RF.push(e,"1d5acsQfDRMwLTZ5rXs7Q4S","RareCatData");var a=t("Global");cc.Class({extends:cc.Component,properties:{_charGrade:0,_charCode:"",_charType:0,_catRank:"",_getProb:0,_nameTextKey:0,_explainTextKey:0,_getCoin:0,_getRareCoin:0,_getCoinTime:0,_getRareCoinTime:0,_getNewCatCoin:0,_getNewCatCash:0,_statHealth:0,_statCharm:0,_statInt:0,_mainStat:-1,_lvUpStatMain:0,_lvUpStatSub:0,_sumExp:0,_sumCash:0,_galleryType:0,_spineData:null,_spineSkin:"",_spineAni:"",_spineAccSlotHat:"",_spineAccSlotNeckFront:"",_spineAccSlotNeckBack:""},initrareCatData:function(t,e,i,a,s,n,r,c,o,h,u,l,_,p,d,g,S,T,A,C,f){this._charGrade=t,this._charCode=e,this._charType=i,this._catRank=a,this._getProb=s,this._nameTextKey=n,this._explainTextKey=r,this._getCoin=o,this._getRareCoin=u,this._getCoinTime=c,this._getRareCoinTime=h,this._getNewCatCoin=l,this._getNewCatCash=_,this._statHealth=p,this._statCharm=d,this._statInt=g,this._mainStat=this.selectMainStat([p,d,g]),this._lvUpStatMain=S,this._lvUpStatSub=T,this._sumExp=A,this._sumCash=C,this._galleryType=f},selectMainStat:function(t){for(var e=0,i=0;i<t.length;i++)e<t[i]&&(e=t[i]);switch(e){case this._statHealth:return a.RARE_CAT_MAIN_HEALTH;case this._statCharm:return a.RARE_CAT_MAIN_CHARM;case this._statInt:return a.RARE_CAT_MAIN_INT}},initLinkData:function(t,e,i,a){this._spineData=t,this._spineSkin=e,this._spineAni=i,this._spineAccSlotHat=a[0],this._spineAccSlotNeckFront=a[1],this._spineAccSlotNeckBack=a[2]},getSpineData:function(){return this._spineData},getSpineSkin:function(){return this._spineSkin},getSpineAni:function(){return this._spineAni},getSpineAccSlotHat:function(){return this._spineAccSlotHat},getSpineAccSlotNeck:function(t){return 1001==t||1002==t||3001==t||3002==t?this._spineAccSlotNeckFront:this._spineAccSlotNeckBack},getUnitCode:function(){return this._charCode},getUnitGrade:function(){return this._charGrade},getRank:function(){return this._catRank},getRankProb:function(){return this._getProb},getUnitNameTextKey:function(){return this._nameTextKey},getUnitExplainTextKey:function(){return this._explainTextKey},getGetCoin:function(){return this._getCoin},getGetRareCoin:function(){return this._getRareCoin},getGetCoinTime:function(){return this._getCoinTime},getGetRareCoinTime:function(){return this._getRareCoinTime},getNewRewardCoin:function(){return this._getNewCatCoin},getNewRewardCash:function(){return this._getNewCatCash},getSumExp:function(){return this._sumExp},getSumCash:function(){return this._sumCash},getStatHealth:function(){return this._statHealth},getStatCharm:function(){return this._statCharm},getStatInt:function(){return this._statInt},getMainStat:function(){return this._mainStat},getLvUpStatMain:function(){return this._lvUpStatMain},getLvUpStatSub:function(){return this._lvUpStatSub},getGalleryType:function(){return this._galleryType}}),cc._RF.pop()},{Global:"Global"}],RareCatMgr:[function(t,e,i){"use strict";cc._RF.push(e,"fd9f6ZFYHRBFIYq0mXeEGvL","RareCatMgr");t("Global");var a=t("RareCatData"),s=(t("DataMgr"),cc.Class({extends:cc.Component,properties:{_rareCatDataTable:null,_dataMgr:null,atlasChar:cc.SpriteAtlas,atlasUI:cc.SpriteAtlas,unitSpineDataArr:[sp.SkeletonData]},statics:{instance:null},onLoad:function(){s.instance=this,cc.game.addPersistRootNode(this.node)},onDestroy:function(){},setDataMgr:function(t){this._dataMgr=t},initRareCatData:function(t){this._rareCatDataTable=new Array;for(var e=0,i=0;i<t.getRecordNum();i++){var s=new a;e+=t.getRecordValue(i,"Get_Prob")/1e4;var n=this._dataMgr.getGalleyType(t.getRecordValue(i,"Gallery_Type"));s.initrareCatData(parseInt(t.getRecordValue(i,"Char_Grade")),t.getRecordValue(i,"Char_Code"),t.getRecordValue(i,"Char_Type"),t.getRecordValue(i,"Cat_rank"),e,parseInt(t.getRecordValue(i,"Name_Text_Key")),parseInt(t.getRecordValue(i,"Explain_Text_Key")),parseInt(t.getRecordValue(i,"Get_Coin_Time")),parseInt(t.getRecordValue(i,"Get_Coin")),parseInt(t.getRecordValue(i,"Get_Rare_Coin_Time")),parseInt(t.getRecordValue(i,"Get_Rare_Coin")),parseInt(t.getRecordValue(i,"Get_New_Cat_Coin")),parseInt(t.getRecordValue(i,"Get_New_Cat_Cash")),parseInt(t.getRecordValue(i,"Stat_Health")),parseInt(t.getRecordValue(i,"Stat_Charm")),parseInt(t.getRecordValue(i,"Stat_Int")),parseInt(t.getRecordValue(i,"Lv_Up_Main_Stat")),parseInt(t.getRecordValue(i,"Lv_Up_Sub_Stat")),parseInt(t.getRecordValue(i,"Sum_Exp")),parseInt(t.getRecordValue(i,"Sum_Cash_Reward")),n);var r=this.getUnitSkinData(s.getUnitGrade());s.initLinkData(r[0],r[1],r[2],r[3]),cc.log(i),this._rareCatDataTable[i+10]=s}},getUnitSpriteNameForGrade:function(t){return this._rareCatDataTable[t-1].getUnitCode()},getUnitSkinData:function(t){var e=["hat","neck_front","neck_back"];switch(t){case 11:return[this.unitSpineDataArr[0],"cat_11",["kneading","scare","stretch"],e];case 12:return[this.unitSpineDataArr[1],"cat_12",["roll","tailswing","washup"],e];case 13:return[this.unitSpineDataArr[2],"cat_13",["purring","sleep","tailslap"],e];case 14:return[this.unitSpineDataArr[3],"cat_14",["tailswing","tilt","toy"],e];case 15:return[this.unitSpineDataArr[4],"cat_15",["ball","toy","wool"],e];case 16:return[this.unitSpineDataArr[5],"cat_16",["kneading","scare","stretch"],e];case 17:return[this.unitSpineDataArr[6],"cat_17",["roll","tailswing","washup"],e];case 18:return[this.unitSpineDataArr[7],"cat_18",["purring","sleep","tailslap"],e];case 19:return[this.unitSpineDataArr[8],"cat_19",["tailswing","tilt","toy"],e];case 20:return[this.unitSpineDataArr[9],"cat_20",["ball","toy","wool"],e];case 21:return[this.unitSpineDataArr[0],"cat_21",["kneading","scare","stretch"],e];case 22:return[this.unitSpineDataArr[1],"cat_22",["roll","tailswing","washup"],e];case 23:return[this.unitSpineDataArr[2],"cat_23",["purring","sleep","tailslap"],e];case 24:return[this.unitSpineDataArr[3],"cat_24",["tailswing","tilt","toy"],e];case 25:return[this.unitSpineDataArr[4],"cat_25",["ball","toy","wool"],e];case 26:return[this.unitSpineDataArr[5],"cat_26",["kneading","scare","stretch"],e];case 27:return[this.unitSpineDataArr[6],"cat_27",["roll","tailswing","washup"],e];case 28:return[this.unitSpineDataArr[7],"cat_28",["purring","sleep","tailslap"],e];case 29:return[this.unitSpineDataArr[8],"cat_29",["tailswing","tilt","toy"],e];case 30:return[this.unitSpineDataArr[9],"cat_30",["ball","toy","wool"],e];case 31:return[this.unitSpineDataArr[0],"cat_31",["kneading","scare","stretch"],e];case 32:return[this.unitSpineDataArr[1],"cat_32",["roll","tailswing","washup"],e];case 33:return[this.unitSpineDataArr[2],"cat_33",["purring","sleep","tailslap"],e];case 34:return[this.unitSpineDataArr[3],"cat_34",["tailswing","tilt","toy"],e];case 35:return[this.unitSpineDataArr[4],"cat_35",["ball","toy","wool"],e];case 36:return[this.unitSpineDataArr[5],"cat_36",["kneading","scare","stretch"],e]}return null},getUnitThumbPosGrade:function(t){return this.getUnitThumbPos(this.getRareCatDataGrade(t).getUnitCode())},getRareCatDataGrade:function(t){return this._rareCatDataTable[t-1]},getUnitSpriteForGrade:function(t){return this.atlasChar.getSpriteFrame("CAT_"+t)},getUnitRankSprite:function(t){return this.atlasUI.getSpriteFrame("icon_grade_"+t)}}));cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",RareCatData:"RareCatData"}],RareCatUserData:[function(t,e,i){"use strict";cc._RF.push(e,"f5c891rGV1C/rqQPvxHJSjK","RareCatUserData");var a=t("Global");cc.Class({extends:cc.Component,properties:{_collect:0,_slotIdx:-1,_friendshipLv:0,_exp:0,_catState:-1,_accHatPK:-1,_accNeckPK:-1,_statHealth:0,_statCharm:0,_statInt:0,_mainStat:-1,_statUpMain:0,_statUpSub:0},init:function(t,e,i,s,n,r,c,o,h,u){this._collect=t,this._slotIdx=e,this._accHatPK=i,this._accNeckPK=s,this._statHealth=n,this._statCharm=r,this._statInt=c,this._mainStat=o,this._statUpMain=h,this._statUpSub=u,this._friendshipLv=1,this._exp=0,this._catState=a.CARE_NORMAL},initStat:function(t,e,i,a,s,n){this._statHealth=t,this._statCharm=e,this._statInt=i,this._mainStat=a,this._statUpMain=s,this._statUpSub=n},setCollect:function(t){this._collect=t},getCollect:function(){return this._collect},setSlotIdx:function(t){this._slotIdx=t},getSlotIdx:function(){return this._slotIdx},setExp:function(t){this._exp=t},getExp:function(){return this._exp},setFriendshipLv:function(t){this._friendshipLv=t},getFriendshipLv:function(){return this._friendshipLv},setCatState:function(t){this._catState=t},getCatState:function(){return this._catState},setAccHatPK:function(t){this._accHatPK=t},getAccHatPK:function(){return this._accHatPK},setAccNeckPK:function(t){this._accNeckPK=t},getAccNeckPK:function(){return this._accNeckPK},getStatHealth:function(){return this._mainStat==a.RARE_CAT_MAIN_HEALTH?this._statHealth+(this._friendshipLv-1)*this._statUpMain:this._statHealth+(this._friendshipLv-1)*this._statUpSub},getStatCharm:function(){return this._mainStat==a.RARE_CAT_MAIN_CHARM?this._statCharm+(this._friendshipLv-1)*this._statUpMain:this._statCharm+(this._friendshipLv-1)*this._statUpSub},getStatInt:function(){return this._mainStat==a.RARE_CAT_MAIN_INT?this._statInt+(this._friendshipLv-1)*this._statUpMain:this._statInt+(this._friendshipLv-1)*this._statUpSub},getSaveObj:function(){return{collect:this._collect,slotIdx:this._slotIdx,friendshipLv:this._friendshipLv,exp:this._exp,accHatPK:this._accHatPK,accNeckPK:this._accNeckPK,catState:this._catState}},setSaveObj:function(t){this._collect=t.collect,this._slotIdx=t.slotIdx,this._friendshipLv=t.friendshipLv,this._exp=t.exp,this._accHatPK=t.accHatPK,this._accNeckPK=t.accNeckPK,this._catState=t.catState}}),cc._RF.pop()},{Global:"Global"}],RareCoinPlusObj:[function(t,e,i){"use strict";cc._RF.push(e,"54b1e2L9FNFyLhgjw/DRnQr","RareCoinPlusObj"),cc.Class({extends:cc.Component,properties:{coinCountLabel:cc.Label,_POS_X:790,_POS_Y:435},playAni:function(t){this.node.position=cc.v2(this._POS_X,this._POS_Y),this.node.active=!0,this.coinCountLabel.string="+"+t,this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,20)).easing(cc.easeCircleActionOut()),cc.callFunc(this.hide,this))),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.fadeTo(.5,0),cc.callFunc(this.hide,this)))}}),cc._RF.pop()},{}],RareObj:[function(t,e,i){"use strict";cc._RF.push(e,"67f822EGVhIv5EnZ0LELlT5","RareObj");var a=t("RareCatMgr"),s=t("PlaySceneMgr"),n=t("DataMgr"),r=t("Global"),c=cc.Class({extends:cc.Component,properties:{RareBoardMgr:cc.Node,catNode:cc.Node,imoticonNode:cc.Node,imoticonSprite:cc.Sprite,houseSprite:cc.Sprite,houseNode:cc.Node,rareCatSkeleton:sp.Skeleton,buffFood:sp.Skeleton,_rareCatUserData:null,_catGrade:0,_houseIndex:-1,_coinTimer:0,_rareCoinTimer:0,_haveCoin:0,_haveRareCoin:0,_tempCoin:0,_tempRareCoin:0,_getCoin:0,_getRareCoin:0,_getCoinTime:0,_useGetCoinTime:0,_getRareCoinTime:0,_aniName:"",_catStateTime:0,_slotIdx:-1,_accSlotHat:"",_accSlotNeck:"",_RareBoardMgr:null,_RareCatMgr:null,_RareCat:null,_playSceneMgr:null},statics:{STATE_TRANS_TIME_MIN:300,STATE_TRANS_TIME_MAX:600},start:function(){var t=this;this._playSceneMgr=s.instance,this._RareBoardMgr=this.RareBoardMgr.getComponent("RareBoardMgr"),this._RareCatMgr=a.instance;var e=cc.v2(100,100),i=cc.v2(this.catNode.x+this.node.x,this.catNode.y+this.node.y);i.x>=0?(this._Horizental=1,this.imoticonNode.scaleX=-1):(this._Horizental=-1,this.imoticonNode.scaleX=1),this.imoticonNode.position=cc.v2(e.x*this._Horizental+i.x,e.y+i.y),this.rareCatSkeleton.setEventListener(function(e,i){if("endAni"==i.data.name){var a=cc.v2(t.node.position.x+720,t.rareCatSkeleton.node.position.y+t.node.position.y);t._playSceneMgr.addCoin(Math.round(t._getCoin),a),t.rareCatSkeleton.addAnimation(0,"idle",!0)}})},houseAni:function(){this.houseNode.y=30,this.houseNode.opacity=0,this.houseNode.active=!0;var t=cc.spawn(cc.moveBy(.5,cc.v2(0,-30)).easing(cc.easeCircleActionIn()),cc.fadeTo(.5,255));this.houseNode.runAction(cc.sequence(t,cc.moveBy(.15,cc.v2(0,10)).easing(cc.easeCircleActionIn()),cc.moveBy(.15,cc.v2(0,-10)).easing(cc.easeCircleActionIn()),cc.callFunc(this.startStarAni,this)))},startStarAni:function(){this._RareBoardMgr.startEquipEff(this._slotIdx)},initData:function(t,e){if(this._slotIdx=e,this._houseIndex=t.houseIndex,this._catGrade=t.catGrade,1==n.getUserCatHouseData(this._houseIndex).getCollect()?(this.houseNode.active=!0,this.node.active=!0):this.node.active=!1,this._catGrade>10){this.rareCatSkeleton.node.active=!0,this._RareCat=this._RareCatMgr.getRareCatDataGrade(this._catGrade);var i=n.getRareCatData(this._catGrade);this._rareCatUserData=i;var a=i.getAccHatPK(),s=i.getAccNeckPK(),r=n.getUserHatAccData(a),o=n.getUserNeckAccData(s);if(this._getCoin=this._RareCat.getGetCoin(),this._getRareCoin=this._RareCat.getGetRareCoin(),this._getCoinTime=this._RareCat.getGetCoinTime(),this._useGetCoinTime=this._getCoinTime,this._getRareCoinTime=this._RareCat.getGetRareCoinTime(),this.schedule(this.startAddCoin,1),this.schedule(this.startAddRareCoin,1),this._catStateTime=Math.floor(Math.random()*(c.STATE_TRANS_TIME_MAX-c.STATE_TRANS_TIME_MIN))+c.STATE_TRANS_TIME_MIN,this.schedule(this.updateState,this._catStateTime),this.refreshState(),this.rareCatSkeleton.skeletonData=this._RareCat.getSpineData(),this.rareCatSkeleton.setSkin(this._RareCat.getSpineSkin()),this._aniName=this._RareCat.getSpineAni(),this._accSlotHat=this._RareCat.getSpineAccSlotHat(),null!=o?this._accSlotNeck=this._RareCat.getSpineAccSlotNeck(o.getIdx()):(this.rareCatSkeleton.setAttachment("neck_front","none"),this.rareCatSkeleton.setAttachment("neck_back","none")),null==r)this.rareCatSkeleton.setAttachment(this._accSlotHat,"none");else{var h=r.getAccType()+"_"+r.getIdx();this.rareCatSkeleton.setAttachment(this._accSlotHat,h)}if(null==o);else{h=o.getAccType()+"_"+o.getIdx();this.rareCatSkeleton.setAttachment(this._accSlotNeck,h)}this.actAni(this._aniName[0],!0),this._playSceneMgr.getAdsCatBuff()==this._playSceneMgr.ADS_BUFF_ON&&this.startBuffFood()}else this.rareCatSkeleton.clearTrack(0),this.rareCatSkeleton.node.active=!1,this.buffFood.clearTrack(0),this.endBuffFood(),this.unschedule(this.startAddCoin),this.unschedule(this.startAddRareCoin),this.unschedule(this.updateState),this.imoticonNode.active=!1},updateState:function(){if(this._rareCatUserData.getCatState()==r.CARE_NORMAL){var t=Math.floor(Math.random()*r.CAT_EMOTICON_MAX);this._rareCatUserData.setCatState(t),this.imoticonNode.active=!0,this.imoticonSprite.spriteFrame=this._playSceneMgr.getEmoticon(t),this._playSceneMgr.getSelectedSlot()==this._slotIdx&&this._playSceneMgr.updateImoticon(this._slotIdx),this._playSceneMgr.chkCatHelp()}this._catStateTime=Math.floor(Math.random()*(c.STATE_TRANS_TIME_MAX-c.STATE_TRANS_TIME_MIN))+c.STATE_TRANS_TIME_MIN},refreshState:function(){var t=this._rareCatUserData.getCatState();t>=0?(this.imoticonSprite.spriteFrame=this._playSceneMgr.getEmoticon(t),this.imoticonNode.active=!0):this.imoticonNode.active=!1},startBuffFood:function(){this._catGrade>0&&(this.buffFood.node.opacity=255,this.buffFood.node.active=!0,this.buffFood.setAnimation(0,"buff_food_eff",!0),this.rareCatSkeleton.timeScale=2,this._useGetCoinTime=Math.ceil(this._getCoinTime/2))},endBuffFood:function(){this.rareCatSkeleton.timeScale=1,this._useGetCoinTime=this._getCoinTime,this.buffFood.node.runAction(cc.sequence(cc.fadeTo(.2,0),cc.callFunc(this.deleteBuffFood,this)))},deleteBuffFood:function(){this.buffFood.node.active=!1},Onbtn:function(t,e){this.node.activeInHierarchy&&this._RareBoardMgr.OnRareCatBtn(e)},actAni:function(t,e){e?this.rareCatSkeleton.addAnimation(0,"idle",!0):this.rareCatSkeleton.addAnimation(0,t,!1)},getUsedBool:function(){return this.node.activeInHierarchy},startAddCoin:function(){if(this._coinTimer++,this._coinTimer>=this._useGetCoinTime){var t=Math.floor(3*Math.random());this.actAni(this._aniName[t],!1),this._coinTimer=0}},startAddRareCoin:function(){if(this._rareCoinTimer++,this._haveRareCoin+=this._getRareCoin/this._getRareCoinTime,this._rareCoinTimer>this._getRareCoinTime){var t=cc.v2(this.node.position.x+720,this.node.position.y);this._playSceneMgr.addRareCoin(this._getRareCoin,t),this._rareCoinTimer=0}},getPerSecondGetCoin:function(){var t={};return t.coin=this._getCoin/this._getCoinTime,t.rareCoin=this._getRareCoin/this._getRareCoinTime,t},getCatGrade:function(){return this._catGrade}});cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",PlaySceneMgr:"PlaySceneMgr",RareCatMgr:"RareCatMgr"}],SelectedCat:[function(t,e,i){"use strict";cc._RF.push(e,"654eesbYBJDc721oGa402hs","SelectedCat");var a=t("LocaleMgr"),s=t("PopupMgr");cc.Class({extends:cc.Component,properties:{npcCatLabel:cc.Label,_upbool:!1,_allUpBool:!1,_other:null,_otherParent:null,_otherArr:null,_otherParentArr:null,_firstFlag:!0},start:function(){this.npcCatLabel.string=a.getString(3045)},moveUp:function(t,e){this._upbool=!0,this._other=t,this._otherParent=e,e.removeChild(t),this.node.addChild(t),this.node.active=!0},moveDown:function(){this._upbool&&(this._upbool=!1,this.node.removeChild(this._other),this._otherParent.addChild(this._other),this._other=null,this._otherParent=null,this.node.active=!1)},OnXBtn:function(){s.instance.showPopup(s.POPUP_HOTEL,!0),this.endBlind()},startBlind:function(t,e){this._firstFlag&&(this._otherArr=new Array,this._otherParentArr=new Array,this._firstFlag=!1),this._allUpBool=!0,this._otherArr.push(t),this._otherParentArr.push(e),e.removeChild(t),this.node.addChild(t),this.node.active=!0},endBlind:function(){if(this._allUpBool){this._allUpBool=!1;for(var t=this._otherArr.length,e=0;e<t;e++)this.node.removeChild(this._otherArr[0]),this._otherParentArr[0].addChild(this._otherArr[0]),this._otherArr.shift(),this._otherParentArr.shift();this.node.active=!1}}}),cc._RF.pop()},{LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr"}],ShopBuffSlotObj:[function(t,e,i){"use strict";cc._RF.push(e,"6d00cpd8SlBQKmr/3YnKQkf","ShopBuffSlotObj");t("UnitMgr");var a=t("DataMgr"),s=t("LocaleMgr"),n=t("PlaySceneMgr"),r=t("Global");cc.Class({extends:cc.Component,properties:{spriteImage:cc.Sprite,spriteCoin:cc.Sprite,coinSpriteFrame:cc.SpriteFrame,cashCoinSpriteFrame:cc.SpriteFrame,itemLvLabel:cc.Label,itemName:cc.Label,explain:cc.RichText,price:cc.Label,_idx:0,_shopIdx:0,_shopIdxTwo:0,_price:0,_itemLv:0,_shopData:null,_popupShopMgr:null,_grade:0},start:function(){},init:function(t,e,i){this._idx=t,this._shopData=e,this._popupShopMgr=i,this._shopIdx=this._shopData.getIdx(),this._shopIdxTwo=this._shopData.getIdxTwo(),this.spriteImage.spriteFrame=n.instance.getShopItem(this._shopIdx),this.updateItemExplain(),this.updateItemLv(),this.updateCoinNum()},updateItemLv:function(){switch(this._idx){case r.SHOP_BUFF_CATCOUNT:this._itemLv=a.getUserBuySlot();break;case r.SHOP_BUFF_GET_SPEED_TIME:this._itemLv=a.getUserBuyTime();break;case r.SHOP_BUFF_INCREASE_COIN:this._itemLv=a.getUserBuyCoinInc();break;case r.SHOP_BUFF_INCREASE_BUFF_TIME:this._itemLv=a.getUserBuyBuffInc();break;case r.SHOP_BUFF_CAT_LVTWO_CHANCE:this._itemLv=a.getUserBuyCatLv2();break;case r.SHOP_BUFF_MERGE_LVTWO_CHANCE:this._itemLv=a.getUserBuyMergeLv2();break;case r.SHOP_BUFF_OFFLINE_REWARD:this._itemLv=a.getUserBuyOffline();break;case r.SHOP_BUFF_MOUSE_LVUP_CHANCE:this._itemLv=a.getUserBuyMouseLvUp()}this.itemLvLabel.string="Lv."+this._itemLv},updateCoinNum:function(){var t=a.getNormalCatUpgradeTable(this._itemLv);switch(this._idx){case r.SHOP_BUFF_CATCOUNT:this._price=t.buyCountCat;break;case r.SHOP_BUFF_GET_SPEED_TIME:this._price=t.buyGetSpeedTime;break;case r.SHOP_BUFF_INCREASE_COIN:this._price=t.buyCashCoin;break;case r.SHOP_BUFF_INCREASE_BUFF_TIME:this._price=t.buyCashCoinbuffTime;break;case r.SHOP_BUFF_CAT_LVTWO_CHANCE:this._price=t.buyCashCatLvTwoChance;break;case r.SHOP_BUFF_MERGE_LVTWO_CHANCE:this._price=t.buyCashMergeLvTwoChance;break;case r.SHOP_BUFF_OFFLINE_REWARD:this._price=t.buyCashOfflineReward;break;case r.SHOP_BUFF_MOUSE_LVUP_CHANCE:this._price=t.buyCashMouseLvUpChance}this.price.string=r.getNumToType(this._price)},updateItemExplain:function(){var t="",e="";switch(this._idx){case r.SHOP_BUFF_CATCOUNT:this.spriteCoin.spriteFrame=this.coinSpriteFrame,(i=a.getUserBuySlot())<50?(t=a.getNormalCatUpgradeTable(i).countCat,e=a.getNormalCatUpgradeTable(i+1).countCat):t=a.getNormalCatUpgradeTable(i).countCat;break;case r.SHOP_BUFF_GET_SPEED_TIME:this.spriteCoin.spriteFrame=this.coinSpriteFrame,(i=a.getUserBuyTime())<50?(t=a.getNormalCatUpgradeTable(i).getSpeedTime,e=a.getNormalCatUpgradeTable(i+1).getSpeedTime):t=a.getNormalCatUpgradeTable(i).getSpeedTime;break;case r.SHOP_BUFF_INCREASE_COIN:this.spriteCoin.spriteFrame=this.cashCoinSpriteFrame,(i=a.getUserBuyCoinInc())<50?(t=a.getNormalCatUpgradeTable(i).increaseCoin/100+"%",e=a.getNormalCatUpgradeTable(i+1).increaseCoin/100+"%"):t=a.getNormalCatUpgradeTable(i).increaseCoin/100+"%";break;case r.SHOP_BUFF_INCREASE_BUFF_TIME:this.spriteCoin.spriteFrame=this.cashCoinSpriteFrame,(i=a.getUserBuyBuffInc())<50?(t=a.getNormalCatUpgradeTable(i).increaseCoinbuffTime,e=a.getNormalCatUpgradeTable(i+1).increaseCoinbuffTime):t=a.getNormalCatUpgradeTable(i).increaseCoinbuffTime;break;case r.SHOP_BUFF_CAT_LVTWO_CHANCE:this.spriteCoin.spriteFrame=this.cashCoinSpriteFrame,(i=a.getUserBuyCatLv2())<50?(t=a.getNormalCatUpgradeTable(i).catLvTwoChance/100+"%",e=a.getNormalCatUpgradeTable(i+1).catLvTwoChance/100+"%"):t=a.getNormalCatUpgradeTable(i).catLvTwoChance/100+"%";break;case r.SHOP_BUFF_MERGE_LVTWO_CHANCE:this.spriteCoin.spriteFrame=this.cashCoinSpriteFrame,(i=a.getUserBuyMergeLv2())<50?(t=a.getNormalCatUpgradeTable(i).mergeLvTwoChance/100+"%",e=a.getNormalCatUpgradeTable(i+1).mergeLvTwoChance/100+"%"):t=a.getNormalCatUpgradeTable(i).mergeLvTwoChance/100+"%";break;case r.SHOP_BUFF_OFFLINE_REWARD:this.spriteCoin.spriteFrame=this.cashCoinSpriteFrame,(i=a.getUserBuyOffline())<50?(t=a.getNormalCatUpgradeTable(i).offlineReward/100+"%",e=a.getNormalCatUpgradeTable(i+1).offlineReward/100+"%"):t=a.getNormalCatUpgradeTable(i).offlineReward/100+"%";break;case r.SHOP_BUFF_MOUSE_LVUP_CHANCE:var i;this.spriteCoin.spriteFrame=this.cashCoinSpriteFrame,(i=a.getUserBuyMouseLvUp())<50?(t=a.getNormalCatUpgradeTable(i).mouseLvUpChance/100+"%",e=a.getNormalCatUpgradeTable(i+1).mouseLvUpChance/100+"%"):t=a.getNormalCatUpgradeTable(i).mouseLvUpChance/100+"%"}this.itemName.string=s.getString(this._shopIdx);var n="";n=i<50?t+" -&gt; "+e:t,this.explain.string=s.getString(this._shopIdxTwo,"@value1@",n)},OnbuyBtn:function(){this._popupShopMgr.buyBuff(this,this._shopData,this._price)}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",UnitMgr:"UnitMgr"}],ShopCareObj:[function(t,e,i){"use strict";cc._RF.push(e,"c3ee1ho/KJBp6iiEGKJ2d+M","ShopCareObj");t("DataMgr");var a=t("LocaleMgr"),s=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{careItemSprite:cc.Sprite,priceIconSprite:cc.Sprite,careItemName:cc.Label,explainName:cc.Label,price:cc.Label,_idx:0,_price:0,_priceType:0,_careData:null,_popupShopMgr:0,_RARE_TYPE:0,_CASH_TYPE:1},init:function(t,e){this._careData=t,this._popupShopMgr=e,this._idx=this._careData.getIdx();var i=this._careData.getNameTextKey(),n=this._careData.getExplainTextKey();this.careItemSprite.spriteFrame=s.instance.getCareItem(this._idx),this.careItemName.string=a.getString(i),this.explainName.string=a.getString(n,"<br/>","\n"),this._price=this._careData.getPrice(),this.price.string=this._price,this._priceType=this._careData.getPriceType(),this.priceIconSprite.spriteFrame=s.instance.getCurrencySprite(this._priceType)},OnbuyBtn:function(){this._popupShopMgr.buyCareItem(this._idx,this._price,this._priceType)}}),cc._RF.pop()},{DataMgr:"DataMgr",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr"}],ShopCatHouseObj:[function(t,e,i){"use strict";cc._RF.push(e,"d25f9xulrxC449kW4Fqd/zI","ShopCatHouseObj");var a=t("DataMgr"),s=t("LocaleMgr"),n=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{houseSprite:cc.Sprite,priceIconSprite:cc.Sprite,houseName:cc.Label,explainName:cc.Label,price:cc.Label,blindNode:cc.Node,rareCoinSprite:cc.SpriteFrame,cashCoinSprite:cc.SpriteFrame,_idx:0,_price:0,_priceType:0,_shopHouseData:null,_popupShopMgr:0,_RARE_TYPE:0,_CASH_TYPE:1},init:function(t,e,i){this._idx=t,this._shopHouseData=e,this._popupShopMgr=i;var a=this._shopHouseData.getNameTextKey(),r=this._shopHouseData.getExplainTextKey();this.houseSprite.spriteFrame=n.instance.getShopHouseSprite(this._idx),this.houseName.string=s.getString(a),this.explainName.string=s.getString(r,"<br/>","\n"),this._price=this._shopHouseData.getPrice(),this.price.string=this._price,"Rare"==this._shopHouseData.getPriceType()?(this._priceType=this._RARE_TYPE,this.priceIconSprite.spriteFrame=this.rareCoinSprite):(this._priceType=this._CASH_TYPE,this.priceIconSprite.spriteFrame=this.cashCoinSprite),this.setblind()},setblind:function(){var t=a.getUserCatHouseData(this._idx)._collect;this.blindNode.active=t>0},OnbuyBtn:function(){this._popupShopMgr.buyHouse(this,this._shopHouseData,this._price,this._priceType)}}),cc._RF.pop()},{DataMgr:"DataMgr",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr"}],ShopData:[function(t,e,i){"use strict";cc._RF.push(e,"42096esz6ZEoI7AJ7oUN4Ov","ShopData");t("LocaleMgr"),t("Global");cc.Class({properties:{_shopIdx:0,_shopIdxTwo:0},initData:function(t,e){this._shopIdx=parseInt(t),this._shopIdxTwo=parseInt(e)},getIdx:function(){return this._shopIdx},getIdxTwo:function(){return this._shopIdxTwo}}),cc._RF.pop()},{Global:"Global",LocaleMgr:"LocaleMgr"}],ShopFurnitureObj:[function(t,e,i){"use strict";cc._RF.push(e,"36eadGPHM5C0pleUmNikNXY","ShopFurnitureObj");var a=t("DataMgr"),s=t("LocaleMgr"),n=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{furnitureSprite:cc.Sprite,priceIconSprite:cc.Sprite,produceIconSprite:cc.Sprite,furnitureName:cc.Label,explainName:cc.RichText,price:cc.Label,blindNode:cc.Node,_idx:0,_price:0,_priceType:0,_shopFurnitureData:null,_popupShopMgr:0,_RARE_TYPE:0,_CASH_TYPE:1},init:function(t,e){this._shopFurnitureData=t,this._popupShopMgr=e,this._idx=this._shopFurnitureData.getFurnitureIndex();var i=this._shopFurnitureData.getNameTextKey(),a=this._shopFurnitureData.getExplainTextKey();this.furnitureSprite.spriteFrame=n.instance.getShopFurnitureSprite(this._idx),this.furnitureName.string=s.getString(i),this.explainName.string=s.getString(a),this._price=this._shopFurnitureData.getPrice(),this.price.string=this._price,this._priceType=this._shopFurnitureData.getPriceType(),this.priceIconSprite.spriteFrame=n.instance.getCurrencySprite(this._priceType);var r=this._shopFurnitureData.getProduceType();this.produceIconSprite.spriteFrame=n.instance.getCurrencySprite(r),this.setblind()},setblind:function(){var t=a.getUserFurnitureData(this._idx).getLv();this.blindNode.active=t>0},OnbuyBtn:function(){this._popupShopMgr.buyFuniture(this,this._shopFurnitureData,this._price,this._priceType)}}),cc._RF.pop()},{DataMgr:"DataMgr",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr"}],ShopUSlotObj:[function(t,e,i){"use strict";var a;function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"18bce8umWtHX7FsKpK7m01I","ShopUSlotObj");var n=t("UnitMgr"),r=t("DataMgr"),c=t("Global"),o=t("LocaleMgr");t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:(a={blindNode:cc.Node,blindLabel:cc.Label,spriteCat:cc.Sprite,lvLabel:cc.Label,catName:cc.Label,price:cc.Label,getCoinLabel:cc.Label,getTimeLabel:cc.Label,_idx:0,_price:0,_unitData:null},s(a,"_unitData",null),s(a,"_popupShopMgr",null),s(a,"_grade",0),a),init:function(t,e,i){this._idx=t,this._unitData=e,this._popupShopMgr=i;var a=this._unitData.getUnitTextKey();this.getCoinLabel.string=this._unitData.getGetCoin(),this.getTimeLabel.string=this._unitData.getGetCoinTime(),this.spriteCat.spriteFrame=n.instance.getUnitSpriteForGrade(t),this.lvLabel.string=t,this.catName.string=o.getString(a);var s=r.getUnitLv(t);this._price=this._unitData.getUnitPrice(s),this.price.string=c.getNumToType(this._price),8==this._idx?this.blindLabel.string=o.getString(3109)+o.getString(3108):this.blindLabel.string=this._idx+3+o.getString(3108)},updateCoinNum:function(){var t=r.getUnitLv(this._idx);this.price.string=c.getNumToType(this._unitData.getUnitPrice(t))},OnbuyBtn:function(){this._popupShopMgr.buyUnit(this,this._unitData,this._price)},blindOnOff:function(t){this.blindNode.active=!!t}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",UnitMgr:"UnitMgr"}],SoundMgr:[function(t,e,i){"use strict";cc._RF.push(e,"8a026N2bZ1Pf7ikCAbOqFLT","SoundMgr");t("DataMgr");e.exports={musicVol:1,soundVol:1,audioNowBGM:null,audioBgmNormal:null,audioBgmFever:null,audioBgmSplash:null,audioNowBGMID:-1,audioBtn0:null,audioBtn2:null,audioBtn3:null,audioCatBig1:null,audioCatBig2:null,audioCatBig3:null,audioCatSmall1:null,audioCatSmall2:null,audioGoNormal:null,audioGoRare:null,audioNewCat:null,audioShopBuyCat:null,audioShopBuyItem:null,audioWarning:null,audioMakeCoin:null,audioMergeCat:null,audioPopupOpen:null,audioAdsCat:null,audioBang:null,audioBoxShake:null,audioCareClean:null,audioCareDrug:null,audioCareFail:null,audioCareFood:null,audioCareSuccess:null,audioCareToy:null,audioContestBonus:null,audioContestClap:null,audioContestGood:null,audioContestJudgement:null,audioResult:null,audioDressUp:null,audioHotelClose:null,audioHotelOpen:null,audioMakeCoin2:null,audioMergeCat2:null,audioMouse:null,audioPopupOpen2:null,audioPopupClose:null,audioRareCatMenu:null,audioGetCoin:null,audioGuideSuccess:null,audioAccEvolStart:null,audioAccEvolEnd:null,audioIntro:null,audioTitle:null,_callFunc:null,_loadSoundFlag:!0,_callFuncPre:null,_callFuncIntro:null,loadSoundPre:function(t){this._callFuncPre=t;this.loadedSoundPre(["Sound/BGM/normal_BGM","Sound/BGM/fever_BGM","Sound/BGM/splash_BGM","Sound/effectSound/button_click"],null)},loadedSoundPre:function(t,e){var i=this;cc.loader.loadResArray(t,cc.AudioClip,e,function(t,e){if(t)cc.error(t.toString());else{for(var a=e.length,s=0;s<a;++s)switch(e[s].name){case"normal_BGM":i.audioBgmNormal=e[s];break;case"fever_BGM":i.audioBgmFever=e[s];break;case"splash_BGM":i.audioBgmSplash=e[s];break;case"button_click":i.audioBtn0=e[s]}null!=i._callFuncPre&&i._callFuncPre()}})},loadSoundAll:function(t){if(this._callFunc=t,1==this._loadSoundFlag){this._loadSoundFlag=!1;return this.loadSoundRes(["Sound/effectSound/button_click","Sound/effectSound/button2","Sound/effectSound/button3","Sound/effectSound/cat_big1","Sound/effectSound/cat_big2","Sound/effectSound/cat_big3","Sound/effectSound/cat_small1","Sound/effectSound/cat_small2","Sound/effectSound/go_normal","Sound/effectSound/go_rare","Sound/effectSound/make_gold","Sound/effectSound/merge_cat","Sound/effectSound/new_cat","Sound/effectSound/popup_open","Sound/effectSound/shop_buy_cat","Sound/effectSound/shop_buy_item","Sound/effectSound/warning","Sound/effectSound/ads_cat","Sound/effectSound/bang","Sound/effectSound/box_shake","Sound/effectSound/care_clean","Sound/effectSound/care_drug","Sound/effectSound/care_fail","Sound/effectSound/care_food","Sound/effectSound/care_success","Sound/effectSound/care_toy","Sound/effectSound/contest_bonus","Sound/effectSound/contest_clap","Sound/effectSound/contest_good","Sound/effectSound/contest_Judgment","Sound/effectSound/contest_result","Sound/effectSound/dressup","Sound/effectSound/hotel_close","Sound/effectSound/hotel_open","Sound/effectSound/make_gold3","Sound/effectSound/merge_cat2","Sound/effectSound/mouse_","Sound/effectSound/popup_open2","Sound/effectSound/popup_close","Sound/effectSound/rare_cat_menu","Sound/effectSound/get_gold","Sound/effectSound/guide_success","Sound/effectSound/evol_start","Sound/effectSound/evol_end"],null),!0}return!1},loadSoundRes:function(t,e){var i=this;cc.loader.loadResArray(t,cc.AudioClip,e,function(t,e){if(t)cc.error(t.toString());else{for(var a=e.length,s=0;s<a;++s)switch(e[s].name){case"button_click":i.audioBtn0=e[s];break;case"button2":i.audioBtn2=e[s];break;case"button3":i.audioBtn3=e[s];break;case"cat_big1":i.audioCatBig1=e[s];break;case"cat_big2":i.audioCatBig2=e[s];break;case"cat_big3":i.audioCatBig3=e[s];break;case"cat_small1":i.audioCatSmall1=e[s];break;case"cat_small2":i.audioCatSmall2=e[s];break;case"go_normal":i.audioGoNormal=e[s];break;case"go_rare":i.audioGoRare=e[s];break;case"make_gold":i.audioMakeCoin=e[s];break;case"merge_cat":i.audioMergeCat=e[s];break;case"new_cat":i.audioNewCat=e[s];break;case"popup_open":i.audioPopupOpen=e[s];break;case"shop_buy_cat":i.audioShopBuyCat=e[s];break;case"shop_buy_item":i.audioShopBuyItem=e[s];break;case"warning":i.audioWarning=e[s];break;case"ads_cat":i.audioAdsCat=e[s];break;case"bang":i.audioBang=e[s];break;case"box_shake":i.audioBoxShake=e[s];break;case"care_clean":i.audioCareClean=e[s];break;case"care_drug":i.audioCareDrug=e[s];break;case"care_fail":i.audioCareFail=e[s];break;case"care_food":i.audioCareFood=e[s];break;case"care_success":i.audioCareSuccess=e[s];break;case"care_toy":i.audioCareToy=e[s];break;case"contest_bonus":i.audioContestBonus=e[s];break;case"contest_clap":i.audioContestClap=e[s];break;case"contest_good":i.audioContestGood=e[s];break;case"contest_Judgment":i.audioContestJudgement=e[s];break;case"contest_result":i.audioResult=e[s];break;case"dressup":i.audioDressUp=e[s];break;case"hotel_close":i.audioHotelClose=e[s];break;case"hotel_open":i.audioHotelOpen=e[s];break;case"make_gold3":i.audioMakeCoin2=e[s];break;case"merge_cat2":i.audioMergeCat2=e[s];break;case"mouse_":i.audioMouse=e[s];break;case"popup_open2":i.audioPopupOpen2=e[s];break;case"popup_close":i.audioPopupClose=e[s];break;case"rare_cat_menu":i.audioRareCatMenu=e[s];break;case"get_gold":i.audioGetCoin=e[s];break;case"guide_success":i.audioGuideSuccess=e[s];break;case"evol_start":i.audioAccEvolStart=e[s];break;case"evol_end":i.audioAccEvolEnd=e[s]}null!=i._callFunc&&i._callFunc()}})},playMusic:function(t,e,i){if(1==this.musicVol){if(this.audioNowBGM==t&&-1!=this.audioNowBGMID)return;-1!=this.audioNowBGMID&&cc.audioEngine.stop(this.audioNowBGMID),this.audioNowBGMID=cc.audioEngine.play(t,e,i),this.audioNowBGM=t}else this.audioNowBGM=t},stopMusic:function(){-1!=this.audioNowBGMID&&(cc.audioEngine.stop(this.audioNowBGMID),this.audioNowBGMID=-1)},stopAllSound:function(){cc.audioEngine.stopAll()},resumeMusic:function(){null!=this.audioNowBGM&&-1==this.audioNowBGMID&&(this.audioNowBGMID=cc.audioEngine.play(this.audioNowBGM,!0,1))},isPlayMusic:function(t){return this.audioNowBGM==t},playSound:function(t,e,i){return void 0==i&&(i=1),1==this.soundVol?cc.audioEngine.play(t,e,i):-1},getMusicVol:function(){return this.musicVol},setMusicVol:function(t){this.musicVol=t,0==this.musicVol?this.stopMusic():this.resumeMusic()},getSoundVol:function(){return this.soundVol},setSoundVol:function(t){this.soundVol=t}},cc._RF.pop()},{DataMgr:"DataMgr"}],TSVFileHandler:[function(t,e,i){"use strict";cc._RF.push(e,"584a3HBqzZF+o5txo7Tl8ur","TSVFileHandler");var a=function(){function t(t,e){var i=[],a=!0,s=!1,n=void 0;try{for(var r,c=t[Symbol.iterator]();!(a=(r=c.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,n=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=t("DataTable");cc.Class({extends:cc.Component,properties:{callfunc:null,_dataTable:null},loadFile:function(t,e,i){var n=this;cc.loader.loadRes(t,function(t,r){if(null==t){var c,o=[],h=0,u=!1,l=new Map,_=r.text.split("\n");for(var p in _){var d=_[p].split("\t");if("\n"!=d[0]&&0!=d[0].length&&""!=d[0].trim()&&"["!=d[0].trim().substring(0,1))if(0==u){for(var g in d)if(c=d[g].trim(),e.length>0)for(var S in e)e[S]==c&&(l.set(c,g),c+" ");else l.set(c,g),c+" ";u=!0}else{var T=[],A=!0,C=!1,f=void 0;try{for(var m,b=l[Symbol.iterator]();!(A=(m=b.next()).done);A=!0){var M=m.value,y=a(M,2),P=y[0];c=d[y[1]].trim(),T[P]=c,c+" "}}catch(t){C=!0,f=t}finally{try{!A&&b.return&&b.return()}finally{if(C)throw f}}o[h]=T,h++}}n._dataTable=new s;var R=n._dataTable.setTable(o);if(0!=R)return n._dataTable=null,void i(R,n._dataTable);i(0,n._dataTable)}else i(-1,n._dataTable)})},saveFile:function(t,e){}}),cc._RF.pop()},{DataTable:"DataTable"}],TutoMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3b537J2Id9FpZFEsJ2gek/R","TutoMgr");var a=t("Global"),s=t("PopupMgr"),n=t("SoundMgr"),r=t("LocaleMgr"),c=t("UnitMgr"),o=cc.Class({extends:cc.Component,properties:{aniSpine:sp.Skeleton,btnMask:cc.Node,viewNode:cc.Node,maskNode:cc.Node,actBtn:cc.Node,aniNode:cc.Node,helpCatNode:cc.Node,descLabel:cc.Label,_footAction:null,_dataMgr:null,_mergeBoardMgr:null,_rareBoardMgr:null,_topUIMgr:null,_botUIMgr:null,_playSceneMgr:null,_type:0,_proc:0,_btnFlag:!1},statics:{instance:null,TUTO_TYPE_FIRST:0,TUTO_TYPE_TOUCH_CAT_BUTTON:1,TUTO_TYPE_SHOP:2,TUTO_TYPE_GALLERY:3,TUTO_TYPE_RANDOMBOX:4,TUTO_TYPE_RARE_CAT_FIRST:5,TUTO_TYPE_CONTEST:6,TUTO_TYPE_QUEST:7},onLoad:function(){o.instance=this},start:function(){},endAni:function(){this.aniSpine.clearTrack(0),this.aniSpine.node.active=!1},endHelpCat:function(){this.helpCatNode.active=!1},endTouchTuto:function(){this.endAni(),this.helpCatNode.active=!1},setDataMgr:function(t,e,i,a,s,n){this._dataMgr=t,this._playSceneMgr=e,this._mergeBoardMgr=i.getComponent("MergeBoardMgr"),this._rareBoardMgr=a,this._botUIMgr=s,this._topUIMgr=n},startTutorialHandler:function(){this.startTutorial(this._type,this._proc)},startTutorial:function(t,e){switch(void 0!=t&&(this._type=t),void 0!=e&&(this._proc=e),this._type){case o.TUTO_TYPE_FIRST:switch(this._proc){case 0:case 1:this.btnMask.active=!0;var i=a.SAFE_BOT_UI;this.viewNode.active=!0,this.viewNode.x=0,this.viewNode.y=-525+i,this.viewNode.width=200,this.viewNode.height=200,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=-525+i,this.actBtn.width=200,this.actBtn.height=200,this.aniSpine.node.x=0,this.aniSpine.node.y=-520,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 2:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-85,this.viewNode.y=210,this.viewNode.width=380,this.viewNode.height=200,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=210,this.actBtn.width=190,this.actBtn.height=200,this.aniSpine.node.x=-10,this.aniSpine.node.y=150,this.aniSpine.node.rotation=90,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 3:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-100,this.viewNode.y=-255,this.viewNode.width=150,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=-100,this.actBtn.y=-255,this.actBtn.width=150,this.actBtn.height=80,this.aniSpine.node.x=-90,this.aniSpine.node.y=-265,this.aniSpine.node.rotation=0,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 4:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=0,this.viewNode.y=-150,this.viewNode.width=150,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=-150,this.actBtn.width=150,this.actBtn.height=80,this.aniSpine.node.x=10,this.aniSpine.node.y=-160,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 5:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=300,this.viewNode.y=25,this.viewNode.width=200,this.viewNode.height=200,this.actBtn.active=!0,this.actBtn.x=300,this.actBtn.y=25,this.actBtn.width=200,this.actBtn.height=200,this.aniSpine.node.x=270,this.aniSpine.node.y=30,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1,this._playSceneMgr.viewAdsCat(!0);break;case 6:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-100,this.viewNode.y=-120,this.viewNode.width=150,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=-100,this.actBtn.y=-120,this.actBtn.width=150,this.actBtn.height=80,this.aniSpine.node.x=-90,this.aniSpine.node.y=-130,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1}break;case o.TUTO_TYPE_TOUCH_CAT_BUTTON:switch(this._proc){case 0:this.aniSpine.node.x=0,this.aniSpine.node.y=-525,this.helpCatNode.x=0,this.helpCatNode.y=-335,this.helpCatNode.active=!0,this.descLabel.string=r.getString(3088),this.showTutorial()}break;case o.TUTO_TYPE_SHOP:switch(this._proc){case 0:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-170,this.viewNode.y=-560,this.viewNode.width=120,this.viewNode.height=120,this.actBtn.active=!0,this.actBtn.x=-170,this.actBtn.y=-560,this.actBtn.width=120,this.actBtn.height=120,this.aniSpine.node.x=-160,this.aniSpine.node.y=-580,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 1:case 3:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=200,this.viewNode.y=105,this.viewNode.width=120,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=200,this.actBtn.y=105,this.actBtn.width=120,this.actBtn.height=100,this.aniSpine.node.x=190,this.aniSpine.node.y=90,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 2:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=0,this.viewNode.y=302,this.viewNode.width=170,this.viewNode.height=55,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=302,this.actBtn.width=170,this.actBtn.height=55,this.aniSpine.node.x=0,this.aniSpine.node.y=290,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 4:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=330,this.viewNode.y=420,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=330,this.actBtn.y=420,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=305,this.aniSpine.node.y=400,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1}break;case o.TUTO_TYPE_GALLERY:switch(this._proc){case 0:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=170,this.viewNode.y=-560,this.viewNode.width=120,this.viewNode.height=120,this.actBtn.active=!0,this.actBtn.x=170,this.actBtn.y=-560,this.actBtn.width=120,this.actBtn.height=120,this.aniSpine.node.x=160,this.aniSpine.node.y=-580,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 1:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=190,this.viewNode.y=0,this.viewNode.width=150,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=190,this.actBtn.y=0,this.actBtn.width=150,this.actBtn.height=100,this.aniSpine.node.x=180,this.aniSpine.node.y=0,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 2:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=0,this.viewNode.y=-150,this.viewNode.width=150,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=-150,this.actBtn.width=150,this.actBtn.height=80,this.aniSpine.node.x=10,this.aniSpine.node.y=-160,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 3:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=330,this.viewNode.y=415,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=330,this.actBtn.y=415,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=300,this.aniSpine.node.y=400,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1}break;case o.TUTO_TYPE_RANDOMBOX:switch(this._proc){case 0:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-315,this.viewNode.y=415,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=-315,this.actBtn.y=415,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=-300,this.aniSpine.node.y=395,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 1:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-140,this.viewNode.y=-470,this.viewNode.width=230,this.viewNode.height=125,this.actBtn.active=!0,this.actBtn.x=-140,this.actBtn.y=-470,this.actBtn.width=230,this.actBtn.height=125,this.aniSpine.node.x=-130,this.aniSpine.node.y=-485,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 2:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=100,this.viewNode.y=-295,this.viewNode.width=150,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=100,this.actBtn.y=-295,this.actBtn.width=150,this.actBtn.height=80,this.aniSpine.node.x=110,this.aniSpine.node.y=-305,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(2.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 3:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=315,this.viewNode.y=585,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=315,this.actBtn.y=585,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=300,this.aniSpine.node.y=565,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1}break;case o.TUTO_TYPE_RARE_CAT_FIRST:switch(this._proc){case 0:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=296,this.viewNode.y=-560,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=296,this.actBtn.y=-560,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=280,this.aniSpine.node.y=-570,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 1:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-170,this.viewNode.y=-560,this.viewNode.width=120,this.viewNode.height=120,this.actBtn.active=!0,this.actBtn.x=-170,this.actBtn.y=-560,this.actBtn.width=120,this.actBtn.height=120,this.aniSpine.node.x=-160,this.aniSpine.node.y=-580,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 2:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=200,this.viewNode.y=105,this.viewNode.width=120,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=200,this.actBtn.y=105,this.actBtn.width=120,this.actBtn.height=100,this.aniSpine.node.x=190,this.aniSpine.node.y=90,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 3:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-85,this.viewNode.y=0,this.viewNode.width=200,this.viewNode.height=200,this.actBtn.active=!0,this.actBtn.x=-85,this.actBtn.y=0,this.actBtn.width=200,this.actBtn.height=200,this.aniSpine.node.x=-75,this.aniSpine.node.y=-5,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 4:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-270,this.viewNode.y=-545,this.viewNode.width=200,this.viewNode.height=200,this.actBtn.active=!0,this.actBtn.x=-270,this.actBtn.y=-545,this.actBtn.width=200,this.actBtn.height=200,this.aniSpine.node.x=-260,this.aniSpine.node.y=-570,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 5:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-315,this.viewNode.y=415,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=-315,this.actBtn.y=415,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=-300,this.aniSpine.node.y=395,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 6:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-300,this.viewNode.y=240,this.viewNode.width=200,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=-300,this.actBtn.y=240,this.actBtn.width=200,this.actBtn.height=100,this.aniSpine.node.x=-280,this.aniSpine.node.y=225,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 7:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-140,this.viewNode.y=-470,this.viewNode.width=230,this.viewNode.height=125,this.actBtn.active=!0,this.actBtn.x=-140,this.actBtn.y=-470,this.actBtn.width=230,this.actBtn.height=125,this.aniSpine.node.x=-130,this.aniSpine.node.y=-485,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 8:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=100,this.viewNode.y=-350,this.viewNode.width=150,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=100,this.actBtn.y=-350,this.actBtn.width=150,this.actBtn.height=80,this.aniSpine.node.x=90,this.aniSpine.node.y=-360,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(2.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 9:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=315,this.viewNode.y=585,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=315,this.actBtn.y=585,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=300,this.aniSpine.node.y=565,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 10:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-85,this.viewNode.y=15,this.viewNode.width=200,this.viewNode.height=200,this.actBtn.active=!0,this.actBtn.x=-85,this.actBtn.y=15,this.actBtn.width=200,this.actBtn.height=200,this.aniSpine.node.x=-75,this.aniSpine.node.y=-5,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 11:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=30,this.viewNode.y=15,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=30,this.actBtn.y=15,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=30,this.aniSpine.node.y=15,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 12:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-300,this.viewNode.y=-380,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=-300,this.actBtn.y=-380,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=-285,this.aniSpine.node.y=-395,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 13:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=0,this.viewNode.y=-280,this.viewNode.width=200,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=-280,this.actBtn.width=200,this.actBtn.height=100,this.aniSpine.node.x=10,this.aniSpine.node.y=-290,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 14:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=315,this.viewNode.y=590,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=315,this.actBtn.y=590,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=300,this.aniSpine.node.y=570,this.aniSpine.node.scaleX=-1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1}break;case o.TUTO_TYPE_CONTEST:switch(this._proc){case 0:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-300,this.viewNode.y=-565,this.viewNode.width=120,this.viewNode.height=120,this.actBtn.active=!0,this.actBtn.x=-300,this.actBtn.y=-565,this.actBtn.width=120,this.actBtn.height=120,this.aniSpine.node.x=-290,this.aniSpine.node.y=-580,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 1:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=125,this.viewNode.y=-140,this.viewNode.width=100,this.viewNode.height=200,this.actBtn.active=!0,this.actBtn.x=125,this.actBtn.y=-140,this.actBtn.width=100,this.actBtn.height=200,this.helpCatNode.y=100,this.helpCatNode.active=!0,this.descLabel.string=r.getString(3110,"<br/>","\n"),this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this))),this.maskNode.runAction(cc.sequence(cc.delayTime(3),cc.fadeTo(.3,0),cc.callFunc(this.endHelpCat,this),cc.delayTime(.6),cc.callFunc(this.startTutorialHandler,this))),this._btnFlag=!1;break;case 2:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=0,this.viewNode.y=-400,this.viewNode.width=160,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=-400,this.actBtn.width=160,this.actBtn.height=80,this.helpCatNode.y=-250,this.helpCatNode.active=!0,this.descLabel.string=r.getString(3111,"<br/>","\n"),this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this))),this.maskNode.runAction(cc.sequence(cc.delayTime(3),cc.fadeTo(.3,0),cc.callFunc(this.endHelpCat,this),cc.delayTime(.6),cc.callFunc(this.endTutorialHandler,this))),this._btnFlag=!1}break;case o.TUTO_TYPE_QUEST:switch(this._proc){case 0:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=-315,this.viewNode.y=205,this.viewNode.width=100,this.viewNode.height=100,this.actBtn.active=!0,this.actBtn.x=-315,this.actBtn.y=205,this.actBtn.width=100,this.actBtn.height=100,this.aniSpine.node.x=-300,this.aniSpine.node.y=190,this.aniSpine.node.scaleX=1,this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this),cc.delayTime(.3),cc.callFunc(this.activeBtn,this))),this._btnFlag=!1;break;case 1:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=0,this.viewNode.y=-325,this.viewNode.width=180,this.viewNode.height=80,this.actBtn.active=!0,this.actBtn.x=0,this.actBtn.y=-325,this.actBtn.width=180,this.actBtn.height=80,this.helpCatNode.y=0,this.helpCatNode.active=!0,this.descLabel.string=r.getString(3121,"<br/>","\n"),this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this))),this.maskNode.runAction(cc.sequence(cc.delayTime(3),cc.fadeTo(.3,0),cc.callFunc(this.endHelpCat,this),cc.delayTime(.6),cc.callFunc(this.startTutorialHandler,this))),this._btnFlag=!1;break;case 2:this.btnMask.active=!0,this.viewNode.active=!0,this.viewNode.x=170,this.viewNode.y=300,this.viewNode.width=120,this.viewNode.height=70,this.actBtn.active=!0,this.actBtn.x=170,this.actBtn.y=300,this.actBtn.width=120,this.actBtn.height=70,this.helpCatNode.y=480,this.helpCatNode.active=!0,this.descLabel.string=r.getString(3122,"<br/>","\n"),this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(.3),cc.fadeTo(.3,200),cc.callFunc(this.showTutorial,this))),this.maskNode.runAction(cc.sequence(cc.delayTime(3),cc.fadeTo(.3,0),cc.callFunc(this.endHelpCat,this),cc.delayTime(.6),cc.callFunc(this.endTutorialHandler,this))),this._btnFlag=!1}}},showTutorial:function(){switch(this._type){case o.TUTO_TYPE_FIRST:switch(this._proc){case 0:case 1:case 3:case 4:case 5:case 6:this.aniSpine.node.active=!0,this.aniSpine.timeScale=.5,this.aniSpine.setAnimation(0,"eff_catfoot_tutorial2",!0),n.playSound(n.audioBtn3);break;case 2:this.aniSpine.node.active=!0,this.aniSpine.setAnimation(0,"eff_catfoot_tutorial1",!1),this.mergeAni(),this.schedule(this.mergeAni,1.2),this.actBtn.on(cc.Node.EventType.TOUCH_START,this.touchStartHandler,this),this.actBtn.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveHandler,this),this.actBtn.on(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this.actBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndHandler,this)}break;case o.TUTO_TYPE_TOUCH_CAT_BUTTON:switch(this._proc){case 0:this.aniSpine.node.active=!0,this.aniSpine.timeScale=1,this.aniSpine.setAnimation(0,"eff_catfoot_tutorial2",!0)}break;case o.TUTO_TYPE_SHOP:case o.TUTO_TYPE_GALLERY:case o.TUTO_TYPE_RANDOMBOX:case o.TUTO_TYPE_RARE_CAT_FIRST:this.aniSpine.node.active=!0,this.aniSpine.timeScale=.5,this.aniSpine.setAnimation(0,"eff_catfoot_tutorial2",!0);break;case o.TUTO_TYPE_CONTEST:switch(this._proc){case 0:this.aniSpine.node.active=!0,this.aniSpine.timeScale=.5,this.aniSpine.setAnimation(0,"eff_catfoot_tutorial2",!0);break;case 1:this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_CONTEST,this._proc),this._dataMgr.saveData();break;case 2:this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_CONTEST,this._proc),this._dataMgr.saveData()}break;case o.TUTO_TYPE_QUEST:switch(this._proc){case 0:this.aniSpine.node.active=!0,this.aniSpine.timeScale=.5,this.aniSpine.setAnimation(0,"eff_catfoot_tutorial2",!0);break;case 1:this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_QUEST,this._proc),this._dataMgr.saveData();break;case 2:this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_QUEST,this._proc),this._dataMgr.saveData()}}},mergeAni:function(){this.aniSpine.node.opacity=0,this.aniSpine.node.x=-10,this._footAction=cc.sequence(cc.fadeIn(.3),cc.moveBy(.5,cc.v2(-175,0)),cc.fadeOut(.3),cc.callFunc(null,this)),this.aniSpine.node.runAction(this._footAction)},endTutorialHandler:function(){switch(this.btnMask.active=!1,this.viewNode.active=!1,this.actBtn.off(cc.Node.EventType.TOUCH_START,this.touchStartHandler,this),this.actBtn.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveHandler,this),this.actBtn.off(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this.actBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndHandler,this),this.actBtn.active=!1,this._type){case o.TUTO_TYPE_FIRST:this.tutoReward(),this.scheduleOnce(this.chkAttend,1);break;case o.TUTO_TYPE_RARE_CAT_FIRST:this.tutoReward(),this._playSceneMgr.updateLimitProductBtn()}},tutoReward:function(){this._playSceneMgr.showAlarm("\uc6b0\ud3b8\ud568\uc5d0 \ud29c\ud1a0\ub9ac\uc5bc \ubcf4\uc0c1\uc774 \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4",!0,0,this._playSceneMgr.UNDER),s.instance.getPopup(s.POPUP_POST).chkPostObj()},chkAttend:function(){var t=this._dataMgr.chkAttend();t[1]>0&&(n.playSound(n.audioBtn0),s.instance.showPopup(s.POPUP_ATTEND,t))},touchStartHandler:function(t){this._mergeBoardMgr.tutoTouchStartHandler(t,this._proc)},touchEndHandler:function(t){if(this._mergeBoardMgr.tutoTouchEndHandler(t,this._proc))switch(this.unschedule(this.mergeAni),this.aniSpine.node.stopAction(this._footAction),this.endAni(),this.aniSpine.node.opacity=255,this.actBtn.off(cc.Node.EventType.TOUCH_START,this.touchStartHandler,this),this.actBtn.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoveHandler,this),this.actBtn.off(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this.actBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEndHandler,this),this._btnFlag=!1,this._type){case o.TUTO_TYPE_FIRST:2==this._proc?this._proc=3:5==this._proc?this._proc=6:this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_FIRST,this._proc),this._dataMgr.saveData(),3==this._proc?this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(1.5),cc.callFunc(this.startTutorialHandler,this))):6==this._proc?this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(1.5),cc.callFunc(this.startTutorialHandler,this))):this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.callFunc(this.endTutorialHandler,this)))}},touchMoveHandler:function(t){this._mergeBoardMgr.touchMoveHandler(t)},activeBtn:function(){this._btnFlag=!0},clickBtn:function(t){if(this._btnFlag)switch(this._type){case o.TUTO_TYPE_FIRST:switch(this._proc){case 0:this._btnFlag=!1,this._dataMgr.setTutoProc(o.TUTO_TYPE_FIRST,1),this._botUIMgr.tutoMiddleBtn(),this._proc=1,this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 1:this._btnFlag=!1,this._dataMgr.setTutoProc(o.TUTO_TYPE_FIRST,2),this._botUIMgr.tutoMiddleBtn(),this._proc=2,this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 3:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_FIRST,this._proc);var e=c.instance.getUnitDataGrade(2),i=e.getNewRewardCoin(),n=e.getNewRewardCash(),r=[],h={};h.type=a.PAYMENT_COIN,h.count=2*i,r.push(h);var u={};u.type=a.PAYMENT_CASH_COIN,u.count=2*n,r.push(u),s.instance.preSchedulePopup(s.POPUP_REWARD,r,.8),this._dataMgr.addCoin(i),this._dataMgr.addCashCoin(n),s.instance.hidePopup(s.POPUP_NEWCAT),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 4:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_FIRST,this._proc),s.instance.hidePopup(s.POPUP_REWARD),this._playSceneMgr.viewAllCoin(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 5:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_FIRST,this._proc),this._botUIMgr.OnCatBtn(),this._playSceneMgr.outAdsCat(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 6:this._btnFlag=!1,this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_FIRST,this._proc),s.instance.getPopup(s.POPUP_ADS_CAT).tutoPlay(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.endTutorialHandler,this))),this._dataMgr.saveData(),this.endAni()}break;case o.TUTO_TYPE_TOUCH_CAT_BUTTON:break;case o.TUTO_TYPE_SHOP:switch(this._proc){case 0:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_SHOP,this._proc),this._botUIMgr.OnShopBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 1:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_SHOP,this._proc),s.instance.getPopup(s.POPUP_SHOP).tutoBuyUnit(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 2:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_SHOP,this._proc),s.instance.getPopup(s.POPUP_SHOP).tutoTap(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 3:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_SHOP,this._proc),s.instance.getPopup(s.POPUP_SHOP).tutoBuyBuff(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 4:this._btnFlag=!1,this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_SHOP,this._proc),s.instance.hidePopup(s.POPUP_SHOP),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.endTutorialHandler,this))),this._dataMgr.saveData(),this.endAni()}break;case o.TUTO_TYPE_GALLERY:switch(this._proc){case 0:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_GALLERY,this._proc),this._botUIMgr.OnGalleryBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 1:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_GALLERY,this._proc),s.instance.getPopup(s.POPUP_GALLERY).tutoGallery(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 2:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_GALLERY,this._proc),s.instance.hidePopup(s.POPUP_REWARD),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 3:this._btnFlag=!1,this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_GALLERY,this._proc),s.instance.hidePopup(s.POPUP_GALLERY),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.endTutorialHandler,this))),this._dataMgr.saveData(),this.endAni()}break;case o.TUTO_TYPE_RANDOMBOX:switch(this._proc){case 0:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RANDOMBOX,this._proc),this._topUIMgr.OnRandomBoxBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 1:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RANDOMBOX,this._proc),s.instance.getPopup(s.POPUP_RANDOM_BOX).OnFreeBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 2:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RANDOMBOX,this._proc),s.instance.getPopup(s.POPUP_RANDOM_BOX).OnOkBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 3:this._btnFlag=!1,this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RANDOMBOX,this._proc),s.instance.hidePopup(s.POPUP_RANDOM_BOX),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.endTutorialHandler,this))),this._dataMgr.saveData(),this.endAni()}break;case o.TUTO_TYPE_RARE_CAT_FIRST:switch(this._proc){case 0:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),this._botUIMgr.tutoTransBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 1:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),this._botUIMgr.OnShopBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 2:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.getPopup(s.POPUP_GOODS_SHOP).tutoBuyHouse(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 3:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),this._rareBoardMgr.OnRareCatBtn(0),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 4:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.getPopup(s.POPUP_HOTEL).tutoDeployCat(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 5:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),this._topUIMgr.OnRandomBoxBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 6:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.getPopup(s.POPUP_RANDOM_BOX).tutoTransTap(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 7:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.getPopup(s.POPUP_RANDOM_BOX).tutoAcc(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 8:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.getPopup(s.POPUP_RANDOM_BOX).OnOkBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this.endAni();break;case 9:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.hidePopup(s.POPUP_RANDOM_BOX),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 10:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),this._playSceneMgr.tutoRareCatBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 11:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),this._rareBoardMgr.tutoDressRoomBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 12:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.getPopup(s.POPUP_DRESS_ROOM).tutoOpenPopupEquip(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 13:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.getPopup(s.POPUP_ACC_EQUIP).OnOkBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni();break;case 14:this._btnFlag=!1,this._proc=-1,this._dataMgr.setTutoProc(o.TUTO_TYPE_RARE_CAT_FIRST,this._proc),s.instance.hidePopup(s.POPUP_DRESS_ROOM),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.endTutorialHandler,this))),this._dataMgr.saveData(),this.endAni()}break;case o.TUTO_TYPE_CONTEST:switch(this._proc){case 0:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_CONTEST,this._proc),this._botUIMgr.OnContestBtn(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni()}break;case o.TUTO_TYPE_QUEST:switch(this._proc){case 0:this._btnFlag=!1,this._proc+=1,this._dataMgr.setTutoProc(o.TUTO_TYPE_QUEST,this._proc),this._topUIMgr.OnQuest(),this.maskNode.runAction(cc.sequence(cc.fadeTo(.3,0),cc.delayTime(.3),cc.callFunc(this.startTutorialHandler,this))),this._dataMgr.saveData(),this.endAni()}}}});e.exports=o,cc._RF.pop()},{Global:"Global",LocaleMgr:"LocaleMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",UnitMgr:"UnitMgr"}],UIBotMgr:[function(t,e,i){"use strict";cc._RF.push(e,"a16cahky6VFW7Yft1xABX7s","UIBotMgr");var a=t("DataMgr"),s=t("PopupMgr"),n=t("Global"),r=t("PlaySceneMgr"),c=t("SoundMgr"),o=t("LocaleMgr"),h=t("TutoMgr");cc.Class({extends:cc.Component,properties:{mergeBoard:cc.Node,popUp:cc.Node,newCat:cc.Node,newGallery:cc.Node,createCat:cc.Node,transBtnNode:cc.Node,shopNode:cc.Node,galleryNode:cc.Node,contestNode:cc.Node,catHelpNode:cc.Node,mouseAlarmNode:cc.Node,font:cc.Font,ttfFont:cc.TTFFont,createCountLabel:cc.Label,catCountLabel:cc.Label,timerCountLabel:cc.Label,contestTimeLabel:cc.Label,iconCreateBg:cc.Node,iconArrange:cc.Node,timerBar:cc.Node,iconCreate:cc.Sprite,iconTransCat:cc.Sprite,iconShop:cc.Sprite,iconCat:cc.Sprite,spriteTransCat:[cc.SpriteFrame],spriteShop:[cc.SpriteFrame],spriteIconCat:[cc.SpriteFrame],touchEffect:sp.Skeleton,_catContestAlarmLabel:cc.Label,_createCatFailLabel:cc.Label,_contestTimeFailLabel:cc.Label,_page_state:0,_rarecatCount:0,_contestTimeLabel:"",_mergeBoardMgr:null,_popupMgr:null,_playSceneMgr:null,_catTimer:0,_catTimerBool:!1,_catTimerTime:0,_NORMAL_STATE:0,_RARE_STATE:1,_CAT_TIMER_DEFAULT:.035,_tutoTouchCatBtn:!1,_tutoTouchOn:!1},onLoad:function(){},start:function(){this._catContestAlarmLabel=o.getString(3511,"<br/>","\n"),this._createCatFailLabel=o.getString(3010),this._contestTimeFailLabel=o.getString(3087),this._contestTimeLabel=o.getString(1090),this.initAll(),a.getGenerableCount()<a.getGenerableMax()&&(this._catTimerBool=!0),this.schedule(this.updateContestTimerLabel,1),this.updateShopBtn(),this.updateGalleryBtn(),this.updateContestBtn(),this.updateTransBtn(),this.chkCatHelp(),this.chkMouseToy(!1)},initAll:function(){var t=this;this._mergeBoardMgr=this.mergeBoard.getComponent("MergeBoardMgr"),this._popupMgr=this.popUp.getComponent("PopupMgr"),this._playSceneMgr=r.instance,this.initFont(),this.initLabel(),this._catTimer=this._CAT_TIMER_DEFAULT,this.updateCatTime(),this._page_state=a.getPageIndex(),this.updateTransSprite(),this.updateMiddleSprite(),this.touchEffect.setCompleteListener(function(e){console.log(e.animation.name+" anim end."),t.touchEffect.node.active=!1})},initFont:function(){cc.log("\ud3f0\ud2b8 \uc138\ud305")},initLabel:function(){this.refreshGenerableLabel()},refreshGenerableLabel:function(){this.createCountLabel.string=a.getGenerableCount()+"/"+a.getGenerableMax()},refreshRareCatLabel:function(){this.createCountLabel.string=this._playSceneMgr.getRareCatCount()},updateCatTime:function(){var t=a.getUserBuyTime();this._catTimerTime=a.getNormalCatUpgradeTable(t).getSpeedTime},setCatCreateBool:function(t){this._catTimerBool=t,this.timerBar.active=!!t},chkCatHelp:function(){this._page_state==this._NORMAL_STATE?a.chkRareCatCareBool()?(this.catHelpNode.active=!0,this.schedule(this.aniHelpCat,3)):(this.catHelpNode.active=!1,this.unschedule(this.aniHelpCat)):(this.catHelpNode.active=!1,this.unschedule(this.aniHelpCat))},aniHelpCat:function(){this.catHelpNode.y=70,this.catHelpNode.runAction(cc.sequence(cc.moveBy(.2,cc.v2(0,20)),cc.moveBy(.2,cc.v2(0,-20)),cc.moveBy(.2,cc.v2(0,20)),cc.moveBy(.2,cc.v2(0,-20))))},chkMouseToy:function(){if(this._page_state==this._RARE_STATE){var t=this._playSceneMgr.getMouseBool();this.mouseAlarmNode.active=!!t}else this.mouseAlarmNode.active=!1},OnCatBtn:function(){c.playSound(c.audioBtn0),this._popupMgr.showPopup(s.POPUP_ADS_CAT)},OnShopBtn:function(){0==a.getPageIndex()?this._popupMgr.showPopup(s.POPUP_SHOP):this._popupMgr.showPopup(s.POPUP_GOODS_SHOP,0)},OnMiddleBtn:function(){this.touchEffect.node.active=!0,this.touchEffect.setAnimation(0,"making_btn_touch",!0),this._page_state==this._NORMAL_STATE?(this._tutoTouchCatBtn&&(this._tutoTouchOn=!0),this.createUnit()):this._popupMgr.showPopup(s.POPUP_HOTEL,!0)},OntransPage:function(){this._popupMgr.hideRareCatBtn(),this.updatePageIdx(),this._page_state=a.getPageIndex(),this.updateMiddleSprite(),this.updateTransSprite(),this.updateTimerCountLabel(),this.chkCatHelp(),this.chkMouseToy(),0==a.getTutoProc(h.TUTO_TYPE_RARE_CAT_FIRST)&&a.setTutoProc(h.TUTO_TYPE_RARE_CAT_FIRST,-1)},OnContestBtn:function(){if(0==a.getContestTime()){var t=a.getFirstCatGrade();if(null!=t){if(-1==this._playSceneMgr.getContestKind()){var e=Math.floor(3*Math.random());this._playSceneMgr.setContestKind(e)}this._popupMgr.showPopup(s.POPUP_CONTEST,t)}else this._playSceneMgr.showAlarm(this._catContestAlarmLabel,0,!1,this._playSceneMgr.UNDER)}else this._playSceneMgr.showAlarm(this._contestTimeFailLabel,!1,-430,this._playSceneMgr.UNDER)},OnGalleryBtn:function(){this._popupMgr.showPopup(s.POPUP_GALLERY)},updateTransSprite:function(){this._page_state=a.getPageIndex(),this.iconTransCat.spriteFrame=this.spriteTransCat[this._page_state],this.iconShop.spriteFrame=this.spriteShop[this._page_state],this.iconCat.spriteFrame=this.spriteIconCat[this._page_state]},updateMiddleSprite:function(){this._page_state==this._NORMAL_STATE?(this.iconCreateBg.opacity=255,this.iconArrange.opacity=0,this.refreshGenerableLabel()):(this.iconCreateBg.opacity=0,this.iconArrange.opacity=255,this.refreshRareCatLabel())},updatePageIdx:function(){this._page_state==this._NORMAL_STATE?(this.closeNewCatIcon(),this._playSceneMgr.transRarePage(),a.setPageIndex(1),c.playSound(c.audioGoRare)):(this._playSceneMgr.transNormalPage(),a.setPageIndex(0),c.playSound(c.audioGoRare))},updateTimerCountLabel:function(){this._page_state==this._NORMAL_STATE?this._catTimerBool&&(this.timerBar.active=!0):this.timerBar.active=!1},updateShopBtn:function(){a.chkContentOpen(n.CONTENT_PET_SHOP)?this.shopNode.active=!0:this.shopNode.active=!1},updateGalleryBtn:function(){a.chkContentOpen(n.CONTNET_GALLERY)?this.galleryNode.active=!0:this.galleryNode.active=!1},updateContestBtn:function(){a.chkContentOpen(n.CONTENT_CONTEST)?this.contestNode.active=!0:this.contestNode.active=!1},updateTransBtn:function(){0!=a.getRareCatCount()?this.transBtnNode.active=!0:this.transBtnNode.active=!1},viewNewCatIcon:function(){this.newCat.active=!0},closeNewCatIcon:function(){this.newCat.active=!1},viewNewGallery:function(){this.newGallery.active=!0},closeNewGallery:function(){this.newGallery.active=!1},tutoMiddleBtn:function(){this.touchEffect.node.active=!0,this.touchEffect.setAnimation(0,"making_btn_touch",!0),this.createCat.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1),cc.callFunc(null,this))),this.createUnit()},tutoTransBtn:function(){this.OntransPage(),this.transBtnNode.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1),cc.callFunc(null,this)))},createUnit:function(){if(c.playSound(c.audioBtn2),a.getEmptyMergeSlot()>-1)if(a.minusGenerableCount()){0==a.getGenerableCount()&&0==a.getTutoProc(h.TUTO_TYPE_TOUCH_CAT_BUTTON)&&(h.instance.startTutorial(h.TUTO_TYPE_TOUCH_CAT_BUTTON,a.getTutoProc(h.TUTO_TYPE_TOUCH_CAT_BUTTON)),this._tutoTouchCatBtn=!0),this.refreshGenerableLabel(),this._catTimerBool=!0,this.timerBar.active=!0;var t=n.UNIT_CREATE_GRADE,e=!1;if(10==n.UNIT_CREATE_GRADE);else{var i=a.getUserBuyCatLv2();a.getNormalCatUpgradeTable(i).catLvTwoChance/1e4>Math.random()&&(t+=1,e=!0)}a.incQuestCount(n.QUEST_PRODUCTION,1),this._mergeBoardMgr.makeUnit(t,e),a.saveData()}else this._catTimer+=1,this.timerCountLabel.string=Math.round(this._catTimerTime-this._catTimer);else this._playSceneMgr.showAlarm(this._createCatFailLabel,!1,-430,this._playSceneMgr.UNDER)},update:function(t){this._catTimerBool&&(this._catTimer+=t,this.timerCountLabel.string=Math.round(this._catTimerTime-this._catTimer),this.iconCreate.fillRange=this._catTimer/this._catTimerTime+this._CAT_TIMER_DEFAULT,this._catTimer>=this._catTimerTime&&(this._catTimer=this._CAT_TIMER_DEFAULT,this._catTimerBool=a.addGenerableCount(),this._catTimerBool||(this.timerBar.active=!1,this._tutoTouchCatBtn&&(h.instance.endTouchTuto(),this._tutoTouchCatBtn=!1,this._tutoTouchOn=!1,a.setTutoProc(h.TUTO_TYPE_TOUCH_CAT_BUTTON,-1))),this._page_state==this._NORMAL_STATE&&this.refreshGenerableLabel(),this.updateCatTime(),1==this._tutoTouchCatBtn&&1==this._tutoTouchOn&&(h.instance.endTouchTuto(),this._tutoTouchCatBtn=!1,this._tutoTouchOn=!1,a.setTutoProc(h.TUTO_TYPE_TOUCH_CAT_BUTTON,-1))))},updateContestTimerLabel:function(){var t=a.getContestTime();if(t>0){var e=Math.floor(t/60),i=t%60;i<10&&(i="0"+i),e<10&&(e="0"+e),this.contestTimeLabel.string=e+":"+i}else this.contestTimeLabel.string=this._contestTimeLabel}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr"}],UITopMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3fa9cd48qhHxpRnU6VrOZoL","UITopMgr");var a=t("DataMgr"),s=t("Global"),n=t("PlaySceneMgr"),r=t("PopupMgr"),c=t("SoundMgr"),o=t("LocaleMgr"),h=t("TutoMgr");cc.Class({extends:cc.Component,properties:{expProgressBar:cc.ProgressBar,newDaily:cc.Node,newPost:cc.Node,newRandomBox:cc.Node,newQuest:cc.Node,randomBoxBtn:cc.Node,dailyBtn:cc.Node,questBtn:cc.Node,postBtn:cc.Node,limitProductBtn:cc.Node,_randomBoxSc:null,_dailySc:null,_questSc:null,_postSc:null,_guideSc:null,_limitProductSc:null,lvLabel:cc.Label,expLabel:cc.Label,coinLabel:cc.Label,rareCoinLabel:cc.Label,cashCoinLabel:cc.Label,coinPerSecondLabel:cc.Label,rareCoinPerSecondLabel:cc.Label,rewardTimerLabel:cc.Label,adsBuff:cc.Node,adsBufftimeLabel:cc.Label,adsBuff2:cc.Node,adsBufftimeLabel2:cc.Label,guideNode:cc.Node,guideEffect:sp.Skeleton,guideStarEffect:sp.Skeleton,guideLabel:cc.Label,guideRewardLabel:cc.Label,guideRewardSprite:cc.Sprite,guideRewardBtnSprite:cc.Sprite,guideButton:cc.Button,_adsTimer:0,_rewardTimerLabel:"",_rewardEndLabel:"",_playSceneMgr:null},start:function(){this._playSceneMgr=n.instance,this._rewardTimerLabel=o.getString(1002),this._rewardEndLabel=o.getString(1091),this._randomBoxSc=this.randomBoxBtn.getComponent("IconAni"),this._dailySc=this.dailyBtn.getComponent("IconAni"),this._questSc=this.questBtn.getComponent("IconAni"),this._postSc=this.postBtn.getComponent("IconAni"),this._guideSc=this.guideRewardSprite.node.getComponent("IconAni"),this._limitProductSc=this.limitProductBtn.getComponent("IconAni"),this._limitProductSc.startAni(),this.adsBuff.active=!1,this.adsBuff2.active=!1,this.viewAllCoin(),this.updateLvExp(a.getUserLv(),a.getExpPer()),this._adsTimer=a.getUserCatBuffTime(),this._adsTimer>0&&this.scheduleOnce(this.continuCatBuff,.11),this.schedule(this.updateRewardTimerLabel,1),this.schedule(this.updateRandomBoxNew,1),this.updateRandomBoxBtn(),this.updateQuestBtn(),this.updateLimitProductBtn()},viewAllCoin:function(){this.viewCoin(),this.viewRareCoin(),this.viewCashCoin()},viewCoin:function(){this.coinLabel.string=s.getNumToType(a.getCoin())},viewRareCoin:function(){this.rareCoinLabel.string=s.getNumToType(a.getRareCoin())},viewCashCoin:function(){this.cashCoinLabel.string=s.getNumToType(a.getCashCoin())},viewPerSecondCoin:function(t){this.coinPerSecondLabel.string=t.toFixed(1)+"/s"},viewPerSecondRareCoin:function(t){this.rareCoinPerSecondLabel.string=t.toFixed(2)+"/s"},updateLvExp:function(t,e,i,a){1==i||(this.lvLabel.string=t,this.expProgressBar.progress=e,e<0&&(e=0),this.expLabel.string=(100*e).toFixed(1)+"%")},transTimeToString:function(){var t=this._adsTimer,e=parseInt(t/60),i=t-60*e;return(e<10?"0"+e:e)+":"+(i<10?"0"+i:i)},startCatBuff:function(){this.adsBuff.active=!0,this.adsBuff2.active=!0;var t=a.getUserBuyBuffInc(),e=a.getNormalCatUpgradeTable(t).increaseCoinbuffTime;this._adsTimer=e,this.adsBufftimeLabel.string=this.transTimeToString(),this.adsBufftimeLabel2.string=this.transTimeToString(),n.instance.setAdsCatBuff(n.instance.ADS_BUFF_ON),this.unschedule(this.catBuffPerSecond),this.schedule(this.catBuffPerSecond,1)},continuCatBuff:function(){this.adsBuff.active=!0,this.adsBufftimeLabel.string=this.transTimeToString(),this.adsBuff2.active=!0,this.adsBufftimeLabel2.string=this.transTimeToString(),n.instance.setAdsCatBuff(n.instance.ADS_BUFF_ON),this.unschedule(this.catBuffPerSecond),this.schedule(this.catBuffPerSecond,1)},upgradeBuffTime:function(){var t=a.getUserBuyBuffInc(),e=a.getNormalCatUpgradeTable(t-1).increaseCoinbuffTime,i=a.getNormalCatUpgradeTable(t).increaseCoinbuffTime-e;this._adsTimer+=i},catBuffPerSecond:function(){this._adsTimer--,this.adsBufftimeLabel.string=this.transTimeToString(),this.adsBufftimeLabel2.string=this.transTimeToString(),this._adsTimer<=0&&(this._adsTimer=0,n.instance.setAdsCatBuff(n.instance.ADS_BUFF_OFF),this.unschedule(this.catBuffPerSecond),this.adsBuff.active=!1,this.adsBuff2.active=!1)},getadsTime:function(){return this._adsTimer},setadsTime:function(t){this._adsTimer=t},OnCashBtn:function(){c.playSound(c.audioBtn0);var t=r.instance.getPopup(r.POPUP_CASHSHOP);r.instance.showPopup(r.POPUP_CASHSHOP,t._TAP_CURRENCY)},OnSetUpBtn:function(){c.playSound(c.audioBtn0),r.instance.showPopup(r.POPUP_SETUP)},OnCashShopBtn:function(){c.playSound(c.audioBtn0);var t=r.instance.getPopup(r.POPUP_CASHSHOP);r.instance.showPopup(r.POPUP_CASHSHOP,t._TAP_PACKAGE)},OnRandomBoxBtn:function(){c.playSound(c.audioBtn0),r.instance.showPopup(r.POPUP_RANDOM_BOX)},OnDailyRewardBtn:function(){c.playSound(c.audioBtn0),r.instance.showPopup(r.POPUP_DAILY_ACCESS)},OnMailBox:function(){c.playSound(c.audioBtn0),r.instance.showPopup(r.POPUP_POST)},OnQuest:function(){c.playSound(c.audioBtn0),r.instance.showPopup(r.POPUP_QUEST)},OnLimitProduct:function(){c.playSound(c.audioBtn0),r.instance.showPopup(r.POPUP_LIMIT_PRODUCT)},updateRandomBoxBtn:function(){a.chkContentOpen(s.CONTENT_GACHA)?this.randomBoxBtn.active=!0:this.randomBoxBtn.active=!1},updateQuestBtn:function(){a.chkContentOpen(s.CONTENT_QUEST)?this.questBtn.active=!0:this.questBtn.active=!1},updateLimitProductBtn:function(){var t=a.getLimitProductData().getIdx();0==a.getShopLimitItemData(t)&&-1==a.getTutoProc(h.TUTO_TYPE_RARE_CAT_FIRST)?this.limitProductBtn.active=!0:this.limitProductBtn.active=!1},viewNewPost:function(){this.newPost.active=!0,this._postSc.startAni()},closeNewPost:function(){this.newPost.active=!1,this._postSc.stopAni()},updateGuide:function(){var t=a.getUserGuideKey(),e=a.getUserGuideCount(),i=!0;if(0==e&&(i=a.setNextGuideKey(),t=a.getUserGuideKey()),i){var n=a.getGuideData(t);this.guideNode.active=!0;var r=n.getGuideCount(),h=n.getNameTextKey(),u=n.getRewardType(),l=n.getRewardValue(),_=n.getGuideCode();switch(_){case s.GUIDE_NORMAL_CAT_4LV_MADE:a.getNowMaxUnitGrade()>=4&&(e=1,a.setUserGuideCount(e));break;case s.GUIDE_NORMAL_CAT_6LV_MADE:a.getNowMaxUnitGrade()>=6&&(e=1,a.setUserGuideCount(e));break;case s.GUIDE_NORMAL_CAT_8LV_MADE:a.getNowMaxUnitGrade()>=8&&(e=1,a.setUserGuideCount(e));break;case s.GUIDE_NORMAL_CAT_10LV_MADE:a.getNowMaxUnitGrade()>=10&&(e=1,a.setUserGuideCount(e));break;case s.GUIDE_GALLERY:a.getGallerySuccseeCount()>=1&&(e=1,a.setUserGuideCount(e))}this.guideLabel.string=o.getString(h,"<br/>","\n")+" ("+e+"/"+r+")",this.guideRewardLabel.string=s.getNumToType(l),this.guideRewardSprite.spriteFrame=this._playSceneMgr.getCurrencySprite(u),e==r?this.guideEffect.node.activeInHierarchy||(this.guideEffect.node.active=!0,this.guideStarEffect.node.active=!0,this.guideEffect.setAnimation(0,"buff_back_eff",!0),this.guideStarEffect.setAnimation(0,"btn_particle_eff_s",!0),this._guideSc.startAni(),this.guideRewardBtnSprite.spriteFrame=this._playSceneMgr.getSpriteToUI("btn_round3"),this.guideButton.interactable=!0,c.playSound(c.audioGuideSuccess)):(this.guideEffect.node.active=!1,this.guideStarEffect.node.active=!1,this.guideEffect.clearTrack(0),this.guideStarEffect.clearTrack(0),this._guideSc.stopAni(),this.guideRewardBtnSprite.spriteFrame=this._playSceneMgr.getSpriteToUI("btn_round2"),this.guideButton.interactable=!1),this._playSceneMgr.setGuideType(_)}else this.guideNode.active=!1,this._playSceneMgr.setGuideType(s.GUIDE_NULL)},OnGuideRewardBtn:function(){var t=a.getUserGuideKey();c.playSound(c.audioBtn0);var e=a.getGuideData(t),i=e.getRewardType(),s=e.getRewardValue(),n=[],o=a.setRewardData(i,s);n.push(o),r.instance.showPopup(r.POPUP_REWARD,n,0),a.setGuideComplete(t),a.setUserGuideCount(0),this.updateGuide()},updateRewardTimerLabel:function(){var t=a.getDailyRewardLeftTime();if(-1==t)this.rewardTimerLabel.string=this._rewardEndLabel,this.newDaily.active=!1,this._dailySc.stopAni();else if(0==t)this.newDaily.active||(this.rewardTimerLabel.string=this._rewardTimerLabel,this.newDaily.active=!0,this._dailySc.startAni());else{var e=Math.floor(t/60),i=t%60;i<10&&(i="0"+i),e<10&&(e="0"+e),this.rewardTimerLabel.string=e+":"+i,this.newDaily.active=!1,this._dailySc.stopAni()}},updateRandomBoxNew:function(){var t=!1,e=!1,i=!1,n=r.instance.getPopup(r.POPUP_RANDOM_BOX);(a.getUserRandomBoxCount()>0||a.getRandomBoxAdsTime()<=0)&&(e=!0),a.getNowMaxUnitGrade()>=s.RARE_CAT_MIN&&(a.getUserRandomBoxAccCount()>0||a.getRandomBoxAccAdsTime()<=0)&&(i=!0),(e||i)&&(t=!0),!this.newRandomBox.activeInHierarchy&&t?this._randomBoxSc.startAni():this.newRandomBox.activeInHierarchy&&!t&&this._randomBoxSc.stopAni(),this.newRandomBox.active=t,n.updateNewCat(e),n.updateNewAcc(i)},updateQuestNewMark:function(){this.newQuest&&(a.chkClearQuest()?(this.newQuest.active=!0,this._questSc.startAni()):(this.newQuest.active=!1,this._questSc.stopAni()))}}),cc._RF.pop()},{DataMgr:"DataMgr",Global:"Global",LocaleMgr:"LocaleMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr",SoundMgr:"SoundMgr",TutoMgr:"TutoMgr"}],UnitData:[function(t,e,i){"use strict";cc._RF.push(e,"1d944PUgnpDCby6vAamKen0","UnitData");var a=t("Global");cc.Class({properties:{_dataMgr:null,_unitMgr:null,_charCode:"",_charGrade:0,_textKey:0,_explainTextKey:0,_getCoin:0,_getCoinTime:0,_catPrice:0,_catPriceIncrease:0,_getMergeExp:0,_galleryType:0,_getNewCatCoin:0,_getNewCatCash:0,_spineData:null,_spineSkin:"",_spineAni:""},setDataMgr:function(t,e){this._dataMgr=t,this._unitMgr=e},initUnitData:function(t,e,i,s,n,r,c,o,h,u,l,_,p){this._charGrade=t,this._charCode=e,this._textKey=i,this._explainTextKey=s,this._getCoin=parseInt(a.getTypeToNum(n,0)),this._getCoinTime=parseInt(c),this._getMergeExp=parseInt(o),this._getNewCatCoin=parseInt(h),this._getNewCatCash=parseInt(u),this._catPrice=parseInt(l),this._catPriceIncrease=parseInt(_),this._galleryType=p},initLinkData:function(t,e,i){this._spineData=t,this._spineSkin=e,this._spineAni=i},getUnitCode:function(){return this._charCode},getUnitGrade:function(){return this._charGrade},getUnitTextKey:function(){return this._textKey},getExplainTextKey:function(){return this._explainTextKey},getUnitTribe:function(){return this._unitTribe},getUnitATB:function(){return this._unitATB},getUnitPrice:function(t){return Math.floor(this._catPrice*Math.pow(.01*this._catPriceIncrease,t-1)*1)},getSpineData:function(){return this._spineData},getSpineSkin:function(){return this._spineSkin},getSpineAni:function(){return this._spineAni},getExp:function(){return this._getMergeExp},getGetCoin:function(){return this._getCoin},getGetCoinTime:function(){return this._getCoinTime},getMergeCoin:function(){return this._mergeCoin},getNewRewardCoin:function(){return this._getNewCatCoin},getNewRewardCash:function(){return this._getNewCatCash},getGalleryType:function(){return this._galleryType}}),cc._RF.pop()},{Global:"Global"}],UnitMgr:[function(t,e,i){"use strict";cc._RF.push(e,"c100eDc7oJF2JbzxfzEn9v/","UnitMgr");t("Global");var a=t("UnitData"),s=cc.Class({extends:cc.Component,properties:{_unitDataTable:null,_dataMgr:null,atlasChar:cc.SpriteAtlas,atlasItem:cc.SpriteAtlas,unitSpineDataArr:[sp.SkeletonData]},statics:{instance:null},onLoad:function(){s.instance=this,cc.game.addPersistRootNode(this.node)},onDestroy:function(){},setDataMgr:function(t){this._dataMgr=t},initUnitData:function(t){this._unitDataTable=new Array;for(var e=0;e<t.getRecordNum();e++){var i=new a;i.setDataMgr(this._dataMgr,this);var s=this._dataMgr.getGalleyType(t.getRecordValue(e,"Gallery_Type"));i.initUnitData(parseInt(t.getRecordValue(e,"Char_Grade")),t.getRecordValue(e,"Char_Code"),parseInt(t.getRecordValue(e,"TextKey")),parseInt(t.getRecordValue(e,"Explain_Text_Key")),t.getRecordValue(e,"Get_Gold"),t.getRecordValue(e,"Get_Gold_Type"),t.getRecordValue(e,"Get_Gold_Time"),t.getRecordValue(e,"Get_Merge_Exp"),t.getRecordValue(e,"Get_New_Cat_Coin"),t.getRecordValue(e,"Get_New_Cat_Cash"),t.getRecordValue(e,"BUY_CAT"),t.getRecordValue(e,"BUY_INCREASE_CAT"),s);var n=this.getUnitSkinData(i.getUnitGrade());i.initLinkData(n[0],n[1],n[2]),this._unitDataTable[e]=i}},getUnitSpriteNameForGrade:function(t){return this._unitDataTable[t-1].getUnitCode()},getUnitSkinData:function(t){switch(t){case 1:return[this.unitSpineDataArr[0],"cat_01","scare_1"];case 2:return[this.unitSpineDataArr[1],"cat_02","roll_2"];case 3:return[this.unitSpineDataArr[2],"cat_03","sleep_3"];case 4:return[this.unitSpineDataArr[3],"cat_04","toy_4"];case 5:return[this.unitSpineDataArr[4],"cat_05","toy_05"];case 6:return[this.unitSpineDataArr[0],"cat_06","kneading_6"];case 7:return[this.unitSpineDataArr[1],"cat_07","tailswing_7"];case 8:return[this.unitSpineDataArr[2],"cat_08","purring_8"];case 9:return[this.unitSpineDataArr[3],"cat_09","tailswing_9"];case 10:return[this.unitSpineDataArr[4],"cat_10","ball_10"]}return null},getUnitThumbPosGrade:function(t){return this.getUnitThumbPos(this.getUnitDataGrade(t).getUnitCode())},getUnitDataGrade:function(t){return this._unitDataTable[t-1]},getUnitSpriteForGrade:function(t){return t<10?this.atlasChar.getSpriteFrame("CAT_0"+t):this.atlasChar.getSpriteFrame("CAT_"+t)},getItemSprite:function(t){switch(t){case 208:return this.atlasItem.getSpriteFrame("shop_item6");case 209:return this.atlasItem.getSpriteFrame("shop_item7")}},getUnitThumbPos:function(t){return[0,0]}});cc._RF.pop()},{Global:"Global",UnitData:"UnitData"}],rareCatBtn:[function(t,e,i){"use strict";cc._RF.push(e,"11562GTdx5BMI+84+57jeFr","rareCatBtn");var a=t("DataMgr"),s=t("PopupMgr"),n=t("PlaySceneMgr");cc.Class({extends:cc.Component,properties:{careIconNode:cc.Node,accIconNode:cc.Node,hotelIconNode:cc.Node,selectedCatNode:cc.Node,_Horizental:1,_catGrade:0,_carePos:null,_accPos:null,_hotelPos:null,_playSceneMgr:null,_selectedCat:null,_slot:null,_rareBoard:null},start:function(){this._playSceneMgr=n.instance,this._selectedCat=this.selectedCatNode.getComponent("SelectedCat")},init:function(t,e,i,a){this._slot=t,this._catGrade=e,this._rareBoard=a,this.careIconNode.stopAllActions(),this.accIconNode.stopAllActions(),this.hotelIconNode.stopAllActions(),this._carePos=cc.v2(95,110),this._accPos=cc.v2(120,20),this._hotelPos=cc.v2(95,-70),this.node.position=i,this.node.active=!0,this.careIconNode.opacity=0,this.accIconNode.opacity=0,this.hotelIconNode.opacity=0,i.x>=0?this._Horizental=-1:this._Horizental=1,1==this._Horizental?(this.careIconNode.position=cc.v2(this._carePos.x-20,this._carePos.y),this.accIconNode.position=cc.v2(this._accPos.x-20,this._accPos.y),this.hotelIconNode.position=cc.v2(this._hotelPos.x-20,this._hotelPos.y)):(this.careIconNode.position=cc.v2(20-this._carePos.x,this._carePos.y),this.accIconNode.position=cc.v2(20-this._accPos.x,this._accPos.y),this.hotelIconNode.position=cc.v2(20-this._hotelPos.x,this._hotelPos.y));var s=cc.spawn(cc.moveBy(.5,cc.v2(20*this._Horizental,0)).easing(cc.easeCircleActionOut()),cc.fadeTo(.5,255)),n=cc.spawn(cc.moveBy(.5,cc.v2(20*this._Horizental,0)).easing(cc.easeCircleActionOut()),cc.fadeTo(.5,255)),r=cc.spawn(cc.moveBy(.5,cc.v2(20*this._Horizental,0)).easing(cc.easeCircleActionOut()),cc.fadeTo(.5,255));this.careIconNode.runAction(cc.sequence(s,cc.callFunc(null,this))),this.accIconNode.runAction(cc.sequence(cc.delayTime(.1),n,cc.callFunc(null,this))),this.hotelIconNode.runAction(cc.sequence(cc.delayTime(.2),r,cc.callFunc(this.unsetBtnLock,this)))},unsetBtnLock:function(){this._btnLockFlag=!1},endAni:function(){this.node.active=!1},closeAni:function(){var t=cc.spawn(cc.moveBy(.3,cc.v2(50*this._Horizental,0)).easing(cc.easeCircleActionIn()),cc.fadeTo(.3,0)),e=cc.spawn(cc.moveBy(.3,cc.v2(50*this._Horizental,0)).easing(cc.easeCircleActionIn()),cc.fadeTo(.3,0)),i=cc.spawn(cc.moveBy(.3,cc.v2(50*this._Horizental,0)).easing(cc.easeCircleActionIn()),cc.fadeTo(.3,0));this.careIconNode.runAction(cc.sequence(t,cc.callFunc(null,this))),this.accIconNode.runAction(cc.sequence(cc.delayTime(.01),e,cc.callFunc(null,this))),this.hotelIconNode.runAction(cc.sequence(cc.delayTime(.02),i,cc.callFunc(this.endAni,this)))},OnCareBtn:function(){s.instance.showPopup(s.POPUP_CARE,this._catGrade,.3)},OnAccBtn:function(){s.instance.showPopup(s.POPUP_DRESS_ROOM,this._catGrade,.1)},OnImoticon:function(t,e){var i=parseInt(e),r=a.getRareSlotNum(i).catGrade;n.instance.setSelectedSlot(i),s.instance.showPopup(s.POPUP_CARE,r,.3)},OnBgBtn:function(){this.node.activeInHierarchy&&this.closeAni()},OnHotelBtn:function(){s.instance.showPopup(s.POPUP_HOTEL),this._selectedCat.moveUp(this._slot,this._rareBoard)}}),cc._RF.pop()},{DataMgr:"DataMgr",PlaySceneMgr:"PlaySceneMgr",PopupMgr:"PopupMgr"}],rareCatSlotObj:[function(t,e,i){"use strict";cc._RF.push(e,"9336d0/nehHIoi3Q7XOL0yy","rareCatSlotObj");var a=t("UnitMgr"),s=t("LocaleMgr"),n=t("DataMgr");cc.Class({extends:cc.Component,properties:{rareCatSkeleton:sp.Skeleton,catSprite:cc.Sprite,catGradeSprite:cc.Sprite,catNode:cc.Node,nameLabel:cc.Label,lvLabel:cc.Label,rareCatDeploy:cc.SpriteFrame,rareCatAdd:cc.SpriteFrame,rareIcon:cc.SpriteFrame,superRareIcon:cc.SpriteFrame,ultraRareIcon:cc.SpriteFrame,_grade:0,_accSlotHat:null,_accSlotNeck:null,_rareCatData:null,_popupCatHotel:null,_catRank:""},init:function(t,e,i){cc.log(e),this._rareCatData=e,this._popupCatHotel=i,this._grade=t,this.catSprite.spriteFrame=a.instance.getUnitSpriteForGrade(t);var r=e.getUnitNameTextKey();this.nameLabel.string=s.getString(r);var c=n.getRareCatData(this._grade);switch(this.lvLabel.string="Lv. "+c.getFriendshipLv(),this._catRank=e.getRank(),this._catRank){case"R":this.catGradeSprite.spriteFrame=this.rareIcon;break;case"SR":this.catGradeSprite.spriteFrame=this.superRareIcon;break;case"UR":this.catGradeSprite.spriteFrame=this.ultraRareIcon}this.scheduleOnce(this.setCatSpine,.3)},setCatSpine:function(){var t=n.getRareCatData(this._grade),e=t.getAccHatPK(),i=t.getAccNeckPK(),a=n.getUserHatAccData(e),s=n.getUserNeckAccData(i);if(this.rareCatSkeleton.node.active=!0,this.rareCatSkeleton.skeletonData=this._rareCatData.getSpineData(),this.rareCatSkeleton.setSkin(this._rareCatData.getSpineSkin()),this._accSlotHat=this._rareCatData.getSpineAccSlotHat(),null!=s?this._accSlotNeck=this._rareCatData.getSpineAccSlotNeck(s.getIdx()):(this.rareCatSkeleton.setAttachment("neck_front","none"),this.rareCatSkeleton.setAttachment("neck_back","none")),null==a)this.rareCatSkeleton.setAttachment(this._accSlotHat,"none");else{var r=a.getAccType()+"_"+a.getIdx();this.rareCatSkeleton.setAttachment(this._accSlotHat,r)}if(null==s);else{r=s.getAccType()+"_"+s.getIdx();this.rareCatSkeleton.setAttachment(this._accSlotNeck,r)}this.rareCatSkeleton.setAnimation(0,"idle",!0)},OnBtn:function(){if(0==this._rareCatData);else if(-1==this._rareCatData)this._popupCatHotel.showPopupSlotBuy(1);else{var t=this._rareCatData.getUnitGrade();this._popupCatHotel.deployCat(t)}},getRareCatData:function(){return this._rareCatData}}),cc._RF.pop()},{DataMgr:"DataMgr",LocaleMgr:"LocaleMgr",UnitMgr:"UnitMgr"}],rareCoinObj:[function(t,e,i){"use strict";cc._RF.push(e,"77cbet1bKBEDre6Tye7ppbV","rareCoinObj");var a=t("SoundMgr");cc.Class({extends:cc.Component,properties:{_speedx:0,_speedy:0,_g:0,_endY:0,_moveFlag:!1,_delay:0,_playSceneMgr:null,smallCanSprite:cc.SpriteFrame,CanSprite:cc.SpriteFrame,bigCanSprite:cc.SpriteFrame},init:function(t,e,i,a,s,n,r,c){this._playSceneMgr=c,this.node.x=t,this.node.y=e,this._speedx=i,this._speedy=a,this._g=s,this._endY=n,this._delay=r,this._delay>0?this.node.opacity=0:this.node.opacity=255,this._moveFlag=!0,this.node.active=!0},hide:function(){this._playSceneMgr.getGameState()==this._playSceneMgr.GAME_STATE_PLAY&&a.playSound(a.audioGetCoin),this._playSceneMgr.pushRareCoinObj(this.node),this.node.stopAllActions(),this.node.active=!1,this._moveFlag=!1},moveUp:function(){this.node.runAction(cc.sequence(cc.delayTime(.4),cc.moveTo(1,cc.v2(717,600)).easing(cc.easeCircleActionOut()),cc.callFunc(this.hide,this)))},update:function(t){this._moveFlag&&(this._delay>0?(this._delay-=t,this._delay<=0&&(this.node.opacity=255)):(this.node.x+=t*this._speedx,this.node.y+=t*this._speedy,this._speedy-=t*this._g,this.node.y<this._endY&&(this._moveFlag=!1,this.moveUp())))}}),cc._RF.pop()},{SoundMgr:"SoundMgr"}],rewardObj:[function(t,e,i){"use strict";cc._RF.push(e,"7ec735G/M5EeL/XWS04/nKg","rewardObj");var a=t("Global");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,coinSprite:cc.Sprite,coinCountLabel:cc.Label},init:function(t,e,i){this.nameLabel.string=t,this.coinSprite.spriteFrame=e,this.coinCountLabel.string=a.getNumToType(i)}}),cc._RF.pop()},{Global:"Global"}],"use_v2.1.x_cc.Action":[function(t,e,i){"use strict";cc._RF.push(e,"d0eb3W+QmtD6JQdyveCN1PQ","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["AccessoryData","AccessoryOptionData","AccessoryUserData","CareData","CareItemUserData","CashShopData","CatHouseData","CatHouseUserData","ContentOpenData","ContestLvData","ContestRewardData","CouponData","DailyAccessData","FurnitureData","FurnitureUpgradeData","FurnitureUserData","GalleryData","GuideData","PostData","QuestData","QuestUserData","RareCatData","RareCatUserData","Global","IntroSceneMgr","AccessoryMgr","DataMgr","DataTable","DebugMgr","FurnitureMgr","LocaleMgr","PopupMgr","RareCatMgr","ShopData","SoundMgr","TSVFileHandler","TutoMgr","UIBotMgr","UITopMgr","UnitData","UnitMgr","AccMergeSlotObj","AccStatObj","CashShopObj","CoinObj","ContestRankObj","ExpObj","FeverTimeEffObj","FurnitureObj","GalleryAccSlotObj","GalleryCatSlotObj","GalleryHouseSlotObj","LuckyObj","MouseObj","QuestObj","RareCoinPlusObj","rareCoinObj","rewardObj","AdsCat","Blind","CatContest","IconAni","MergeAniObj","MergeBoardMgr","MergeCharObj","MergeObj","MoveUnitObj","PlaySceneMgr","RareBoardMgr","RareObj","SelectedCat","rareCatBtn","AccSlotObj","CatHouseObj","PopupAccEquip","PopupAccInfo","PopupAccMerge","PopupAdsCareItem","PopupAdsCat","PopupAlarm","PopupAttend","PopupAttendObj","PopupCare","PopupCashShop","PopupCatHotel","PopupCatInfo","PopupContent","PopupContest","PopupContestResult","PopupCoupon","PopupDailyAccess","PopupDecoCat","PopupDressRoom","PopupFurnitureUp","PopupGallery","PopupGoodsShop","PopupHelp","PopupHouseInfo","PopupLimitProduct","PopupLvReward","PopupMouseReward","PopupNewCat","PopupOfflineReward","PopupOverlap","PopupPost","PopupQuest","PopupRandomBox","PopupReward","PopupSetup","PopupShop","PopupSlotPlus","PopupUseCareItem","PostRewardObj","ShopBuffSlotObj","ShopCareObj","ShopCatHouseObj","ShopFurnitureObj","ShopUSlotObj","rareCatSlotObj","use_v2.1.x_cc.Action"]);